(this.webpackJsonpsparqledit=this.webpackJsonpsparqledit||[]).push([[0],{18:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var n={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",schema:"http://schema.org/",foaf:"http://xmlns.com/foaf/0.1/",vcard:"http://www.w3.org/2006/vcard/ns#",prov:"http://www.w3.org/ns/prov#",spedit:"http://iis.fraunhofer.de/sparqledit/ontology#"},a={rdf:n.rdf,schema:n.schema,xsd:n.xsd,spedit:n.spedit}},184:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildUpdateCheckQuery=t.buildUpdateQuery=void 0;var n=r(336);Object.defineProperty(t,"buildUpdateQuery",{enumerable:!0,get:function(){return n.buildUpdateQuery}}),Object.defineProperty(t,"buildUpdateCheckQuery",{enumerable:!0,get:function(){return n.buildUpdateCheckQuery}})},261:function(e,t,r){"use strict";(function(e){var n=r(3),a=r(4),i=r(10),s=r(9),o=r(204),c=function(){function t(r){Object(i.a)(this,t),this.sparqlFetcher=r?new o.SparqlEndpointFetcher({fetch:function(t,n){var a="Basic "+e.from(r.username+":"+r.password,"utf8").toString("base64");return n.headers instanceof Headers?n.headers.set("Authorization",a):n.headers.Authorization=a,fetch(t,n)}}):new o.SparqlEndpointFetcher}return Object(s.a)(t,[{key:"getQueryType",value:function(e){return this.sparqlFetcher.getQueryType(e)}},{key:"submitQuery",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t,r){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sparqlFetcher.fetchBindings(t,r);case 2:return a=e.sent,e.abrupt("return",new Promise((function(e,t){var r=[];a.on("data",(function(e){r.push(e)})),a.on("end",(function(){e(r)})),a.on("error",(function(e){console.error(e),t(e)}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"submitUpdateQuery",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t,r){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sparqlFetcher.fetchUpdate(t,r);case 2:return e.abrupt("return","SUCCESS");case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),t}();t.a=c}).call(this,r(36).Buffer)},275:function(e,t,r){},313:function(e,t,r){},314:function(e,t,r){},320:function(e,t,r){},321:function(e,t,r){},323:function(e,t,r){},324:function(e,t,r){},325:function(e,t,r){},326:function(e,t,r){},336:function(e,t,r){"use strict";var n=r(33).default;Object.defineProperty(t,"__esModule",{value:!0}),t.buildUpdateCheckQuery=t.buildUpdateQuery=void 0;var a=r(337),i=r(341);function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(0,i.isSelectWhereQuery)(e))throw new Error("missing 'WHERE' block");var r=JSON.parse(JSON.stringify(e));return t&&(r.variables=[new a.Wildcard]),r}function o(e){for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t],a=e[n];if("Literal"===a.termType&&void 0!==a.valueNew)return{name:n,datatype:a.datatype,language:a.language,valueNew:a.valueNew,insertMode:!!a.insertMode}}throw new Error("no edited variable found")}function c(e,t){var r=e.where.filter(i.isBgpPattern).flatMap((function(e){return e.triples})),n=e.where.filter(i.isOptionalPattern).flatMap((function(e){return e.patterns})).filter(i.isBgpPattern).flatMap((function(e){return e.triples})),a=r.concat(n).filter((function(e){return"Variable"===e.object.termType})).find((function(e){return e.object.value===t.name}));if(a)return a;throw new Error("no BGP triple with edited variable found")}function l(e,t){var r,a=null,s=e.where.filter(i.isOptionalPattern),o=n(s);try{for(o.s();!(r=o.n()).done;){var c=r.value.patterns.filter(i.isBgpPattern).flatMap((function(e){return e.triples}));c.map((function(e){return e.object})).filter(i.isVariableTerm).some((function(e){return e.value===t.name}))&&(a=c)}}catch(l){o.e(l)}finally{o.f()}return a}function u(e,t){for(var r=e.where.length-1;r>=0;r--){var n=e.where[r];(0,i.isBgpPattern)(n)?d(n.triples,t):e.where.splice(r,1)}}function d(e,t){e.forEach((function(e){e.subject=function(e,t){if((0,i.isVariableTerm)(e))for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(r===s){var o=t[s];if("NamedNode"==o.termType)return o}}if((0,i.isBlankNodeTerm)(e))return(0,i.createRDFVariable)(e.value);return e}(e.subject,t),e.predicate=h(e.predicate,t),e.object=function(e,t){if((0,i.isVariableTerm)(e))for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(r===s){var o=t[s];if("NamedNode"==o.termType||"Literal"===o.termType&&!o.insertMode)return o}}if((0,i.isBlankNodeTerm)(e))return(0,i.createRDFVariable)(e.value);return e}(e.object,t)}))}function h(e,t){if(!(0,i.isPropertyPath)(e)&&(0,i.isVariableTerm)(e))for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(r===s){var o=t[s];if("NamedNode"==o.termType)return o}}return e}t.buildUpdateQuery=function(e,t){var r=s(e),n=o(t),a=c(r,n),d=l(r,n);if(!0!==n.insertMode&&d){var b={type:"bgp",triples:d};r.where.push(b)}return u(r,t),function(e,t,r,n,a){var s,o={updateType:"insertdelete",delete:[],insert:[],where:[]},c={type:"update",updates:[o],prefixes:e.prefixes};if(o.where=e.where.filter(i.isBgpPattern),!0===t.insertMode){if(!n)throw new Error("did not find edited optional triples required for insert mode");var l=function(e,t,r){var n=JSON.parse(JSON.stringify(t));return n.forEach((function(t){var n=t.object;if((0,i.isVariableTerm)(n)&&n.value===r.name){var a=i.factory.literal(r.valueNew,r.language?r.language:r.datatype);t.object=a}t.subject=function(e,t){if((0,i.isVariableTerm)(e)){for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(r===s){var o=t[s];if("NamedNode"==o.termType)return o}}if((0,i.isVariableTerm)(e))return i.factory.blankNode(e.value)}return e}(t.subject,e),t.predicate=h(t.predicate,e),t.object=function(e,t){if((0,i.isVariableTerm)(e)){for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(r===s){var o=t[s];if("NamedNode"==o.termType||"Literal"===o.termType&&!o.insertMode)return o}}if((0,i.isVariableTerm)(e))return i.factory.blankNode(e.value)}return e}(t.object,e)})),{type:"bgp",triples:n}}(r,n,t);o.insert?o.insert.push(l):o.insert=[l]}else{var u=function(e,t){var r={type:"bgp",triples:[e]};return r}(a),d=function(e,t){var r=JSON.parse(JSON.stringify(e)),n=i.factory.literal(t.valueNew,t.language?t.language:t.datatype);return r.object=n,{type:"bgp",triples:[r]}}(a,t);o.delete?o.delete.push(u):o.delete=[u],o.insert?o.insert.push(d):o.insert=[d]}(null===(s=null===e||void 0===e?void 0:e.from)||void 0===s?void 0:s.default[0])&&(o.graph=e.from.default[0]);return c}(r,n,t,d,a)},t.buildUpdateCheckQuery=function(e,t){var r=s(e,!0),n=o(t),a=(c(r,n),l(r,n));if(!0!==n.insertMode&&a){var d={type:"bgp",triples:a};r.where.push(d)}return u(r,t),!1===r.where.filter((function(e){return(0,i.isBgpPattern)(e)})).flatMap((function(e){return e.triples})).some((function(e){return(0,i.isVariableTerm)(e.subject)||(0,i.isVariableTerm)(e.object)}))&&function(e){var t={type:"bind",variable:(0,i.createRDFVariable)("meaninglessVariable"),expression:{type:"operation",operator:"now",args:[]}};e.where.push(t)}(r),r}},341:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBlankNodeTerm=t.isPropertyPath=t.isVariableTerm=t.isOptionalPattern=t.isBgpPattern=t.isSelectWhereQuery=t.createRDFVariable=t.factory=void 0;var n=r(226);t.factory=new n.DataFactory,t.createRDFVariable=function(e){return t.factory.variable?t.factory.variable(e):{termType:"Variable",value:e}},t.isSelectWhereQuery=function(e){return void 0!==e.where},t.isBgpPattern=function(e){return"bgp"===e.type},t.isOptionalPattern=function(e){return"optional"===e.type},t.isVariableTerm=function(e){return"Variable"===e.termType},t.isPropertyPath=function(e){return e.hasOwnProperty("pathType")},t.isBlankNodeTerm=function(e){return"BlankNode"===e.termType}},346:function(e,t){},348:function(e,t){},371:function(e,t){},373:function(e,t){},406:function(e,t,r){},408:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),i=r(48),s=r.n(i),o=(r(275),r(276),r(5)),c=r(37),l=r(172),u=r(205),d=r(87),h=(r(313),r(44)),b=r(64),p=r(136),f=r(25),O=(r(314),r(18)),j=r(0);function m(e){var t=e.webId,r=O.a.vcard+"hasPhoto",n=[O.a.vcard+"fn",O.a.foaf+"name"],a=O.a.vcard+"organization-name";return Object(j.jsx)(c.CombinedDataProvider,{datasetUrl:t,thingUrl:t,loadingComponent:g,children:Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)("div",{className:"image-placeholder",children:Object(j.jsx)(c.Image,{property:r,width:50,className:"image-profile",loadingComponent:null})}),Object(j.jsxs)("div",{className:"mx-3",children:[Object(j.jsx)("h5",{className:"my-0",children:Object(j.jsx)(c.Text,{properties:n,errorComponent:"Unknown user"})}),Object(j.jsx)("small",{children:Object(j.jsx)(c.Text,{property:a,errorComponent:"-"})})]})]})})}function g(){return Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)("div",{className:"image-placeholder"}),Object(j.jsxs)("div",{className:"mx-3",children:[Object(j.jsx)("h5",{className:"my-0",children:"Username"}),Object(j.jsx)("small",{children:"Organization"})]})]})}function T(e){var t=e.webId;return Object(j.jsxs)(h.a,{id:"nav-dropdown-solid",drop:"down",align:"end",className:"no-padding-in-children",title:Object(j.jsx)("div",{style:{display:"inline-block",verticalAlign:"middle"},children:Object(j.jsx)(m,{webId:t})}),children:[Object(j.jsxs)(h.a.Item,{onClick:function(){return window.open(t,"_blank")},children:[Object(j.jsx)("i",{className:"bi bi-person-fill"}),"Open profile"]}),Object(j.jsx)(c.LogoutButton,{onError:function(e){console.error(e),alert(e.message)},children:Object(j.jsxs)(h.a.Item,{children:[Object(j.jsx)("i",{className:"bi bi-door-open-fill"})," Solid logout"]})})]})}function x(){var e={clientName:"SPARQL_edit"},t=a.a.useState("https://localhost:3000"),r=Object(o.a)(t,2),n=r[0],i=r[1],s=a.a.useState("https://idp.example.org"),l=Object(o.a)(s,2),u=l[0],d=l[1];a.a.useEffect((function(){i(window.location.href)}),[i]);var O=function(e){console.error(e),alert(e.message)};return Object(j.jsxs)(h.a,{id:"nav-dropdown-solidlogin",drop:"down",align:"end",className:"no-padding-in-children",title:Object(j.jsxs)("div",{style:{display:"inline-block",verticalAlign:"middle"},children:[Object(j.jsx)("span",{className:"mx-2",children:"Login with"}),Object(j.jsx)("img",{alt:"Solid",src:"solid.svg",height:"45",className:"d-inline-block"})]}),children:[Object(j.jsx)(h.a.Header,{children:"choose your identity provider ..."}),Object(j.jsx)(h.a.Item,{children:Object(j.jsx)(c.LoginButton,{authOptions:e,oidcIssuer:"https://solidcommunity.net",redirectUrl:n,onError:O,children:"solidcommunity.net"})}),Object(j.jsx)(h.a.Item,{children:Object(j.jsx)(c.LoginButton,{authOptions:e,oidcIssuer:"https://inrupt.net",redirectUrl:n,onError:O,children:"inrupt.net"})}),Object(j.jsxs)(p.a,{className:"mt-2 customIDPInputGroup",children:[Object(j.jsx)(b.a,{className:"customIDPFormControl","aria-label":"custom IDP","aria-describedby":"customIDPButton",size:"sm",type:"url",onChange:function(e){return d(e.target.value)},value:u}),Object(j.jsx)(c.LoginButton,{authOptions:e,oidcIssuer:u,redirectUrl:n,onError:O,children:Object(j.jsx)(f.a,{type:"submit",variant:"outline-secondary",id:"customIDPButton",children:Object(j.jsx)("i",{className:"bi bi-play-fill"})})})]})]})}function v(){var e=Object(c.useSession)().session;return Object(j.jsx)(u.a,{bg:"light",variant:"light",className:"mb-4",children:Object(j.jsxs)(l.a,{children:[Object(j.jsxs)(u.a.Brand,{children:[Object(j.jsx)("img",{alt:"SPARQL_edit",src:"logo_cs.png",height:"40",className:"d-inline-block"}),Object(j.jsx)("h2",{className:"d-inline-block align-middle mx-2 my-1",children:"SPARQL_edit"})]}),Object(j.jsx)(d.a,{className:"justify-content-end",children:e.info.isLoggedIn?Object(j.jsx)(T,{webId:e.info.webId}):Object(j.jsx)(x,{})})]})})}var y=r(27);function E(e){var t=e.show,r=e.onHide;return Object(j.jsxs)(y.a,{show:t,fullscreen:"lg-down",onHide:r,size:"lg",children:[Object(j.jsx)(y.a.Header,{closeButton:!0,children:Object(j.jsx)(y.a.Title,{children:"Legal notice / impressum"})}),Object(j.jsxs)(y.a.Body,{children:[Object(j.jsxs)("p",{children:["SPARQL_edit v","0.7.3"]}),Object(j.jsxs)("p",{children:["\xa9 ",Object(j.jsx)("a",{href:"mailto:sascha.meckler@iis.fraunhofer.de",className:"text-secondary",children:"S. Meckler"})," 2023"]}),Object(j.jsx)("p",{children:"This Web application is still in development. No liability is taken for any damage caused by the use of this website."}),Object(j.jsx)("p",{children:"This Web application uses browser cookies and the HTML Web Storage (Local Storage) for storing data that is essential for the correct functioning of this Web application. By using this website, you consent to the use of data storage for technical reasons of function."}),Object(j.jsx)("p",{children:"This Web application uses the following open-source software:"}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/facebook/react",target:"_blank",rel:"noreferrer",children:"facebook/react"}),Object(j.jsx)("p",{className:"small",children:'MIT License Copyright (c) Facebook, Inc. and its affiliates. Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/react-bootstrap/react-bootstrap",target:"_blank",rel:"noreferrer",children:"react-bootstrap/react-bootstrap"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright (c) 2014-present Stephen J. Collings, Matthew Honnibal, Pieter Vanderwerff Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/twbs/bootstrap",target:"_blank",rel:"noreferrer",children:"twbs/bootstrap"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright (c) 2011-2022 Twitter, Inc. Copyright (c) 2011-2022 The Bootstrap Authors Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/twbs/icons",target:"_blank",rel:"noreferrer",children:"twbs/icons"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright (c) 2019-2021 The Bootstrap Authors Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/RubenVerborgh/SPARQL.js",target:"_blank",rel:"noreferrer",children:"RubenVerborgh/SPARQL.js"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright \xa92014 Ruben Verborgh Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/rubensworks/fetch-sparql-endpoint.js",target:"_blank",rel:"noreferrer",children:"rubensworks/fetch-sparql-endpoint.js"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright \xa9 2017 Ruben Taelman Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/rubensworks/jsonld-streaming-parser.js",target:"_blank",rel:"noreferrer",children:"rubensworks/jsonld-streaming-parser.js"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright \xa9 2018 Ruben Taelman Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/rubensworks/rdf-literal.js",target:"_blank",rel:"noreferrer",children:"rubensworks/rdf-literal.js"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright \xa9 2019 Ruben Taelman Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/TriplyDB/yasgui",target:"_blank",rel:"noreferrer",children:"TriplyDB/yasgui"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/zazuko/rdf-vocabularies",target:"_blank",rel:"noreferrer",children:"zazuko/rdf-vocabularies"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright (c) 2019 Zazuko GmbH Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/inrupt/solid-ui-react",target:"_blank",rel:"noreferrer",children:"inrupt/solid-ui-react"}),Object(j.jsx)("p",{className:"small",children:'MIT License Copyright (c) 2020 Inrupt Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]})]}),Object(j.jsxs)("p",{children:["This Web application uses the Solid logo which is under the ",Object(j.jsx)("a",{href:"https://creativecommons.org/licenses/by/4.0/",children:"CC-BY 4.0 license"})," and was designed by Guillaume Baudusseau. The Solid logo is used in its original form, but also in a greyscale version with changed colors."]})]})]})}function w(e){var t=e.children;return Object(j.jsx)(c.SessionProvider,{children:Object(j.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[Object(j.jsx)(v,{}),Object(j.jsx)(l.a,{className:"App flex-fill",children:t}),Object(j.jsx)(N,{})]})})}function N(){var e=a.a.useState(!1),t=Object(o.a)(e,2),r=t[0],n=t[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("footer",{className:"footer",children:[Object(j.jsx)("hr",{className:"customSeparatorLine"}),Object(j.jsx)("div",{className:"d-flex justify-content-center mb-1",children:Object(j.jsxs)("span",{className:"text-secondary fw-light mx-2",children:["SPARQL_edit (v","0.7.3",") - ",Object(j.jsx)("a",{className:"text-secondary fw-light",href:"/",onClick:function(e){return e.preventDefault(),e.stopPropagation(),n(!0),!1},children:"legal notice / impressum"})]})})]}),Object(j.jsx)(E,{show:r,onHide:function(){return n(!1)}})]})}var S=r(3),R=r(4),I=r(13),A=(r(320),r(67)),C=r(266),L=r(26),U=r(39),H=r(1),F=r(65),k=r(21),P=r(96),q=r(118),D=(r(321),r(259)),Q=r.n(D);r(322);function M(e){var t=e.sparqlView,r=e.sparqlViewUpdateCallback,n=e.isLoading,i=e.submitQueryCallback,s=e.credentialsForm,c=a.a.useState(null),l=Object(o.a)(c,2),u=l[0],d=l[1],h=a.a.useState(!1),b=Object(o.a)(h,2),p=b[0],O=b[1];function m(){i()}function g(e,n){t[e]=n,t.dateCreated=Date.now(),r(t)}function T(){u&&(!1===u.queryValid?(O(!0),u.showNotification("invalidQueryNotification","invalid syntax or grammar (SPARQL_edit allows only a subset of SPARQL)")):(O(!1),u.hideNotification("invalidQueryNotification")))}return a.a.useEffect((function(){var e=function(){return m()},r=function(e){g("query",e.getValue()),T()};if(u)u.query=Object(R.a)(Object(S.a)().mark((function t(){return Object(S.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)}))),u.config.createShareableLink=function(){return window.location.href},u.options.extraKeys["Ctrl-Enter"]=e,u.options.requestConfig.endpoint=t.queryURL,u.on("query",e),u.on("change",r);else{var n={lineNumbers:!0,persistent:null,showQueryButton:!0,tabSize:2,extraKeys:{"Ctrl-Enter":e,"Ctrl-S":null}},a=new Q.a(document.getElementById("yasqe"),n);a.query=Object(R.a)(Object(S.a)().mark((function t(){return Object(S.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)}))),a.setValue(t.query),a.options.requestConfig.endpoint=t.queryURL,d(a)}return T(),function(){u&&(u.off("query",e),u.off("change",r))}}),[u,t]),Object(j.jsxs)("section",{className:"mb-4",children:[Object(j.jsxs)(k.a,{className:"mb-1",id:"queryForm",onSubmit:n?null:function(e){return function(e){e.preventDefault(),m()}(e)},children:[Object(j.jsxs)(U.a,{className:"mb-2 mt-3",children:[Object(j.jsx)(L.a,{lg:3,children:Object(j.jsx)("h5",{className:"mb-4",children:"General information"})}),Object(j.jsxs)(L.a,{children:[Object(j.jsxs)(k.a.Group,{as:U.a,className:"mb-3",controlId:"formName",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Name *"}),Object(j.jsx)(L.a,{sm:9,children:Object(j.jsx)(k.a.Control,{type:"text",value:t.name,onChange:function(e){return g("name",e.target.value)},required:!0})})]}),Object(j.jsxs)(k.a.Group,{as:U.a,className:"mb-3",controlId:"formCreator",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Creator"}),Object(j.jsx)(L.a,{sm:9,children:Object(j.jsx)(k.a.Control,{type:"text",value:t.creator,onChange:function(e){return g("creator",e.target.value)}})})]}),Object(j.jsxs)(k.a.Group,{as:U.a,className:"mb-3",controlId:"formDescription",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Description"}),Object(j.jsx)(L.a,{sm:9,children:Object(j.jsx)(k.a.Control,{as:"textarea",rows:3,value:t.description,onChange:function(e){return g("description",e.target.value)}})})]})]}),Object(j.jsx)(L.a,{lg:"2",children:Object(j.jsx)("p",{className:"text-secondary",children:"* required fields"})})]}),Object(j.jsxs)(U.a,{className:"mb-2",children:[Object(j.jsx)(L.a,{lg:3,children:Object(j.jsx)("h5",{className:"mb-4",children:"SPARQL endpoint"})}),Object(j.jsxs)(L.a,{children:[Object(j.jsxs)(k.a.Group,{as:U.a,className:"mb-3",controlId:"formQueryUrl",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Query URL *"}),Object(j.jsx)(L.a,{sm:9,children:Object(j.jsx)(k.a.Control,{type:"text",value:t.queryURL,onChange:function(e){return g("queryURL",e.target.value)},required:!0})})]}),Object(j.jsxs)(k.a.Group,{as:U.a,className:"mb-3",controlId:"formUpdateUrl",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Update URL"}),Object(j.jsxs)(L.a,{sm:9,children:[Object(j.jsx)(k.a.Control,{type:"text",value:t.updateURL,onChange:function(e){return g("updateURL",e.target.value)}}),Object(j.jsx)(k.a.Text,{className:"text-muted px-1",children:"necessary if different URLs for query and update are used"})]})]}),Object(j.jsxs)(k.a.Group,{as:U.a,className:"mb-3",controlId:"formBasicAuth",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Basic Auth"}),Object(j.jsxs)(L.a,{sm:9,children:[Object(j.jsx)(k.a.Check,{type:"switch",className:"form-switch-md",size:"lg",id:"formBasicAuthSwitch",checked:t.requiresBasicAuth,onChange:function(e){return g("requiresBasicAuth",e.target.checked)}}),t.requiresBasicAuth?s:null]})]}),Object(j.jsxs)(k.a.Group,{as:U.a,className:"mb-3",controlId:"formUpdateLogGraph",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Update logging"}),Object(j.jsx)(L.a,{sm:9,children:Object(j.jsx)(V,{sparqlView:t,handleGraphNameChange:function(e){return g("updateLogGraph",e)}})})]})]}),Object(j.jsx)(L.a,{lg:"2"})]})]}),Object(j.jsxs)(U.a,{className:"mb-2",children:[Object(j.jsx)(L.a,{lg:3,children:Object(j.jsx)("h5",{className:"mb-4",children:"SPARQL query"})}),Object(j.jsxs)(L.a,{children:[Object(j.jsx)("div",{id:"yasqe"}),Object(j.jsx)("div",{className:"d-grid gap-2",children:Object(j.jsx)(f.a,{variant:p?"secondary":"primary",type:"submit",form:"queryForm",disabled:n,className:"my-2",children:n?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," loading \u2026 "]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"bi bi-send"})," ",p?"submit invalid query":"submit query"]})})})]})]})]})}function V(e){var t=e.sparqlView,r=e.handleGraphNameChange,n=a.a.useState("string"===typeof t.updateLogGraph||!1),i=Object(o.a)(n,2),s=i[0],c=i[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k.a.Check,{type:"switch",className:"form-switch-md",size:"lg",id:"formUpdateLogGraphSwitch",checked:s,onChange:function(e){!0===e.target.checked?(c(!0),r("")):(c(!1),r(void 0))}}),s&&Object(j.jsx)(P.a,{controlId:"formUpdateLogGraphName",label:"Named Graph for update logs *",children:Object(j.jsx)(k.a.Control,{type:"text",placeholder:"http://example.org/graph/updatelogs",autoComplete:"graph-name",value:t.updateLogGraph,onChange:function(e){return r(e.target.value)},required:!0})})]})}r(323);var B=r(263),W=r(206),G=(r(324),r(265)),_=r(260);function Y(e){var t=e.rawUri,r=e.prefixUri,n=Object(j.jsx)("span",{children:t});if(r&&r.indexOf(":")>0){var a=r.indexOf(":"),i=r.substring(0,a),s=r.substring(a+1,r.length);n=Object(j.jsxs)("span",{children:[i,":",Object(j.jsx)("strong",{children:s})]})}return Object(j.jsx)("td",{className:"text-break px-2 align-middle",children:Object(j.jsx)(G.a,{placement:"bottom",delay:{show:400,hide:800},overlay:Object(j.jsx)(_.a,{className:"tooltip-light text-nowrap",children:Object(j.jsx)("div",{className:"m-1",children:Object(j.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:t})})}),children:n})})}r(325);var z=r(177),J=r(9),K=r(10),X=r(16),$=r(17),Z=r(61),ee=function(e){Object(X.a)(r,e);var t=Object($.a)(r);function r(e,n){var a;return Object(K.a)(this,r),(a=t.call(this,e)).name="QueryError",a.endpointQuery=n,a}return Object(J.a)(r)}(Object(Z.a)(Error)),te=function(e){Object(X.a)(r,e);var t=Object($.a)(r);function r(e,n){var a;return Object(K.a)(this,r),(a=t.call(this,e)).name="UpdateError",a.endpointUpdate=n,a}return Object(J.a)(r)}(Object(Z.a)(Error)),re=function(e){Object(X.a)(r,e);var t=Object($.a)(r);function r(e,n){var a;return Object(K.a)(this,r),(a=t.call(this,e,n)).name="UpdateCheckError",a}return Object(J.a)(r)}(te),ne=function(e){Object(X.a)(r,e);var t=Object($.a)(r);function r(e,n){var a;return Object(K.a)(this,r),(a=t.call(this,e,n)).name="DataChangeUpdateCheckError",a}return Object(J.a)(r)}(te),ae=function(e){Object(X.a)(r,e);var t=Object($.a)(r);function r(e){var n;return Object(K.a)(this,r),(n=t.call(this,e)).name="BuildingError",n}return Object(J.a)(r)}(Object(Z.a)(Error)),ie=function(e){Object(X.a)(r,e);var t=Object($.a)(r);function r(e,n){var a;return Object(K.a)(this,r),(a=t.call(this,e)).name="SolidError",a.fileURL=n,a}return Object(J.a)(r)}(Object(Z.a)(Error)),se=function(e){Object(X.a)(r,e);var t=Object($.a)(r);function r(e){var n;return Object(K.a)(this,r),(n=t.call(this,e)).name="RDFProcessingError",n}return Object(J.a)(r)}(Object(Z.a)(Error));function oe(e){var t=e.handleLiteralUpdate,r=e.handleInputReset,n=e.openModal,a=e.inputCellState,i=a.buildingError||a.updateCheckError||a.updateError,s=a.updateCheckError instanceof ne;return Object(j.jsxs)(z.a,{"aria-label":"update controls",className:"mt-1",children:[Object(j.jsx)(f.a,{variant:"success",type:"submit",alt:"update",onClick:function(e){return t(e)},disabled:a.isExecutingQuery||a.buildingError,children:a.isExecutingQuery?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," saving \u2026"]}):Object(j.jsxs)("span",{children:[Object(j.jsx)("i",{className:"bi bi-pencil-square"})," save "]})}),Object(j.jsxs)(f.a,{variant:"secondary",type:"reset",onClick:function(e){return r(e)},disabled:a.isExecutingQuery,children:[Object(j.jsx)("i",{className:"bi bi-arrow-counterclockwise"})," reset"]}),i?s?Object(j.jsxs)(f.a,{variant:"warning",onClick:function(){return n()},disabled:a.isExecutingQuery,children:[Object(j.jsx)("i",{className:"bi bi-exclamation-square"})," warn"]}):Object(j.jsxs)(f.a,{variant:"danger",onClick:function(){return n()},disabled:a.isExecutingQuery,children:[Object(j.jsx)("i",{className:"bi bi-x-square"})," error"]}):Object(j.jsxs)(f.a,{variant:"primary",onClick:function(){return n()},disabled:a.isExecutingQuery,children:[Object(j.jsx)("i",{className:"bi bi-info-square"})," info"]})]})}r(326);var ce=r(86);function le(e){var t=[];if(e instanceof ee){if(e.message.includes("404")&&t.push("Wrong SPARQL endpoint URL"),e.message.includes("401")&&t.push("The SPARQL endpoint requires authentication (e.g. username/password)"),e.message.toLowerCase().includes("failed to fetch")||e.message.toLowerCase().includes("networkerror")){if(e.endpointQuery&&e.endpointQuery.length>1){var r=/^http:\/\/localhost[:/]/gi.test(e.endpointQuery),n=e.endpointQuery.toLowerCase().startsWith("http://"),a=window.location.href.startsWith("https://");!r&&n&&a&&t.push("Unencrypted HTTP requests from HTTPS websites are blocked by the browser")}t.push("The SPARQL server does not support CORS requests"),t.push("The SPARQL endpoint requires authentication (e.g. username/password)"),t.push("Wrong SPARQL endpoint URL")}e.message.toLowerCase().includes("unknown sparql results content type")&&t.push("The given URL is not a valid SPARQL endpoint"),e.message.toLowerCase().includes("parse error")&&(t.push("The submitted SPARQL query contains a syntax/grammar error. Please check if there is a red hint in the query box."),t.push("A grammar mistake in the SPARQL query"))}return e instanceof te&&(e.message.includes("404")&&t.push("Wrong SPARQL update endpoint URL"),(e.message.includes("415")||e.message.includes("405"))&&t.push("The given update URL is not a valid SPARQL update endpoint"),(e.message.includes("401")||e.message.toLowerCase().includes("failed to fetch"))&&(t.push("Wrong SPARQL update endpoint URL"),t.push("The SPARQL endpoint requires authentication (e.g. username/password)"))),(e instanceof re||e instanceof ne)&&(e.message.toLowerCase().includes("ineffective")&&(t.push("RDF literal value has been changed in the meantime"),t.push("Connected RDF triples have been modified in the meantime")),e.message.toLowerCase().includes("ambiguous")&&t.push("The generated update would affect more than one RDF triple")),e instanceof ae&&t.push("An unsupported SPARQL language feature was used in the original query"),e instanceof ie&&(e.message.includes("403")&&t.push("You have insufficient rights for this operation on the Solid Pod"),e.message.includes("404")&&t.push("The is no file/container with the given URL on the Solid Pod")),t}var ue=4,de=10;function he(e){var t=e.show,r=e.onHide,n=e.inputCellState,a=n.buildingError||n.updateCheckError||n.updateError,i=n.updateCheckError instanceof ne,s=ue;if(n.updateQuery){var o=n.updateQuery.split(/\r\n|\r|\n/).length;s=Math.max(ue,Math.min(o+1,de))}return Object(j.jsxs)(y.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(y.a.Header,{className:a?i?"alert-warning":"alert-danger":"",closeButton:!0,children:Object(j.jsxs)(y.a.Title,{id:"contained-modal-title-vcenter",children:["SPARQL update ",a?i?"warning":"error":"information"]})}),Object(j.jsxs)(y.a.Body,{className:a?i?"alert-warning":"alert-danger":"",children:[n.buildingError?Object(j.jsx)(be,{errorTitle:"Update query generation error",errorObject:n.buildingError}):null,n.updateError?Object(j.jsx)(be,{errorTitle:"Update execution error",errorObject:n.updateError}):null,n.updateCheckError?Object(j.jsx)(be,{errorTitle:"Update preflight check",errorObject:n.updateCheckError}):null,n.updateQuery?Object(j.jsx)(k.a,{children:Object(j.jsxs)(k.a.Group,{className:"mb-3",controlId:"formSparqlUpdateQuery",children:[Object(j.jsx)(k.a.Label,{children:"Auto-generated update query"}),Object(j.jsx)(k.a.Control,{as:"textarea",rows:s,defaultValue:n.updateQuery,className:"white-readonly",readOnly:!0})]})}):null]})]})}function be(e){var t=e.errorTitle,r=e.errorObject,n=le(r);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:t}),Object(j.jsxs)(ce.a,{variant:"light",children:[Object(j.jsx)("p",{children:r.message}),n.length>0?Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"font-weight-bold mb-1",children:"Possible causes:"}),Object(j.jsx)("ul",{children:n.map((function(e){return Object(j.jsx)("li",{children:e},e)}))})]}):null]})]})}function pe(e,t){switch(t.type){case"INPUTCELL_CHANGE":var r={origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue};if(t.currentCellValue!=e.origCellValue){r.currentCellValue=t.currentCellValue;try{r.checkQuery=t.buildCheckQuery(),r.updateQuery=t.buildUpdateQuery()}catch(l){var n=new ae("The update query building algorithm failed.\n".concat(l.name," - ").concat(l.message));r.updateQuery=r.checkQuery=null,r.buildingError=n}}return r;case"INPUTCELL_INSERT_INIT":var a={origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.origCellValue};try{a.updateQuery=t.buildUpdateQuery()}catch(l){var i=new ae("The update query building algorithm failed.\n".concat(l.name," - ").concat(l.message));a.updateQuery=a.checkQuery=null,a.buildingError=i}return a;case"INPUTCELL_RESET":return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue};case"INPUTCELL_UPDATE_START":return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.currentCellValue,updateQuery:e.updateQuery,checkQuery:e.checkQuery,isExecutingQuery:!0};case"INPUTCELL_UPDATE_SUCCESS":return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.currentCellValue,updateResult:t.result,isExecutingQuery:!1};case"INPUTCELL_UPDATE_FAIL":var s=new te("The update query failed.\n".concat(t.error.name," - ").concat(t.error.message),e.origSparqlSubmission.endpointUpdate);return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.currentCellValue,updateQuery:e.updateQuery,checkQuery:e.checkQuery,updateError:s,isExecutingQuery:!1};case"INPUTCELL_UPDATECHECK_FAIL":var o="The preflight check was not successful:\n ".concat(t.error.message),c=new re(o,e.origSparqlSubmission.endpointUpdate);return t.error instanceof ne&&(c=new ne(o,e.origSparqlSubmission.endpointUpdate)),{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.currentCellValue,updateQuery:e.updateQuery,checkQuery:e.checkQuery,updateCheckError:c,isExecutingQuery:!1};default:throw new Error("Invalid reducer action: ".concat(t.type))}}var fe=r(178);var Oe=Object(J.a)((function e(t,r,n,a){Object(K.a)(this,e),this.endpointQuery=t,this.endpointUpdate=r,this.queryString=n,this.credentials=a})),je=Object(J.a)((function e(t,r,n){Object(K.a)(this,e),this.querySubmission=t,this.queryResult=r,this.queryObject=n})),me=r(98);function ge(e){var t=e.refreshTableCallback,r=e.isRefreshing,n=e.sparqlSubmission,i=e.rowBinding,s=e.variable,c=e.insertMode,l=void 0!==c&&c,u=e.sparqlView,d=a.a.useState(!1),h=Object(o.a)(d,2),b=h[0],p=h[1];return l?Object(j.jsxs)("td",{className:"align-middle",children:[!b&&Object(j.jsx)(f.a,{variant:"link",className:"text-secondary",onClick:function(){return p(!0)},disabled:r,children:Object(j.jsx)("small",{children:"insert missing value"})}),b&&Object(j.jsx)(Te,{refreshTableCallback:t,isRefreshing:r,sparqlSubmission:n,rowBinding:i,variable:s,insertMode:!0,insertModeReset:function(){return p(!1)},sparqlView:u})]}):Object(j.jsx)("td",{className:"align-middle",children:Object(j.jsx)(Te,{refreshTableCallback:t,isRefreshing:r,sparqlSubmission:n,rowBinding:i,variable:s,insertMode:l,sparqlView:u})})}function Te(e){var t=e.refreshTableCallback,r=e.isRefreshing,n=e.sparqlSubmission,i=e.rowBinding,s=e.variable,c=e.insertMode,l=e.insertModeReset,u=e.sparqlView,d=a.a.useState(!1),h=Object(o.a)(d,2),b=h[0],p=h[1],f=function(e){var t=function(e){var t,r=null;return(null===(t=e.language)||void 0===t?void 0:t.length)>0?e.language:r}(e),r=e.datatype.value.toLowerCase(),n=Object(fe.fromRdf)(e),a="text",i=null,s=null;switch(typeof n){case"string":r.endsWith("#time")&&/(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?$|(24:00:00(\.0+)?))$/.test(n)&&(a="time"),/\r?\n|\r/gm.test(n)&&(a="textarea");break;case"number":isNaN(n)?(s=new Error("Cannot convert '".concat(e.value,"' to a number.")),n=e.value):a="number";break;case"boolean":a="checkbox",n=String(n);break;case"object":if(n instanceof Date)if(r.endsWith("#date"))try{n=n.toISOString().substring(0,10),a="date"}catch(l){s=new Error("Cannot convert '".concat(e.value,"' to xsd:date.")),n=e.value}else if(r.endsWith("#datetime"))try{var o=6e4*n.getTimezoneOffset(),c=new Date(n.getTime()-o);n=c.toISOString().replace("Z",""),a="datetime-local",i=1}catch(l){s=new Error("Cannot convert '".concat(e.value,"' to xsd:dateTime.")),n=e.value}else/#gYear(Month)?$|#gDay$|#gMonth$/gi.test(r)&&(n=e.value)}return{error:s,value:n,inputType:a,inputStep:i,language:t}}(i[s]),O=f.error,m=f.value,g=f.inputType,T=f.inputStep,x=f.language,v=function(e,t){return{origSparqlSubmission:e,origCellValue:t,currentCellValue:null,buildingError:null,updateQuery:null,checkQuery:null,updateResult:null,updateError:null,updateCheckError:null,isExecutingQuery:!1}}(n,m),y=a.a.useReducer(pe,v),E=Object(o.a)(y,2),w=E[0],N=E[1];function I(e){return A.apply(this,arguments)}function A(){return(A=Object(R.a)(Object(S.a)().mark((function e(r){var n,a,i;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),w.updateQuery&&!w.isExecutingQuery){e.next=3;break}return e.abrupt("return");case 3:return N({type:"INPUTCELL_UPDATE_START"}),e.prev=4,n=new Oe(w.origSparqlSubmission.endpointQuery,w.origSparqlSubmission.endpointUpdate,w.checkQuery,w.origSparqlSubmission.credentials),console.log("inputCellState.checkQuery",w.checkQuery),e.next=9,Object(me.executeSelectOrUpdateQuery)(n);case 9:if(a=e.sent,console.log("checkQueryResult",a),0!==a.length){e.next=15;break}return e.abrupt("return",N({type:"INPUTCELL_UPDATECHECK_FAIL",error:new ne("ineffective update query")}));case 15:if(!(a.length>1)){e.next=19;break}return e.abrupt("return",N({type:"INPUTCELL_UPDATECHECK_FAIL",error:new re("ambiguous update query")}));case 19:if(1!==a.length){e.next=23;break}console.log("successful update query check"),e.next=24;break;case 23:throw new re("invalid check result");case 24:e.next=29;break;case 26:return e.prev=26,e.t0=e.catch(4),e.abrupt("return",N({type:"INPUTCELL_UPDATECHECK_FAIL",error:e.t0}));case 29:return e.prev=29,i=new Oe(w.origSparqlSubmission.endpointQuery,w.origSparqlSubmission.endpointUpdate,w.updateQuery,w.origSparqlSubmission.credentials),e.next=33,Object(me.executeSelectOrUpdateQuery)(i);case 33:"SUCCESS"===e.sent?t():N({type:"INPUTCELL_UPDATE_FAIL",error:new Error("update result not successful")}),e.next=40;break;case 37:e.prev=37,e.t1=e.catch(29),N({type:"INPUTCELL_UPDATE_FAIL",error:e.t1});case 40:case"end":return e.stop()}}),e,null,[[4,26],[29,37]])})))).apply(this,arguments)}var C=function(e){var t=String(e.target.value);L(t)},L=function(e){N({type:"INPUTCELL_CHANGE",currentCellValue:e,buildUpdateQuery:function(){var t,r=JSON.parse(JSON.stringify(i));return r[s].valueNew=String(e),(null===(t=u.updateLogGraph)||void 0===t?void 0:t.length)>1?Object(me.buildUpdateLogQueryForVariable)(n.queryString,r,u):Object(me.buildUpdateQueryForVariable)(n.queryString,r)},buildCheckQuery:function(){var t=JSON.parse(JSON.stringify(i));return t[s].valueNew=String(e),Object(me.buildCheckQueryForVariable)(n.queryString,t)}})},U=a.a.useRef(null);a.a.useEffect((function(){var e;null!==(e=U.current.dataset)&&void 0!==e&&e.reset&&(U.current.dataset.reset=null,U.current.focus())}),[w]),a.a.useEffect((function(){if(c){N({type:"INPUTCELL_INSERT_INIT",buildUpdateQuery:function(){return i[s].valueNew=String(w.origCellValue),Object(me.buildUpdateQueryForVariable)(n.queryString,i)}}),U.current.dataset.reset=!0}}),[]);var H=w.isExecutingQuery||r,F=!(!w.updateQuery&&!w.buildingError),P=!!(w.buildingError||w.updateError||w.updateCheckError),D=w.updateCheckError instanceof ne,Q=w.currentCellValue||""===w.currentCellValue?w.currentCellValue:w.origCellValue;return Object(j.jsxs)("div",{children:[Object(j.jsxs)(k.a,{onSubmit:function(e){return I(e)},children:[{checkbox:Object(j.jsx)(k.a.Check,{type:"checkbox",onChange:function(e){return function(e){var t=String(e.target.checked);L(t)}(e)},label:Q,ref:U,checked:"true"===Q,isInvalid:P,readOnly:H,className:D?"warninput":""}),textarea:Object(j.jsx)(k.a.Control,{as:"textarea",onChange:function(e){return C(e)},ref:U,value:Q,lang:x,isInvalid:P,isValid:!!w.updateResult||null,readOnly:H,className:D?"warninput":""})}[g]||Object(j.jsx)(k.a.Control,{type:g,onChange:function(e){return C(e)},isInvalid:P,ref:U,value:Q,lang:x,step:T,isValid:!!w.updateResult||null,readOnly:H,className:D?"warninput":""}),Object(j.jsx)(q.a,{in:F,mountOnEnter:!0,unmountOnExit:!0,children:Object(j.jsx)("div",{children:Object(j.jsx)(oe,{handleLiteralUpdate:I,handleInputReset:function(e){return"function"===typeof l?l():w.updateCheckError instanceof ne?t():(U.current.dataset.reset=!0,void N({type:"INPUTCELL_RESET"}))},openModal:function(){return p(!0)},inputCellState:w})})})]}),O&&Object(j.jsxs)("div",{className:"text-warning",title:O.message,children:[Object(j.jsx)("i",{className:"bi bi-exclamation-triangle"}),Object(j.jsx)("small",{children:" RDF datatype incorrect"})]}),Object(j.jsx)(he,{show:b,onHide:function(){return p(!1)},inputCellState:w})]})}var xe=r(138),ve=r(262),ye=r(74);function Ee(e){var t="",r=e.datatype.value.toLowerCase(),n=Object(fe.fromRdf)(e);switch(typeof n){case"string":t="";break;case"number":t="0.0";break;case"boolean":t="false";break;case"object":n instanceof Date&&(r.endsWith("#date")?t="1970-01-01":r.endsWith("#datetime")&&(t="1970-01-01T00:00:00"))}return t}function we(e){var t=new Set(e.flatMap((function(e){return Object.keys(e).filter((function(t){return!0===e[t].include}))})));return Object(I.a)(t)}var Ne=10;function Se(e){var t=e.refreshTableCallback,r=e.isRefreshing,n=e.sparqlResult,i=e.sparqlView,s=a.a.useState(0),c=Object(o.a)(s,2),l=c[0],u=c[1],d=a.a.useState(""),h=Object(o.a)(d,2),b=h[0],p=h[1],O=a.a.useState(""),m=Object(o.a)(O,2),g=m[0],T=m[1],x=n.queryResult,v=n.querySubmission;v.queryString.toLowerCase().includes("optional")&&function(e){for(var t=new Map,r=function(r){Object.keys(e[r]).forEach((function(n){var a=e[r][n];"Literal"===a.termType&&!0===a.include&&a.datatype&&t.set(n,a)}))},n=0;n<e.length;n++)r(n);for(var a=function(r){t.forEach((function(t,n){e[r].hasOwnProperty(n)||(e[r][n]={termType:t.termType,datatype:t.datatype,language:t.language,value:Ee(t),include:!0,insertMode:!0})}))},i=0;i<e.length;i++)a(i)}(x);var y=x.filter((function(e){return Object.values(e).some((function(e){return e.value.toLowerCase().indexOf(b.toLowerCase())>-1}))}));g&&g.length>0&&y.sort((function(e,t){return e[g]&&t[g]?e[g].value.toLowerCase()===t[g].value.toLowerCase()?0:e[g].value.toLowerCase()<t[g].value.toLowerCase()?-1:1:e[g]?-1:t[g]?1:0}));var E=Math.ceil(y.length/Ne),w=y.slice(l*Ne,(l+1)*Ne);l>E&&u(0);var N={displayed:w.length,filtered:y.length,total:x.length};xe.a.ex="http://example.org/",Object.entries(n.queryObject.prefixes).forEach((function(e){var t=Object(o.a)(e,2),r=t[0],n=t[1];return xe.a[r]=n}));var S=we(y),R=Object(j.jsx)("tr",{children:S.map((function(e){return Object(j.jsx)("th",{children:Object(j.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(j.jsx)("h5",{className:"text-break my-auto mx-1",children:e}),Object(j.jsx)(f.a,{variant:"link",className:e===g?"text-primary":"text-secondary",onClick:function(){return function(e){T(g===e?"":e)}(e)},children:Object(j.jsx)("i",{className:"bi bi-sort-alpha-down"})})]})},e)}))});function A(e,n,a){return e.map((function(e){return n.hasOwnProperty(e)?function(e,n,a){var s="".concat(a,"_").concat(e,"_").concat(n.value);if(!0===n.include){if("Literal"===n.termType){var o="".concat(s,"_").concat(Math.random()),c=w[a];return Object(j.jsx)(ge,{refreshTableCallback:t,isRefreshing:r,sparqlSubmission:v,rowBinding:c,variable:e,insertMode:!!n.insertMode,sparqlView:i},o)}return Object(j.jsx)(Y,{rawUri:n.value,prefixUri:Object(ve.a)(n.value)},s)}return null}(e,n[e],a):Object(j.jsx)("td",{},"".concat(a,"_").concat(e))}))}var C=function(e,t){return e.map((function(e,r){return Object(j.jsx)("tr",{children:A(t,e,r)},r)}))}(w,S);function H(){var e=function(e){var t=we(e),r=[Object(I.a)(t)];e.forEach((function(n,a){r.push(t.map((function(t){var r,n,i=null===(r=e[a][t])||void 0===r?void 0:r.value,s=null===(n=e[a][t])||void 0===n?void 0:n.insertMode;return i&&!s?i:""})))}));var n=new RegExp("[".concat(",","\n]")),a="";return r.forEach((function(e){a+=e.map((function(e){return n.test(e)?'"'.concat(e,'"'):e})).join(",")+"\n"})),a}(y);Object(ye.b)(e,"sparqledit.csv")}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Re,{isDisabled:r,resultNumbers:N,searchString:b,searchChangeCallback:function(e){return p(e.target.value)}}),Object(j.jsxs)(B.a,{hover:!0,size:"sm",responsive:!0,children:[Object(j.jsx)("thead",{children:R}),Object(j.jsx)("tbody",{children:C})]}),Object(j.jsxs)(U.a,{children:[Object(j.jsx)(L.a,{children:Object(j.jsx)(f.a,{variant:"link",className:"link-secondary",onClick:function(){return H()},disabled:r,children:"Save table as CSV"})}),Object(j.jsx)(L.a,{xs:"auto",children:Object(j.jsx)(Ie,{isDisabled:r,numberOfPages:E,page:l,setPage:u})})]})]})}function Re(e){var t=e.isDisabled,r=e.resultNumbers,n=e.searchString,a=e.searchChangeCallback;return Object(j.jsxs)(U.a,{children:[Object(j.jsx)(L.a,{children:n?Object(j.jsxs)("p",{className:"align-middle",children:["Displaying ",Object(j.jsx)("strong",{children:r.displayed}),Object(j.jsxs)("strong",{children:[" / ",r.filtered]})," filtered results ( ",Object(j.jsx)("strong",{children:r.total})," total results )"]}):Object(j.jsxs)("p",{className:"align-middle",children:["Displaying ",Object(j.jsx)("strong",{children:r.displayed}),Object(j.jsxs)("strong",{children:[" / ",r.total]})," total results"]})}),Object(j.jsx)(L.a,{xs:"auto",children:Object(j.jsxs)(p.a,{className:"mb-3",children:[Object(j.jsx)(b.a,{placeholder:"search ...","aria-label":"full-text search","aria-describedby":"search-field",value:n,onChange:a,readOnly:t}),Object(j.jsx)(p.a.Text,{id:"search-field",children:Object(j.jsx)("i",{className:"bi bi-search"})})]})})]})}function Ie(e){var t=e.isDisabled,r=e.numberOfPages,n=e.page,a=e.setPage;if(r<=1)return null;return Object(j.jsx)(W.a,{className:"justify-content-end",children:function(e){return Object(I.a)(Array(e).keys()).filter((function(t){return function(t){return 0===t||Math.abs(t-n)<=3||t+1===e||e<10}(t)})).map((function(e){return Object(j.jsx)(W.a.Item,{onClick:function(){return a(e)},active:e===n,disabled:t,children:e+1},e)}))}(r)})}function Ae(e){var t=e.sparqlResult&&e.sparqlResult.queryResult&&e.sparqlResult.queryResult.length>=1;return Object(j.jsx)("section",{children:t?Object(j.jsx)(Se,Object(H.a)({},e)):Object(j.jsx)("p",{children:"No results to display"})})}function Ce(e){var t=e.error,r=e.isDismissible,n=void 0===r||r,i=a.a.useState(!0),s=Object(o.a)(i,2),c=s[0],l=s[1],u=le(t),d=Object(j.jsxs)(ce.a,{variant:"danger",onClose:n?function(){return l(!1)}:null,dismissible:n,children:[Object(j.jsx)(ce.a.Heading,{children:t.name}),Object(j.jsx)("p",{children:t.message}),u.length>0?Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"font-weight-bold mb-1",children:"Possible causes:"}),Object(j.jsx)("ul",{children:u.map((function(e){return Object(j.jsx)("li",{children:e},e)}))})]}):null]});return c?d:null}var Le={loading:!1,error:null,result:null};function Ue(e,t){switch(t.type){case"FETCH_START":return{loading:!0,result:e.result};case"FETCH_FAIL":return{loading:!1,result:null,error:t.error};case"FETCH_SUCCESS":return{result:t.result};default:throw new Error("Invalid reducer action: ".concat(t.type))}}var He=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le,n=a.a.useReducer(Ue,t),i=Object(o.a)(n,2),s=i[0],c=i[1];return a.a.useEffect((function(){function t(){return(t=Object(R.a)(Object(S.a)().mark((function t(){var n,a,i,s;return Object(S.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"FETCH_START"}),t.prev=1,t.next=4,Promise.resolve().then(r.bind(null,98));case 4:return n=t.sent,t.next=7,n.executeSelectOrUpdateQuery(e);case 7:a=t.sent,console.log("QueryResult",a),i=n.buildQueryObject(e.queryString),c({type:"FETCH_SUCCESS",result:new je(e,a,i)}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),s=new ee("The query execution failed.\n".concat(t.t0.name," - ").concat(t.t0.message),e.endpointQuery),c({type:"FETCH_FAIL",error:s});case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[e]),s};function Fe(e){var t=e.sparqlView,r=e.sparqlViewUpdateCallback,n=e.isEditMode,i=void 0===n||n,s=a.a.useState(),c=Object(o.a)(s,2),l=c[0],u=c[1],d=a.a.useState({username:"",password:""}),h=Object(o.a)(d,2),b=h[0],p=h[1],O=He(l),m=O.loading,g=O.result,T=O.error,x=function(){var e=t.updateURL&&t.updateURL.length>1?t.updateURL:t.queryURL;u(new Oe(t.queryURL,e,t.query,b))};var v=Object(j.jsx)(ke,{credentials:b,handleCredentialsInput:function(e,t){var r=Object(H.a)({},b);r[e]=t,p(r)}});return Object(j.jsxs)("section",{children:[i?Object(j.jsx)(M,{sparqlView:t,sparqlViewUpdateCallback:r,isLoading:m,onlyShowSubmitButton:!i,submitQueryCallback:x,credentialsForm:v}):Object(j.jsxs)(k.a,{onSubmit:function(e){e.preventDefault(),x()},children:[t.requiresBasicAuth?Object(j.jsxs)("dl",{className:"row",children:[Object(j.jsx)("dt",{className:"col-sm-2",children:"Authentication"}),Object(j.jsx)("dd",{className:"col-sm-5",children:v}),Object(j.jsx)("dd",{className:"col-sm-2",children:Object(j.jsx)("p",{className:"text-secondary",children:"* required fields"})})]}):null,Object(j.jsx)("div",{className:"mb-4",children:Object(j.jsx)(f.a,{variant:"primary",type:"submit",disabled:m,className:"col-sm-4 px-2",children:m?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"mx-2"})," loading \u2026 "]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"bi bi-send"})," load data table "]})})})]}),T?Object(j.jsx)(Ce,{error:T}):null,Object(j.jsx)(q.a,{in:!!g,mountOnEnter:!0,timeout:500,children:Object(j.jsx)("div",{children:Object(j.jsx)(Ae,{refreshTableCallback:x,isRefreshing:m,sparqlResult:g,sparqlView:t})})})]})}function ke(e){var t=e.credentials,r=e.handleCredentialsInput;return Object(j.jsxs)(U.a,{children:[Object(j.jsx)(L.a,{children:Object(j.jsx)(P.a,{controlId:"formCredentialsUsername",label:"Username *",children:Object(j.jsx)(k.a.Control,{type:"text",placeholder:"username",autoComplete:"username",value:t.username,onChange:function(e){return r("username",e.target.value)},required:!0})})}),Object(j.jsx)(L.a,{children:Object(j.jsx)(P.a,{controlId:"formCredentialsPassword",label:"Password *",children:Object(j.jsx)(k.a.Control,{type:"password",placeholder:"password",autoComplete:"current-password",value:t.password,onChange:function(e){return r("password",e.target.value)},required:!0})})})]})}function Pe(e,t){var r=a.a.useState((function(){return function(e,t){var r=JSON.parse(localStorage.getItem(e));return r||t}(e,t)})),n=Object(o.a)(r,2),i=n[0],s=n[1];return a.a.useEffect((function(){var t=JSON.stringify(i);localStorage.setItem(e,t)}),[e,i]),[i,s]}var qe=r(130),De=r(55),Qe=r(14),Me=r(179),Ve=r(94),Be=Qe.i.quad,We=Qe.i.namedNode,Ge=Qe.i.literal,_e=function(){function e(t,r,n,a,i,s,o,c,l,u){Object(K.a)(this,e),this.id=t,this.name=r,this.description=n,this.creator=a,this.dateCreated=i,this.queryURL=s,this.updateURL=o&&o.length>1?o:s,this.query=c,this.requiresBasicAuth=l,this.updateLogGraph=u}return Object(J.a)(e,[{key:"createRdfQuads",value:function(){var e=new Me.a,t=e.createBlankNode();return e.addQuads([Be(t,We(O.b.rdf+"type"),We(O.b.spedit+"SparqlView")),Be(t,We(O.b.schema+"name"),Ge(this.name)),Be(t,We(O.b.schema+"description"),Ge(this.description)),Be(t,We(O.b.schema+"creator"),Ge(this.creator)),Be(t,We(O.b.schema+"dateCreated"),Ge(this.dateCreated.toISOString(),We(O.b.xsd+"dateTime"))),Be(t,We(O.b.spedit+"queryURL"),Ge(this.queryURL,We(O.b.xsd+"anyURI"))),Be(t,We(O.b.spedit+"updateURL"),Ge(this.updateURL,We(O.b.xsd+"anyURI"))),Be(t,We(O.b.spedit+"query"),Ge(this.query)),Be(t,We(O.b.spedit+"requiresBasicAuth"),Ge(this.requiresBasicAuth,We(O.b.xsd+"boolean")))]),this.updateLogGraph&&e.addQuad(Be(t,We(O.b.spedit+"updateLogGraph"),Ge(this.updateLogGraph,We(O.b.xsd+"anyURI")))),e.getQuads()}},{key:"serializeToTurtle",value:function(){var e=this,t=new Ve.a({prefixes:O.b});return new Promise((function(r,n){t.addQuads(e.createRdfQuads()),t.end((function(e,t){e?n(e):r(t)}))}))}},{key:"serializeToJsonld",value:function(){var e=Object(H.a)({},this);delete e.id,e["@context"]=Object(H.a)(Object(H.a)({},O.b),{},{name:{"@id":"schema:name"},description:{"@id":"schema:description"},creator:{"@id":"schema:creator"},dateCreated:{"@id":"schema:dateCreated","@type":"xsd:dateTime"},queryURL:{"@id":"spedit:queryURL","@type":"xsd:anyURI"},updateURL:{"@id":"spedit:updateURL","@type":"xsd:anyURI"},query:{"@id":"spedit:query"},requiresBasicAuth:{"@id":"spedit:requiresBasicAuth","@type":"xsd:boolean"},updateLogGraph:{"@id":"spedit:updateLogGraph","@type":"xsd:anyURI"}}),e["@type"]="spedit:SparqlView";var t=JSON.stringify(e);return Promise.resolve(t)}}]),e}(),Ye=r(264),ze=r(110),Je="\nPREFIX schema: <http://schema.org/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\nSELECT *\nFROM <http://localhost:7200/repositories/test/graph_1>\nWHERE {\n  ?s ?p ?o .\n  OPTIONAL {  \n    ?s rdfs:label ?label .\n  }\n  OPTIONAL {  \n    ?s schema:name ?name .\n  }\n  OPTIONAL {\n    ?s ?p [\n      rdf:value ?value\n    ] .\n  }\n}".trim(),Ke=function(){function e(){Object(K.a)(this,e)}return Object(J.a)(e,null,[{key:"generateUnsafeUuid",value:function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}},{key:"newBlankSparqlView",value:function(){return new _e(this.generateUnsafeUuid(),"New SPARQL view","This is a new SPARQL view.","unknown user",Date.now(),"","","SELECT *\nWHERE {\n  ?s ?p ?o\n}",!1)}},{key:"newSparqlViewExample",value:function(e){switch(e.toLowerCase().trim()){case"simple":return new _e(this.generateUnsafeUuid(),"Simple S-P-O view","Edit this view or create a new one.\nConnect to a SPARQL endpoint and edit any literal value.","system",Date.now(),"http://localhost:3030/example/query","http://localhost:3030/example/update","SELECT *\nWHERE {\n  ?s ?p ?o\n  FILTER( isLiteral(?o) )\n} LIMIT 25",!1);case"advanced":return new _e(this.generateUnsafeUuid(),"Advanced features example view","This example view shows SPARQL language features which are supported by SPARQL_edit.","system",Date.now(),"http://localhost:7200/repositories/test","http://localhost:7200/repositories/test/statements",Je,!0);default:return this.newBlankSparqlView()}}},{key:"newSparqlViewFromObject",value:function(e){if(e instanceof _e||Object.keys(this.newBlankSparqlView()).filter((function(e){return"updateLogGraph"!==e})).every((function(t){return e.hasOwnProperty(t)})))return new _e(this.generateUnsafeUuid(),e.name,e.description,e.creator,new Date(e.dateCreated),e.queryURL,e.updateURL,e.query,e.requiresBasicAuth,e.updateLogGraph);throw new TypeError("Cannot create a SparqlView instance from this object.")}},{key:"createFrom",value:function(e){if(!e)return this.newBlankSparqlView();if(e instanceof Object)return this.newSparqlViewFromObject(e);if("string"===typeof e)return this.newSparqlViewExample(e);throw new TypeError("Unable to create a SparqlView instance from "+e)}},{key:"createFromRDF",value:function(){var e=Object(R.a)(Object(S.a)().mark((function e(t,r){var n;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.toLowerCase().includes("application/ld+json")){e.next=7;break}return e.next=4,this.parseJsonldToQuads(t);case 4:n=e.sent,e.next=8;break;case 7:n=this.parseN3Family(t);case 8:if(!(n.length<1)){e.next=10;break}throw new se("No RDF quads found.");case 10:return e.abrupt("return",this.createSparqlViewFromRDFQuads(n));case 13:throw e.prev=13,e.t0=e.catch(0),new se("RDF parsing error.\n".concat(e.t0.name," - ").concat(e.t0.message));case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createSparqlViewFromRDFQuads",value:function(e){var t,r,n,a,i,s,o,c,l=Qe.i.namedNode,u=new Me.a;if(u.addQuads(e),u.countQuads(null,l(O.a.rdf+"type"),l(O.a.spedit+"SparqlView"))<1)throw new TypeError("Could not find a SparqlView defintion inside the parsed triples.");var d=u.getSubjects(null,l(O.a.rdf+"type"),l(O.a.spedit+"SparqlView"))[0],h=(null===(t=u.getObjects(d,l(O.a.schema+"name"),null)[0])||void 0===t?void 0:t.value)||"unknown name",b=(null===(r=u.getObjects(d,l(O.a.schema+"description"),null)[0])||void 0===r?void 0:r.value)||"unknown description",p=(null===(n=u.getObjects(d,l(O.a.schema+"creator"),null)[0])||void 0===n?void 0:n.value)||"unknown creator",f=new Date(u.getObjects(d,l(O.a.schema+"dateCreated"),null)[0].value),j=(null===(a=u.getObjects(d,l(O.a.spedit+"queryURL"),null)[0])||void 0===a?void 0:a.value)||"unknown queryURL",m=(null===(i=u.getObjects(d,l(O.a.spedit+"updateURL"),null)[0])||void 0===i?void 0:i.value)||"unknown updateURL",g=(null===(s=u.getObjects(d,l(O.a.spedit+"query"),null)[0])||void 0===s?void 0:s.value)||"unknown query",T="true"==(null===(o=u.getObjects(d,l(O.a.spedit+"requiresBasicAuth"),null)[0])||void 0===o?void 0:o.value.toLowerCase()),x=null===(c=u.getObjects(d,l(O.a.spedit+"updateLogGraph"),null)[0])||void 0===c?void 0:c.value;return new _e(this.generateUnsafeUuid(),h,b,p,f,j,m,g,T,x)}},{key:"parseJsonldToQuads",value:function(e){var t=new Ye.JsonLdParser;return new Promise((function(r,n){var a=[];t.on("data",(function(e){a.push(e)})),t.on("end",(function(){r(a)})),t.on("error",(function(e){console.error(e),n(e)})),t.write(e),t.end()}))}},{key:"parseN3Family",value:function(e){return(new ze.a).parse(e)}},{key:"clone",value:function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)}}]),e}();function Xe(e){var t=e.show,r=e.onHide,n=e.sparqlView,i=Pe("solidContainerUrl",""),s=Object(o.a)(i,2),c=s[0],l=s[1],u=a.a.useReducer(et,Ze),d=Object(o.a)(u,2),h=d[0],p=h.loading,O=h.successObj,m=h.error,g=d[1];function T(e,t){return x.apply(this,arguments)}function x(){return(x=Object(R.a)(Object(S.a)().mark((function e(t,r){var n,a,i,s,o,c,l;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"UPLOAD_START"}),n="application/ld+json",a=Ke.createFrom(t),e.next=5,a.serializeToJsonld();case 5:return i=e.sent,s="sparqledit_".concat(Object(ye.a)(t.name),".jsonld"),e.prev=7,e.next=10,Object(De.saveFileInContainer)(r,new Blob([i],{type:n}),{slug:s,contentType:n,fetch:qe.fetch});case 10:o=e.sent,console.log("File saved at ".concat(Object(De.getSourceUrl)(o)),o),c={savedFile:o,fileUrl:Object(De.getSourceUrl)(o)},g({type:"UPLOAD_SUCCESS",successObj:c}),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(7),console.error(e.t0),l=new ie("The file could not be uploaded to the Solid Pod.\n".concat(e.t0.name," - ").concat(e.t0.message),r),g({type:"UPLOAD_FAIL",error:l});case 21:case"end":return e.stop()}}),e,null,[[7,16]])})))).apply(this,arguments)}function v(){return(v=Object(R.a)(Object(S.a)().mark((function e(t){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("upload"),T(n,c);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)(y.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(y.a.Header,{closeButton:!0,children:Object(j.jsx)(y.a.Title,{id:"contained-modal-title-vcenter",children:"Upload view to a Solid Pod"})}),Object(j.jsxs)(y.a.Body,{children:[Object(j.jsxs)("p",{children:["Please insert the ",Object(j.jsx)("strong",{children:"URL to a Solid container"})," for which you have 'write' permissions:"]}),Object(j.jsxs)(k.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(j.jsx)(b.a,{type:"url",className:"my-2",onChange:function(e){return l(e.target.value)},value:c,placeholder:"https://pod.example.org/private/sparqlviews/",required:!0}),Object(j.jsx)(f.a,{variant:"primary",type:"submit",disabled:p,className:"col-sm-6 mb-4",children:p?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"mx-2"})," loading \u2026 "]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"bi bi-cloud-arrow-up"})," upload to Pod "]})})]}),m&&Object(j.jsx)(Ce,{error:m}),O&&Object(j.jsx)($e,{successObj:O})]})]})}function $e(e){var t=e.successObj,r=a.a.useState(!0),n=Object(o.a)(r,2),i=n[0],s=n[1],c=Object(j.jsxs)(ce.a,{variant:"success",onClose:function(){return s(!1)},dismissible:!0,children:[Object(j.jsx)(ce.a.Heading,{children:"Successfully uploaded!"}),Object(j.jsx)("p",{children:"The SPARQL view has been successfully uploaded to the Solid Pod."}),Object(j.jsx)("p",{children:Object(j.jsx)("a",{href:t.fileUrl,target:"_blank",rel:"noreferrer",className:"text-break",children:t.fileUrl})})]});return i?c:null}var Ze={loading:!1,error:null,successObj:null};function et(e,t){switch(t.type){case"UPLOAD_START":return{loading:!0,successObj:null,error:null};case"UPLOAD_FAIL":return{loading:!1,successObj:null,error:t.error};case"UPLOAD_SUCCESS":return{loading:!1,successObj:t.successObj,error:null};default:throw new Error("Invalid reducer action: ".concat(t.type))}}function tt(e){var t=e.view,r=e.viewUpdateCallback,n=e.cardHandler,i=a.a.useState("view"),s=Object(o.a)(i,2),l=s[0],u=s[1],b=a.a.useState(!1),p=Object(o.a)(b,2),f=p[0],O=p[1],m=Object(c.useSession)().session.info.isLoggedIn;return Object(j.jsxs)(A.a,{className:"shadow",children:[Object(j.jsx)(A.a.Header,{children:Object(j.jsxs)("div",{className:"d-flex pr-2 justify-content-between flex-wrap",children:[Object(j.jsx)("h5",{children:t.name}),Object(j.jsxs)(d.a,{variant:"tabs",activeKey:l,onSelect:function(e){return u(e)},children:[Object(j.jsx)(d.a.Item,{className:"viewCardTab",children:Object(j.jsxs)(d.a.Link,{eventKey:"view",children:[Object(j.jsx)("i",{className:"bi bi-cardTab bi-table"})," View"]})}),Object(j.jsx)(d.a.Item,{className:"viewCardTab",children:Object(j.jsxs)(d.a.Link,{eventKey:"edit",children:[Object(j.jsx)("i",{className:"bi bi-cardTab bi-pencil-square"})," Edit"]})}),Object(j.jsxs)(h.a,{title:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"bi bi-cardTab bi-wrench"})," Manage"]}),id:"nav-dropdown",align:"end",className:"viewCardTab",children:[Object(j.jsxs)(h.a.Item,{onClick:function(){return n.clone(t)},children:[Object(j.jsx)("i",{className:"bi bi-front"})," Duplicate view"]}),Object(j.jsxs)(h.a.Item,{onClick:function(){return n.save(t)},children:[Object(j.jsx)("i",{className:"bi bi-file-earmark-arrow-down"})," Save config file"]}),Object(j.jsxs)(h.a.Item,{onClick:function(){return O(!0)},disabled:!m,title:m?"":"login with Solid to use this feature",style:{pointerEvents:"auto"},children:[Object(j.jsx)("img",{alt:"Solid",src:"solid_bw.svg",height:"20",style:m?{}:{opacity:.33}}),"  Upload to Pod"]}),Object(j.jsx)(h.a.Divider,{}),Object(j.jsxs)(h.a.Item,{className:"text-danger",onClick:function(){return n.delete(t)},children:[Object(j.jsx)("i",{className:"bi bi-trash"})," Delete"]})]})]}),Object(j.jsx)(Xe,{show:f,onHide:function(){return O(!1)},sparqlView:t},Math.random())]})}),Object(j.jsx)(A.a.Body,{children:"edit"===l?Object(j.jsx)(Fe,{sparqlView:t,sparqlViewUpdateCallback:r}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(A.a.Text,{children:t.description}),Object(j.jsxs)("dl",{className:"row",children:[Object(j.jsx)("dt",{className:"col-sm-3",children:"Creator"}),Object(j.jsx)("dd",{className:"col-sm-9",children:t.creator}),Object(j.jsx)("dt",{className:"col-sm-3",children:"Modification date"}),Object(j.jsx)("dd",{className:"col-sm-9",children:new Date(t.dateCreated).toLocaleString()})]}),Object(j.jsx)(Fe,{sparqlView:t,isEditMode:!1})]})})]})}var rt={loading:!1,error:null,file:null};function nt(e,t){switch(t.type){case"FETCH_START":return{loading:!0,file:e.result};case"FETCH_FAIL":return{loading:!1,file:null,error:t.error};case"FETCH_SUCCESS":return{file:t.file};default:throw new Error("Invalid reducer action: ".concat(t.type))}}var at=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt,r=a.a.useReducer(nt,t),n=Object(o.a)(r,2),i=n[0],s=n[1];return a.a.useEffect((function(){function t(){return(t=Object(R.a)(Object(S.a)().mark((function t(){var r,n;return Object(S.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:"FETCH_START"}),t.prev=1,t.next=4,Object(De.getFile)(e,{fetch:qe.fetch});case 4:r=t.sent,console.log("Fetched a ".concat(Object(De.getContentType)(r)," file from ").concat(Object(De.getSourceUrl)(r),".")),console.log("The file is ".concat(Object(De.isRawData)(r)?"not ":"","a dataset.")),s({type:"FETCH_SUCCESS",file:r}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),n=new ie("The file could not be loaded from the Solid Pod.\n".concat(t.t0.name," - ").concat(t.t0.message),e),s({type:"FETCH_FAIL",error:n});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}e&&e.length>0&&function(){t.apply(this,arguments)}()}),[e]),i};function it(e){return st.apply(this,arguments)}function st(){return(st=Object(R.a)(Object(S.a)().mark((function e(t){var r,n,a;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return r=e.sent,n=Object(De.getContentType)(t),e.next=6,Ke.createFromRDF(r,n);case 6:return a=e.sent,console.log(a),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e){var t=e.show,r=e.onHide,n=e.addNewSparqlViews,i=Pe("solidFileUrl",""),s=Object(o.a)(i,2),c=s[0],l=s[1],u=a.a.useState(""),d=Object(o.a)(u,2),h=d[0],p=d[1],O=function(e){var t=at(e),r={loading:t.loading,error:t.error,view:null},n=a.a.useState(r),i=Object(o.a)(n,2),s=i[0],c=i[1];return a.a.useEffect((function(){function e(){return(e=Object(R.a)(Object(S.a)().mark((function e(t){var r;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,it(t);case 3:r=e.sent,c({loading:!1,error:null,view:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({loading:!1,error:e.t0,view:null});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t.file&&function(t){e.apply(this,arguments)}(t.file),c({loading:t.loading,error:t.error,view:null})}),[t]),s}(h),m=O.loading,g=O.error,T=O.view;function x(){return(x=Object(R.a)(Object(S.a)().mark((function e(t){return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),h===c&&p(""),setTimeout((function(){return p(c)}),30);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.useEffect((function(){T&&(n([T]),r())}),[T]),Object(j.jsxs)(y.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(y.a.Header,{closeButton:!0,children:Object(j.jsx)(y.a.Title,{id:"contained-modal-title-vcenter",children:"Load config from Solid Pod"})}),Object(j.jsxs)(y.a.Body,{children:[Object(j.jsxs)("p",{children:["Please insert the ",Object(j.jsx)("strong",{children:'URL to a "SPARQL view" config file'})," on a Solid Pod you have access to:"]}),Object(j.jsxs)(k.a,{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(j.jsx)(b.a,{type:"url",className:"my-2",onChange:function(e){return l(e.target.value)},value:c,placeholder:"https://pod.example.org/private/sparqlviews/view1.ttl",required:!0}),Object(j.jsx)(f.a,{variant:"primary",type:"submit",disabled:m,className:"col-sm-6 mb-4",children:m?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"mx-2"})," loading \u2026 "]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"bi bi-cloud-arrow-down"})," load from Pod "]})})]}),g&&Object(j.jsx)(Ce,{error:g})]})]})}function ct(e){var t=e.show,r=e.onHide,n=e.error;return Object(j.jsxs)(y.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(y.a.Header,{className:"alert-danger",closeButton:!0,children:Object(j.jsx)(y.a.Title,{id:"contained-modal-title-vcenter",children:"Error loading config file"})}),Object(j.jsx)(y.a.Body,{children:n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:n.name}),Object(j.jsx)("p",{children:n.message})]})})]})}function lt(e){var t=e.addNewSparqlViews,r=Object(c.useSession)().session,n=a.a.useState(!1),i=Object(o.a)(n,2),s=i[0],l=i[1],u=a.a.useState(null),d=Object(o.a)(u,2),h=d[0],b=d[1];var p=a.a.useRef();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(z.a,{"aria-label":"Load view configurations",className:"mx-4",children:[Object(j.jsxs)(f.a,{variant:"outline-primary border-1",onClick:function(){var e=Ke.createFrom();r.info.webId&&(e.creator=r.info.webId),t([e])},children:[Object(j.jsx)("i",{className:"bi bi-plus-lg fs-2"}),Object(j.jsx)("p",{className:"text-wrap mb-1 fw-bolder",children:"create blank view"})]}),Object(j.jsxs)(f.a,{variant:"outline-primary border-1",onClick:function(){p.current.value=null,p.current.click()},children:[Object(j.jsx)("i",{className:"bi bi-folder2-open fs-2"}),Object(j.jsx)("p",{className:"text-wrap mb-1 fw-bolder",children:"load config file"}),Object(j.jsx)("input",{type:"file",ref:p,onInput:function(e){return function(e){Array.from(e.target.files).forEach((function(e){console.log(e.name);var r=new FileReader;r.onload=function(){var n=Object(R.a)(Object(S.a)().mark((function n(a){var i,s,o;return Object(S.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.result,n.prev=1,n.next=4,Ke.createFromRDF(i,"application/ld+json");case 4:s=n.sent,console.log(s),t([s]),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),o=new se("Error parsing the JSON-LD config file '".concat(e.name,"': \n").concat(n.t0.name," - ").concat(n.t0.message)),b(o),console.error(o);case 14:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),r.onerror=r.onabort=function(t){return b(new Error("Error reading the file '".concat(e.name,"'\n").concat(t.name," - ").concat(t.message)))},r.readAsText(e)}))}(e)},style:{opacity:0,display:"none"},accept:".json,.jsonld,.txt"})]}),Object(j.jsxs)(f.a,{variant:"outline-primary border-1",onClick:function(){return l(!0)},disabled:!r.info.isLoggedIn,title:r.info.isLoggedIn?"":"login with Solid to use this feature",style:{pointerEvents:"auto"},children:[Object(j.jsx)("i",{className:"bi bi-cloud-arrow-down fs-2"}),Object(j.jsx)("p",{className:"text-wrap mb-1 fw-bolder",children:"load config from Solid Pod"})]})]}),Object(j.jsx)(ot,{show:s,onHide:function(){return l(!1)},addNewSparqlViews:t},Math.random()),Object(j.jsx)(ct,{show:h,onHide:function(){return b(null)},error:h})]})}function ut(){var e,t=Pe("sparqlViews",[Ke.createFrom("simple"),Ke.createFrom("advanced")]),r=Object(o.a)(t,2),n=r[0],i=r[1],s=n.filter((function(e){return!0!==e.deleted})).length,c=(null===(e=n[0])||void 0===e?void 0:e.id)||"",l=a.a.useState(c),u=Object(o.a)(l,2),d=u[0],h=u[1];function b(e){e&&i(Object(I.a)(n))}function p(){return(p=Object(R.a)(Object(S.a)().mark((function e(t){var r,n,a;return Object(S.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ke.createFrom(t),e.next=3,r.serializeToJsonld();case 3:return n=e.sent,e.t0=console,e.next=7,r.serializeToTurtle();case 7:e.t1=e.sent,e.t0.log.call(e.t0,e.t1),a="sparqledit_".concat(Object(ye.a)(r.name),".jsonld"),Object(ye.c)(n,a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a.a.useEffect((function(){n.some((function(e){return e.deleted}))&&i(n.filter((function(e){return!e.deleted})))}),[d]);var f={activate:function(e){h(e)},delete:function(e){i(n.map((function(t){return t.id===e.id&&(t.deleted=!0),t})))},restore:function(e){delete e.deleted,i(Object(I.a)(n)),h(e.id)},clone:function(e){var t=Ke.createFrom(e);t.name+=" (copy)";var r=n.findIndex((function(t){return t.id===e.id}))+1;r>0?n.splice(r,0,t):n.push(t),i(Object(I.a)(n))},save:function(e){return p.apply(this,arguments)}};return Object(j.jsxs)("section",{children:[Object(j.jsx)(U.a,{className:"justify-content-center mb-2",children:Object(j.jsxs)(L.a,{lg:"8",children:[Object(j.jsx)("h3",{className:"text-center",children:1===s?"1 SPARQL view":"".concat(s," SPARQL views")}),Object(j.jsx)("p",{className:"infoText px-2",children:'A "SPARQL view" is a simple configuration object. It defines how to load a table of values from an RDF Knowledge Graph. SPARQL_edit allows you to edit RDF literal values in the query result table.'})]})}),Object(j.jsxs)(C.a,{gap:4,children:[n.map((function(e){return e.deleted?Object(j.jsx)(ht,{view:e,cardHandler:f},e.id):e.id===d?Object(j.jsx)(tt,{view:e,viewUpdateCallback:b,cardHandler:f},e.id):Object(j.jsx)(dt,{view:e,cardHandler:f},e.id)})),Object(j.jsx)(lt,{addNewSparqlViews:function(e){e&&e.length>0&&(i([].concat(Object(I.a)(n),Object(I.a)(e))),h(e[0].id))}},"addControlsKey")]})]})}function dt(e){var t=e.view,r=e.cardHandler;return Object(j.jsxs)(A.a,{onClick:function(){return r.activate(t.id)},className:"shadow-sm mx-4",children:[Object(j.jsx)(A.a.Header,{children:Object(j.jsx)("h5",{children:t.name})}),Object(j.jsx)(A.a.Body,{children:Object(j.jsx)(A.a.Text,{children:t.description})})]},t.id)}function ht(e){var t=e.view,r=e.cardHandler;return Object(j.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(j.jsxs)("span",{children:['View "',t.name,'" deleted.']}),Object(j.jsx)(f.a,{variant:"link",onClick:function(e){return r.restore(t)},children:"Restore this view?"})]})}function bt(){return Object(j.jsx)(w,{children:Object(j.jsx)(ut,{})})}r(406);console.log=function(){},s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(bt,{})}),document.getElementById("root"))},74:function(e,t,r){"use strict";function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return e.replace(/\s+/g,t)}((t=e,t.replace(/[^a-zA-Z0-9\s]/g,""))).substring(0,r)}function a(e,t){s(e,"application/ld+json",t||"sparqledit.jsonld")}function i(e,t){s(e,"text/csv",t||"sparqledit.csv")}function s(e,t,r){var n=new Blob([e],{type:t}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download=r||"sparqledit",document.body.appendChild(a),a.click(),a.remove()}function o(e){var t=-e.getTimezoneOffset(),r=Math.floor(Math.abs(t)/60),n=Math.abs(t)%60,a=t>=0?"+":"-",i=function(e){return("0"+e).slice(-2)};return e.getFullYear()+"-"+i(e.getMonth()+1)+"-"+i(e.getDate())+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())+a+i(r)+":"+i(n)}r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return o}))},98:function(e,t,r){"use strict";r.r(t),r.d(t,"executeSelectOrUpdateQuery",(function(){return b})),r.d(t,"buildCheckQueryForVariable",(function(){return j})),r.d(t,"buildUpdateQueryForVariable",(function(){return m})),r.d(t,"buildUpdateLogQueryForVariable",(function(){return g})),r.d(t,"buildQueryObject",(function(){return T}));var n=r(5),a=r(3),i=r(4),s=r(121),o=r(14),c=r(179),l=r(184),u=r(261),d=r(74),h=r(18);function b(e){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(Object(a.a)().mark((function e(t){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new u.a(t.credentials),"SELECT"!==r.getQueryType(t.queryString)){e.next=6;break}return e.abrupt("return",f(r,t));case 6:return e.abrupt("return",r.submitUpdateQuery(t.endpointUpdate,t.queryString));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(Object(a.a)().mark((function e(t,r){var i,o,c,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=T(r.queryString),o=i.variables[0]instanceof s.Wildcard,c=i.variables.map((function(e){return e.value})),o||(i.variables=[new s.Wildcard]),e.next=6,t.submitQuery(r.endpointQuery,x(i));case 6:return(l=e.sent).forEach((function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var a=Object(n.a)(r[t],2),i=a[0],s=a[1];c.includes(i)||!0===o?s.include=!0:s.include=!1}})),e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){var r=T(e);return x(l.buildUpdateCheckQuery(r,t))}function m(e,t){var r=T(e);return x(l.buildUpdateQuery(r,t))}function g(e,t,r){var n=T(e),a=l.buildUpdateQuery(n,t);return function(e,t){var r=x(e);e.prefixes.rdf=h.a.rdf,e.prefixes.rdfs=h.a.rdfs,e.prefixes.xsd=h.a.xsd,e.prefixes.prov=h.a.prov,e.prefixes.spedit=h.a.spedit;var n={type:"graph",triples:[],name:{termType:"NamedNode",value:t||"http://example.org/graph/updatelog"}},a=o.i.quad,i=o.i.namedNode,s=o.i.literal,l=o.i.variable,u=new c.a,b=u.createBlankNode("updateActivity"),p=u.createBlankNode("updateQuery"),f=Object(d.d)(new Date),O="SPARQLedit_UpdateExecutionTime";u.addQuads([a(b,i(h.a.rdf+"type"),i(h.a.prov+"Activity")),a(b,i(h.a.prov+"used"),p),a(b,i(h.a.prov+"wasAssociatedWith"),i("http://iis.fraunhofer.de/sparqledit/app")),a(b,i(h.a.prov+"startedAtTime"),s(f,i(h.a.xsd+"dateTime"))),a(b,i(h.a.prov+"endedAtTime"),l(O)),a(p,i(h.a.rdf+"type"),i(h.a.prov+"Entity")),a(p,i(h.a.prov+"generatedAtTime"),s(f,i(h.a.xsd+"dateTime"))),a(p,i(h.a.spedit+"updateQuery"),s(r))]),n.triples.push(u.getQuads()),e.updates[0].insert.push(n);var j={type:"bind",variable:{termType:"Variable",value:O},expression:{type:"operation",operator:"now",args:[]}};e.updates[0].where.push(j)}(a,r.updateLogGraph),console.log(a),x(a)}function T(e){return(new s.Parser).parse(e)}function x(e){return(new s.Generator).stringify(e)}}},[[408,1,2]]]);