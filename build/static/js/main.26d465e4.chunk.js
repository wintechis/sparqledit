(this.webpackJsonpsparqledit=this.webpackJsonpsparqledit||[]).push([[0],{140:function(e,t,r){"use strict";r.r(t),r.d(t,"executeSelectOrUpdateQuery",(function(){return b})),r.d(t,"buildUpdateQueryForVariable",(function(){return f})),r.d(t,"buildUpdateLogQueryForVariable",(function(){return m})),r.d(t,"buildQueryObject",(function(){return g}));var n=r(5),a=r(3),i=r(4),s=r(259),o=r(204),c=r(84),l=r(74),u=r(18),d=r(14),h=r(179);function b(e){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(Object(a.a)().mark((function e(t){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new s.a(t.credentials),"SELECT"!==r.getQueryType(t.queryString)){e.next=6;break}return e.abrupt("return",j(r,t));case 6:return e.abrupt("return",r.submitUpdateQuery(t.endpointUpdate,t.queryString));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(Object(a.a)().mark((function e(t,r){var i,s,o,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=g(r.queryString),s=i.variables[0]instanceof c.Wildcard,o=i.variables.map((function(e){return e.value})),s||(i.variables=[new c.Wildcard]),e.next=6,t.submitQuery(r.endpointQuery,T(i));case 6:return(l=e.sent).forEach((function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var a=Object(n.a)(r[t],2),i=a[0],c=a[1];o.includes(i)||!0===s?c.include=!0:c.include=!1}})),e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){var r=g(e);return T(Object(o.buildUpdateQueryObject)(r,t))}function m(e,t,r){var n=g(e),a=Object(o.buildUpdateQueryObject)(n,t);return function(e,t){var r=T(e);e.prefixes.rdf=u.a.rdf,e.prefixes.rdfs=u.a.rdfs,e.prefixes.xsd=u.a.xsd,e.prefixes.prov=u.a.prov,e.prefixes.spedit=u.a.spedit;var n={type:"graph",triples:[],name:{termType:"NamedNode",value:t||"http://example.org/graph/updatelog"}},a=d.i.quad,i=d.i.namedNode,s=d.i.literal,o=d.i.variable,c=new h.a,b=c.createBlankNode("updateActivity"),p=c.createBlankNode("updateQuery"),j=Object(l.d)(new Date),O="SPARQLedit_UpdateExecutionTime";c.addQuads([a(b,i(u.a.rdf+"type"),i(u.a.prov+"Activity")),a(b,i(u.a.prov+"used"),p),a(b,i(u.a.prov+"wasAssociatedWith"),i("http://iis.fraunhofer.de/sparqledit/app")),a(b,i(u.a.prov+"startedAtTime"),s(j,i(u.a.xsd+"dateTime"))),a(b,i(u.a.prov+"endedAtTime"),o(O)),a(p,i(u.a.rdf+"type"),i(u.a.prov+"Entity")),a(p,i(u.a.prov+"generatedAtTime"),s(j,i(u.a.xsd+"dateTime"))),a(p,i(u.a.spedit+"updateQuery"),s(r))]),n.triples.push(c.getQuads()),e.updates[0].insert.push(n);var f={type:"bind",variable:{termType:"Variable",value:O},expression:{type:"operation",operator:"now",args:[]}};e.updates[0].where.push(f)}(a,r.updateLogGraph),console.log(a),T(a)}function g(e){return(new c.Parser).parse(e)}function T(e){return(new c.Generator).stringify(e)}},18:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var n={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",schema:"http://schema.org/",foaf:"http://xmlns.com/foaf/0.1/",vcard:"http://www.w3.org/2006/vcard/ns#",prov:"http://www.w3.org/ns/prov#",spedit:"http://iis.fraunhofer.de/sparqledit/ontology#"},a={rdf:n.rdf,schema:n.schema,xsd:n.xsd,spedit:n.spedit}},204:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildUpdateQueryObject=void 0;var n=r(376);Object.defineProperty(t,"buildUpdateQueryObject",{enumerable:!0,get:function(){return n.buildUpdateQueryObject}})},259:function(e,t,r){"use strict";(function(e){var n=r(3),a=r(4),i=r(10),s=r(9),o=r(203),c=function(){function t(r){Object(i.a)(this,t),this.sparqlFetcher=r?new o.SparqlEndpointFetcher({fetch:function(t,n){var a="Basic "+e.from(r.username+":"+r.password,"utf8").toString("base64");return n.headers instanceof Headers?n.headers.set("Authorization",a):n.headers.Authorization=a,fetch(t,n)}}):new o.SparqlEndpointFetcher}return Object(s.a)(t,[{key:"getQueryType",value:function(e){return this.sparqlFetcher.getQueryType(e)}},{key:"submitQuery",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t,r){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sparqlFetcher.fetchBindings(t,r);case 2:return a=e.sent,e.abrupt("return",new Promise((function(e,t){var r=[];a.on("data",(function(e){r.push(e)})),a.on("end",(function(){e(r)})),a.on("error",(function(e){console.error(e),t(e)}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"submitUpdateQuery",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t,r){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sparqlFetcher.fetchUpdate(t,r);case 2:return e.abrupt("return","SUCCESS");case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),t}();t.a=c}).call(this,r(36).Buffer)},273:function(e,t,r){},311:function(e,t,r){},312:function(e,t,r){},318:function(e,t,r){},319:function(e,t,r){},321:function(e,t,r){},322:function(e,t,r){},323:function(e,t,r){},337:function(e,t){},339:function(e,t){},362:function(e,t){},364:function(e,t){},376:function(e,t,r){"use strict";var n=r(35).default;function a(e,t){e.forEach((function(e){e.subject=function(e,t){if(u(e))for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var i=a[n];if(r===i){var s=t[i];if("NamedNode"==s.termType)return s}}if(d(e))return o(e.value);return e}(e.subject,t),e.predicate=i(e.predicate,t),e.object=function(e,t){if(u(e))for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var i=a[n];if(r===i){var s=t[i];if("NamedNode"==s.termType||"Literal"===s.termType&&!s.insertMode)return s}}if(d(e))return o(e.value);return e}(e.object,t)}))}function i(e,t){if(!e.hasOwnProperty("pathType")&&u(e))for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var i=a[n];if(r===i){var s=t[i];if("NamedNode"==s.termType)return s}}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildUpdateQueryObject=void 0,t.buildUpdateQueryObject=function(e,t){var r=JSON.parse(JSON.stringify(e));if(void 0===r.where)throw new Error("missing 'WHERE' block");var o=function(e){for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t],a=e[n];if("Literal"===a.termType&&void 0!==a.valueNew)return{name:n,datatype:a.datatype,language:a.language,valueNew:a.valueNew,insertMode:!!a.insertMode}}throw new Error("no edited variable found")}(t),d=function(e,t){if(void 0===e.where)throw new Error("missing 'WHERE' block");var r=e.where.filter(c).flatMap((function(e){return e.triples})),n=e.where.filter(l).flatMap((function(e){return e.patterns})).filter(c).flatMap((function(e){return e.triples})),a=r.concat(n).filter((function(e){return"Variable"===e.object.termType})).find((function(e){return e.object.value===t.name}));if(a)return a;throw new Error("no BGP triple with edited variable found")}(r,o),h=function(e,t){if(void 0===e.where)throw new Error("missing 'WHERE' block");var r,a=null,i=e.where.filter(l),s=n(i);try{for(s.s();!(r=s.n()).done;){var o=r.value.patterns.filter(c).flatMap((function(e){return e.triples}));o.map((function(e){return e.object})).filter(u).some((function(e){return e.value===t.name}))&&(a=o)}}catch(d){s.e(d)}finally{s.f()}return a}(r,o);if(!0!==o.insertMode&&h){var b={type:"bgp",triples:h};r.where.push(b)}return function(e,t){if(void 0===e.where)throw new Error("missing 'WHERE' block");for(var r=e.where.length-1;r>=0;r--){var n=e.where[r];c(n)?a(n.triples,t):e.where.splice(r,1)}}(r,t),function(e,t,r,n,a){var o,l={updateType:"insertdelete",delete:[],insert:[],where:[]},d={type:"update",updates:[l],prefixes:e.prefixes};if(void 0===e.where)throw new Error("missing 'WHERE' block");if(l.where=e.where.filter(c),!0===t.insertMode){if(!n)throw new Error("did not find edited optional triples required for insert mode");var h=function(e,t,r){var n=JSON.parse(JSON.stringify(t));return n.forEach((function(t){var n=t.object;if(u(n)&&n.value===r.name){var a=s.literal(r.valueNew,r.language?r.language:r.datatype);t.object=a}t.subject=function(e,t){if(u(e)){for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var i=a[n];if(r===i){var o=t[i];if("NamedNode"==o.termType)return o}}if(u(e))return s.blankNode(e.value)}return e}(t.subject,e),t.predicate=i(t.predicate,e),t.object=function(e,t){if(u(e)){for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var i=a[n];if(r===i){var o=t[i];if("NamedNode"==o.termType||"Literal"===o.termType&&!o.insertMode)return o}}if(u(e))return s.blankNode(e.value)}return e}(t.object,e)})),{type:"bgp",triples:n}}(r,n,t);l.insert?l.insert.push(h):l.insert=[h]}else{var b=function(e,t){var r={type:"bgp",triples:[e]};return r}(a),p=function(e,t){var r=JSON.parse(JSON.stringify(e)),n=s.literal(t.valueNew,t.language?t.language:t.datatype);return r.object=n,{type:"bgp",triples:[r]}}(a,t);l.delete?l.delete.push(b):l.delete=[b],l.insert?l.insert.push(p):l.insert=[p]}(null===(o=null===e||void 0===e?void 0:e.from)||void 0===o?void 0:o.default[0])&&(l.graph=e.from.default[0]);return d}(r,o,t,h,d)};var s=new(r(377).DataFactory);function o(e){return s.variable?s.variable(e):{termType:"Variable",value:e}}function c(e){return"bgp"===e.type}function l(e){return"optional"===e.type}function u(e){return"Variable"===e.termType}function d(e){return"BlankNode"===e.termType}},400:function(e,t,r){},402:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),i=r(48),s=r.n(i),o=(r(273),r(274),r(5)),c=r(37),l=r(172),u=r(205),d=r(88),h=(r(311),r(44)),b=r(64),p=r(134),j=r(25),O=(r(312),r(18)),f=r(0);function m(e){var t=e.webId,r=O.a.vcard+"hasPhoto",n=[O.a.vcard+"fn",O.a.foaf+"name"],a=O.a.vcard+"organization-name";return Object(f.jsx)(c.CombinedDataProvider,{datasetUrl:t,thingUrl:t,loadingComponent:g,children:Object(f.jsxs)("div",{className:"d-flex align-items-center",children:[Object(f.jsx)("div",{className:"image-placeholder",children:Object(f.jsx)(c.Image,{property:r,width:50,className:"image-profile",loadingComponent:null})}),Object(f.jsxs)("div",{className:"mx-3",children:[Object(f.jsx)("h5",{className:"my-0",children:Object(f.jsx)(c.Text,{properties:n,errorComponent:"Unknown user"})}),Object(f.jsx)("small",{children:Object(f.jsx)(c.Text,{property:a,errorComponent:"-"})})]})]})})}function g(){return Object(f.jsxs)("div",{className:"d-flex align-items-center",children:[Object(f.jsx)("div",{className:"image-placeholder"}),Object(f.jsxs)("div",{className:"mx-3",children:[Object(f.jsx)("h5",{className:"my-0",children:"Username"}),Object(f.jsx)("small",{children:"Organization"})]})]})}function T(e){var t=e.webId;return Object(f.jsxs)(h.a,{id:"nav-dropdown-solid",drop:"down",align:"end",className:"no-padding-in-children",title:Object(f.jsx)("div",{style:{display:"inline-block",verticalAlign:"middle"},children:Object(f.jsx)(m,{webId:t})}),children:[Object(f.jsxs)(h.a.Item,{onClick:function(){return window.open(t,"_blank")},children:[Object(f.jsx)("i",{className:"bi bi-person-fill"}),"Open profile"]}),Object(f.jsx)(c.LogoutButton,{onError:function(e){console.error(e),alert(e.message)},children:Object(f.jsxs)(h.a.Item,{children:[Object(f.jsx)("i",{className:"bi bi-door-open-fill"})," Solid logout"]})})]})}function x(){var e={clientName:"SPARQL_edit"},t=a.a.useState("https://localhost:3000"),r=Object(o.a)(t,2),n=r[0],i=r[1],s=a.a.useState("https://idp.example.org"),l=Object(o.a)(s,2),u=l[0],d=l[1];a.a.useEffect((function(){i(window.location.href)}),[i]);var O=function(e){console.error(e),alert(e.message)};return Object(f.jsxs)(h.a,{id:"nav-dropdown-solidlogin",drop:"down",align:"end",className:"no-padding-in-children",title:Object(f.jsxs)("div",{style:{display:"inline-block",verticalAlign:"middle"},children:[Object(f.jsx)("span",{className:"mx-2",children:"Login with"}),Object(f.jsx)("img",{alt:"Solid",src:"solid.svg",height:"45",className:"d-inline-block"})]}),children:[Object(f.jsx)(h.a.Header,{children:"choose your identity provider ..."}),Object(f.jsx)(h.a.Item,{children:Object(f.jsx)(c.LoginButton,{authOptions:e,oidcIssuer:"https://solidcommunity.net",redirectUrl:n,onError:O,children:"solidcommunity.net"})}),Object(f.jsx)(h.a.Item,{children:Object(f.jsx)(c.LoginButton,{authOptions:e,oidcIssuer:"https://inrupt.net",redirectUrl:n,onError:O,children:"inrupt.net"})}),Object(f.jsxs)(p.a,{className:"mt-2 customIDPInputGroup",children:[Object(f.jsx)(b.a,{className:"customIDPFormControl","aria-label":"custom IDP","aria-describedby":"customIDPButton",size:"sm",type:"url",onChange:function(e){return d(e.target.value)},value:u}),Object(f.jsx)(c.LoginButton,{authOptions:e,oidcIssuer:u,redirectUrl:n,onError:O,children:Object(f.jsx)(j.a,{type:"submit",variant:"outline-secondary",id:"customIDPButton",children:Object(f.jsx)("i",{className:"bi bi-play-fill"})})})]})]})}function v(){var e=Object(c.useSession)().session;return Object(f.jsx)(u.a,{bg:"light",variant:"light",className:"mb-4",children:Object(f.jsxs)(l.a,{children:[Object(f.jsxs)(u.a.Brand,{children:[Object(f.jsx)("img",{alt:"SPARQL_edit",src:"logo_cs.png",height:"40",className:"d-inline-block"}),Object(f.jsx)("h2",{className:"d-inline-block align-middle mx-2 my-1",children:"SPARQL_edit"})]}),Object(f.jsx)(d.a,{className:"justify-content-end",children:e.info.isLoggedIn?Object(f.jsx)(T,{webId:e.info.webId}):Object(f.jsx)(x,{})})]})})}var E=r(27);function w(e){var t=e.show,r=e.onHide;return Object(f.jsxs)(E.a,{show:t,fullscreen:"lg-down",onHide:r,size:"lg",children:[Object(f.jsx)(E.a.Header,{closeButton:!0,children:Object(f.jsx)(E.a.Title,{children:"Legal notice / impressum"})}),Object(f.jsxs)(E.a.Body,{children:[Object(f.jsxs)("p",{children:["SPARQL_edit v","0.6.0"]}),Object(f.jsxs)("p",{children:["\xa9 ",Object(f.jsx)("a",{href:"mailto:sascha.meckler@iis.fraunhofer.de",className:"text-secondary",children:"S. Meckler"})," 2022"]}),Object(f.jsx)("p",{children:"This Web application is still in development. No liability is taken for any damage caused by the use of this website."}),Object(f.jsx)("p",{children:"This Web application uses browser cookies and the HTML Web Storage (Local Storage) for storing data that is essential for the correct functioning of this Web application. By using this website, you consent to the use of data storage for technical reasons of function."}),Object(f.jsx)("p",{children:"This Web application uses the following open-source software:"}),Object(f.jsxs)("ul",{children:[Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/facebook/react",children:"facebook/react"}),Object(f.jsx)("p",{children:'MIT License Copyright (c) Facebook, Inc. and its affiliates. Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/react-bootstrap/react-bootstrap",children:"react-bootstrap/react-bootstrap"}),Object(f.jsx)("p",{children:'The MIT License (MIT) Copyright (c) 2014-present Stephen J. Collings, Matthew Honnibal, Pieter Vanderwerff Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/twbs/bootstrap",children:"twbs/bootstrap"}),Object(f.jsx)("p",{children:'The MIT License (MIT) Copyright (c) 2011-2022 Twitter, Inc. Copyright (c) 2011-2022 The Bootstrap Authors Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/twbs/icons",children:"twbs/icons"}),Object(f.jsx)("p",{children:'The MIT License (MIT) Copyright (c) 2019-2021 The Bootstrap Authors Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/RubenVerborgh/SPARQL.js",children:"RubenVerborgh/SPARQL.js"}),Object(f.jsx)("p",{children:'The MIT License (MIT) Copyright \xa92014 Ruben Verborgh Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/rubensworks/fetch-sparql-endpoint.js",children:"rubensworks/fetch-sparql-endpoint.js"}),Object(f.jsx)("p",{children:'The MIT License (MIT) Copyright \xa9 2017 Ruben Taelman Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/rubensworks/jsonld-streaming-parser.js",children:"rubensworks/jsonld-streaming-parser.js"}),Object(f.jsx)("p",{children:'The MIT License (MIT) Copyright \xa9 2018 Ruben Taelman Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/rubensworks/rdf-literal.js",children:"rubensworks/rdf-literal.js"}),Object(f.jsx)("p",{children:'The MIT License (MIT) Copyright \xa9 2019 Ruben Taelman Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/TriplyDB/yasgui",children:"TriplyDB/yasgui"}),Object(f.jsx)("p",{children:'The MIT License (MIT) Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/zazuko/rdf-vocabularies",children:"zazuko/rdf-vocabularies"}),Object(f.jsx)("p",{children:'The MIT License (MIT) Copyright (c) 2019 Zazuko GmbH Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{href:"https://github.com/inrupt/solid-ui-react",children:"inrupt/solid-ui-react"}),Object(f.jsx)("p",{children:'MIT License Copyright (c) 2020 Inrupt Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]})]}),Object(f.jsxs)("p",{children:["This Web application uses the Solid logo which is under the ",Object(f.jsx)("a",{href:"https://creativecommons.org/licenses/by/4.0/",children:"CC-BY 4.0 license"})," and was designed by Guillaume Baudusseau. The Solid logo is used in its original form, but also in a greyscale version with changed colors."]})]})]})}function N(e){var t=e.children;return Object(f.jsx)(c.SessionProvider,{children:Object(f.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[Object(f.jsx)(v,{}),Object(f.jsx)(l.a,{className:"App flex-fill",children:t}),Object(f.jsx)(S,{})]})})}function S(){var e=a.a.useState(!1),t=Object(o.a)(e,2),r=t[0],n=t[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("footer",{className:"footer",children:[Object(f.jsx)("hr",{className:"customSeparatorLine"}),Object(f.jsx)("div",{className:"d-flex justify-content-center mb-1",children:Object(f.jsxs)("span",{className:"text-secondary fw-light mx-2",children:["SPARQL_edit (v","0.6.0",") - ",Object(f.jsx)("a",{className:"text-secondary fw-light",href:"/",onClick:function(e){return e.preventDefault(),e.stopPropagation(),n(!0),!1},children:"legal notice / impressum"})]})})]}),Object(f.jsx)(w,{show:r,onHide:function(){return n(!1)}})]})}var y=r(3),R=r(4),I=r(13),A=(r(318),r(67)),L=r(264),C=r(26),H=r(39),U=r(1),F=r(65),P=r(21),q=r(97),k=r(118),D=(r(319),r(257)),M=r.n(D);r(320);function W(e){var t=e.sparqlView,r=e.sparqlViewUpdateCallback,n=e.isLoading,i=e.submitQueryCallback,s=e.credentialsForm,c=a.a.useState(null),l=Object(o.a)(c,2),u=l[0],d=l[1];function h(){i()}function b(e,n){t[e]=n,t.dateCreated=Date.now(),r(t)}return a.a.useEffect((function(){var e=function(){return h()},r=function(e){return b("query",e.getValue())};if(u)u.query=Object(R.a)(Object(y.a)().mark((function t(){return Object(y.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)}))),u.config.createShareableLink=function(){return window.location.href},u.options.extraKeys["Ctrl-Enter"]=e,u.options.requestConfig.endpoint=t.queryURL,u.on("query",e),u.on("change",r);else{var n={lineNumbers:!0,persistent:null,showQueryButton:!0,tabSize:2,extraKeys:{"Ctrl-Enter":e,"Ctrl-S":null}},a=new M.a(document.getElementById("yasqe"),n);a.query=Object(R.a)(Object(y.a)().mark((function t(){return Object(y.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)}))),a.setValue(t.query),a.options.requestConfig.endpoint=t.queryURL,d(a)}return function(){u&&(u.off("query",e),u.off("change",r))}}),[u,t]),Object(f.jsxs)("section",{className:"mb-4",children:[Object(f.jsxs)(P.a,{className:"mb-1",id:"queryForm",onSubmit:n?null:function(e){return function(e){e.preventDefault(),h()}(e)},children:[Object(f.jsxs)(H.a,{className:"mb-2 mt-3",children:[Object(f.jsx)(C.a,{lg:3,children:Object(f.jsx)("h5",{className:"mb-4",children:"General information"})}),Object(f.jsxs)(C.a,{children:[Object(f.jsxs)(P.a.Group,{as:H.a,className:"mb-3",controlId:"formName",children:[Object(f.jsx)(P.a.Label,{column:!0,sm:3,children:"Name *"}),Object(f.jsx)(C.a,{sm:9,children:Object(f.jsx)(P.a.Control,{type:"text",value:t.name,onChange:function(e){return b("name",e.target.value)},required:!0})})]}),Object(f.jsxs)(P.a.Group,{as:H.a,className:"mb-3",controlId:"formCreator",children:[Object(f.jsx)(P.a.Label,{column:!0,sm:3,children:"Creator"}),Object(f.jsx)(C.a,{sm:9,children:Object(f.jsx)(P.a.Control,{type:"text",value:t.creator,onChange:function(e){return b("creator",e.target.value)}})})]}),Object(f.jsxs)(P.a.Group,{as:H.a,className:"mb-3",controlId:"formDescription",children:[Object(f.jsx)(P.a.Label,{column:!0,sm:3,children:"Description"}),Object(f.jsx)(C.a,{sm:9,children:Object(f.jsx)(P.a.Control,{as:"textarea",rows:3,value:t.description,onChange:function(e){return b("description",e.target.value)}})})]})]}),Object(f.jsx)(C.a,{lg:"2",children:Object(f.jsx)("p",{className:"text-secondary",children:"* required fields"})})]}),Object(f.jsxs)(H.a,{className:"mb-2",children:[Object(f.jsx)(C.a,{lg:3,children:Object(f.jsx)("h5",{className:"mb-4",children:"SPARQL endpoint"})}),Object(f.jsxs)(C.a,{children:[Object(f.jsxs)(P.a.Group,{as:H.a,className:"mb-3",controlId:"formQueryUrl",children:[Object(f.jsx)(P.a.Label,{column:!0,sm:3,children:"Query URL *"}),Object(f.jsx)(C.a,{sm:9,children:Object(f.jsx)(P.a.Control,{type:"text",value:t.queryURL,onChange:function(e){return b("queryURL",e.target.value)},required:!0})})]}),Object(f.jsxs)(P.a.Group,{as:H.a,className:"mb-3",controlId:"formUpdateUrl",children:[Object(f.jsx)(P.a.Label,{column:!0,sm:3,children:"Update URL"}),Object(f.jsxs)(C.a,{sm:9,children:[Object(f.jsx)(P.a.Control,{type:"text",value:t.updateURL,onChange:function(e){return b("updateURL",e.target.value)}}),Object(f.jsx)(P.a.Text,{className:"text-muted px-1",children:"necessary if different URLs for query and update are used"})]})]}),Object(f.jsxs)(P.a.Group,{as:H.a,className:"mb-3",controlId:"formBasicAuth",children:[Object(f.jsx)(P.a.Label,{column:!0,sm:3,children:"Basic Auth"}),Object(f.jsxs)(C.a,{sm:9,children:[Object(f.jsx)(P.a.Check,{type:"switch",className:"form-switch-md",size:"lg",id:"formBasicAuthSwitch",checked:t.requiresBasicAuth,onChange:function(e){return b("requiresBasicAuth",e.target.checked)}}),t.requiresBasicAuth?s:null]})]}),Object(f.jsxs)(P.a.Group,{as:H.a,className:"mb-3",controlId:"formUpdateLogGraph",children:[Object(f.jsx)(P.a.Label,{column:!0,sm:3,children:"Update logging"}),Object(f.jsx)(C.a,{sm:9,children:Object(f.jsx)(Q,{sparqlView:t,handleGraphNameChange:function(e){return b("updateLogGraph",e)}})})]})]}),Object(f.jsx)(C.a,{lg:"2"})]})]}),Object(f.jsxs)(H.a,{className:"mb-2",children:[Object(f.jsx)(C.a,{lg:3,children:Object(f.jsx)("h5",{className:"mb-4",children:"SPARQL query"})}),Object(f.jsxs)(C.a,{children:[Object(f.jsx)("div",{id:"yasqe"}),Object(f.jsx)("div",{className:"d-grid gap-2",children:Object(f.jsx)(j.a,{variant:"primary",type:"submit",form:"queryForm",disabled:n,className:"my-2",children:n?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," loading \u2026 "]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("i",{className:"bi bi-send"})," submit query "]})})})]})]})]})}function Q(e){var t=e.sparqlView,r=e.handleGraphNameChange,n=a.a.useState("string"===typeof t.updateLogGraph||!1),i=Object(o.a)(n,2),s=i[0],c=i[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(P.a.Check,{type:"switch",className:"form-switch-md",size:"lg",id:"formUpdateLogGraphSwitch",checked:s,onChange:function(e){!0===e.target.checked?(c(!0),r("")):(c(!1),r(void 0))}}),s&&Object(f.jsx)(q.a,{controlId:"formUpdateLogGraphName",label:"Named Graph for update logs *",children:Object(f.jsx)(P.a.Control,{type:"text",placeholder:"http://example.org/graph/updatelogs",autoComplete:"graph-name",value:t.updateLogGraph,onChange:function(e){return r(e.target.value)},required:!0})})]})}r(321);var B=r(261),V=r(206),G=(r(322),r(263)),Y=r(258);function _(e){var t=e.rawUri,r=e.prefixUri,n=Object(f.jsx)("span",{children:t});if(r&&r.indexOf(":")>0){var a=r.indexOf(":"),i=r.substring(0,a),s=r.substring(a+1,r.length);n=Object(f.jsxs)("span",{children:[i,":",Object(f.jsx)("strong",{children:s})]})}return Object(f.jsx)("td",{className:"text-break px-2 align-middle",children:Object(f.jsx)(G.a,{placement:"bottom",delay:{show:400,hide:800},overlay:Object(f.jsx)(Y.a,{className:"tooltip-light text-nowrap",children:Object(f.jsx)("div",{className:"m-1",children:Object(f.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:t})})}),children:n})})}var z=r(177);function J(e){var t=e.handleLiteralUpdate,r=e.handleInputReset,n=e.openModal,a=e.inputCellState,i=a.buildingError||a.updateError;return Object(f.jsxs)(z.a,{"aria-label":"update controls",className:"mt-1",children:[Object(f.jsx)(j.a,{variant:"success",type:"submit",alt:"update",onClick:function(e){return t(e)},disabled:a.isExecutingQuery||a.buildingError,children:a.isExecutingQuery?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," saving \u2026"]}):Object(f.jsxs)("span",{children:[Object(f.jsx)("i",{className:"bi bi-pencil-square"})," save "]})}),Object(f.jsxs)(j.a,{variant:"secondary",type:"reset",onClick:function(e){return r(e)},disabled:a.isExecutingQuery,children:[Object(f.jsx)("i",{className:"bi bi-arrow-counterclockwise"})," reset"]}),i?Object(f.jsxs)(j.a,{variant:"danger",onClick:function(){return n()},disabled:a.isExecutingQuery,children:[Object(f.jsx)("i",{className:"bi bi-x-square"})," error"]}):Object(f.jsxs)(j.a,{variant:"primary",onClick:function(){return n()},disabled:a.isExecutingQuery,children:[Object(f.jsx)("i",{className:"bi bi-info-square"})," info"]})]})}r(323);var K=r(87),X=r(9),$=r(10),Z=r(16),ee=r(17),te=r(61),re=function(e){Object(Z.a)(r,e);var t=Object(ee.a)(r);function r(e,n){var a;return Object($.a)(this,r),(a=t.call(this,e)).name="QueryError",a.endpointQuery=n,a}return Object(X.a)(r)}(Object(te.a)(Error)),ne=function(e){Object(Z.a)(r,e);var t=Object(ee.a)(r);function r(e,n){var a;return Object($.a)(this,r),(a=t.call(this,e)).name="UpdateError",a.endpointUpdate=n,a}return Object(X.a)(r)}(Object(te.a)(Error)),ae=function(e){Object(Z.a)(r,e);var t=Object(ee.a)(r);function r(e){var n;return Object($.a)(this,r),(n=t.call(this,e)).name="BuildingError",n}return Object(X.a)(r)}(Object(te.a)(Error)),ie=function(e){Object(Z.a)(r,e);var t=Object(ee.a)(r);function r(e,n){var a;return Object($.a)(this,r),(a=t.call(this,e)).name="SolidError",a.fileURL=n,a}return Object(X.a)(r)}(Object(te.a)(Error)),se=function(e){Object(Z.a)(r,e);var t=Object(ee.a)(r);function r(e){var n;return Object($.a)(this,r),(n=t.call(this,e)).name="RDFProcessingError",n}return Object(X.a)(r)}(Object(te.a)(Error));function oe(e){var t=[];if(e instanceof re){if(e.message.includes("404")&&t.push("Wrong SPARQL endpoint URL"),e.message.includes("401")&&t.push("The SPARQL endpoint requires authentication (e.g. username/password)"),e.message.toLowerCase().includes("failed to fetch")||e.message.toLowerCase().includes("networkerror")){if(e.endpointQuery&&e.endpointQuery.length>1){var r=/^http:\/\/localhost[:/]/gi.test(e.endpointQuery),n=e.endpointQuery.toLowerCase().startsWith("http://"),a=window.location.href.startsWith("https://");!r&&n&&a&&t.push("Unencrypted HTTP requests from HTTPS websites are blocked by the browser")}t.push("The SPARQL server does not support CORS requests"),t.push("The SPARQL endpoint requires authentication (e.g. username/password)"),t.push("Wrong SPARQL endpoint URL")}e.message.toLowerCase().includes("unknown sparql results content type")&&t.push("The given URL is not a valid SPARQL endpoint"),e.message.toLowerCase().includes("parse error")&&(t.push("The submitted SPARQL query contains a syntax/grammar error. Please check if there is a red hint in the query box."),t.push("A grammar mistake in the SPARQL query"))}return e instanceof ne&&(e.message.includes("404")&&t.push("Wrong SPARQL update endpoint URL"),(e.message.includes("415")||e.message.includes("405"))&&t.push("The given update URL is not a valid SPARQL update endpoint"),(e.message.includes("401")||e.message.toLowerCase().includes("failed to fetch"))&&(t.push("Wrong SPARQL update endpoint URL"),t.push("The SPARQL endpoint requires authentication (e.g. username/password)"))),e instanceof ae&&t.push("An unsupported SPARQL language feature was used in the original query"),e instanceof ie&&(e.message.includes("403")&&t.push("You have insufficient rights for this operation on the Solid Pod"),e.message.includes("404")&&t.push("The is no file/container with the given URL on the Solid Pod")),t}var ce=4,le=12;function ue(e){var t=e.show,r=e.onHide,n=e.inputCellState,a=n.buildingError||n.updateError,i=ce;if(n.updateQuery){var s=n.updateQuery.split(/\r\n|\r|\n/).length;i=Math.max(ce,Math.min(s+1,le))}return Object(f.jsxs)(E.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(f.jsx)(E.a.Header,{className:a?"alert-danger":"",closeButton:!0,children:Object(f.jsxs)(E.a.Title,{id:"contained-modal-title-vcenter",children:["SPARQL update ",a?"error":"information"]})}),Object(f.jsxs)(E.a.Body,{className:a?"alert-danger":"",children:[n.updateQuery?Object(f.jsx)(P.a,{children:Object(f.jsxs)(P.a.Group,{className:"mb-3",controlId:"formSparqlUpdateQuery",children:[Object(f.jsx)(P.a.Label,{children:"Auto-generated update query"}),Object(f.jsx)(P.a.Control,{as:"textarea",rows:i,defaultValue:n.updateQuery,className:"white-readonly",readOnly:!0})]})}):null,n.buildingError?Object(f.jsx)(de,{errorTitle:"Update query generation error",errorObject:n.buildingError}):null,n.updateError?Object(f.jsx)(de,{errorTitle:"Update execution error",errorObject:n.updateError}):null]})]})}function de(e){var t=e.errorTitle,r=e.errorObject,n=oe(r);return Object(f.jsxs)(K.a,{variant:"light",children:[Object(f.jsx)("h4",{children:t}),Object(f.jsx)("p",{children:"".concat(r.name," - ").concat(r.message)}),n.length>0?Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"font-weight-bold mb-1",children:"Possible causes:"}),Object(f.jsx)("ul",{children:n.map((function(e){return Object(f.jsx)("li",{children:e},e)}))})]}):null]})}function he(e,t){switch(t.type){case"INPUTCELL_CHANGE":var r={origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue};if(t.currentCellValue!=e.origCellValue){r.currentCellValue=t.currentCellValue;try{r.updateQuery=t.buildUpdateQuery()}catch(o){var n=new ae("The update query building algorithm failed.\n".concat(o.name," - ").concat(o.message));r.updateQuery=null,r.buildingError=n}}return r;case"INPUTCELL_INSERT_INIT":var a={origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.origCellValue};try{a.updateQuery=t.buildUpdateQuery()}catch(o){var i=new ae("The update query building algorithm failed.\n".concat(o.name," - ").concat(o.message));a.updateQuery=null,a.buildingError=i}return a;case"INPUTCELL_RESET":return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue};case"INPUTCELL_UPDATE_START":return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.currentCellValue,updateQuery:e.updateQuery,isExecutingQuery:!0};case"INPUTCELL_UPDATE_SUCCESS":return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.currentCellValue,updateResult:t.result,isExecutingQuery:!1};case"INPUTCELL_UPDATE_FAIL":var s=new ne("The update query failed.\n".concat(t.error.name," - ").concat(t.error.message),e.origSparqlSubmission.endpointUpdate);return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.currentCellValue,updateQuery:e.updateQuery,updateError:s,isExecutingQuery:!1};default:throw new Error("Invalid reducer action: ".concat(t.type))}}var be=r(178);var pe=Object(X.a)((function e(t,r,n,a){Object($.a)(this,e),this.endpointQuery=t,this.endpointUpdate=r,this.queryString=n,this.credentials=a})),je=Object(X.a)((function e(t,r,n){Object($.a)(this,e),this.querySubmission=t,this.queryResult=r,this.queryObject=n})),Oe=r(140);function fe(e){var t=e.refreshTableCallback,r=e.isRefreshing,n=e.sparqlSubmission,i=e.rowBinding,s=e.variable,c=e.insertMode,l=void 0!==c&&c,u=e.sparqlView,d=a.a.useState(!1),h=Object(o.a)(d,2),b=h[0],p=h[1];return l?Object(f.jsxs)("td",{className:"align-middle",children:[!b&&Object(f.jsx)(j.a,{variant:"link",className:"text-secondary",onClick:function(){return p(!0)},disabled:r,children:Object(f.jsx)("small",{children:"insert missing value"})}),b&&Object(f.jsx)(me,{refreshTableCallback:t,isRefreshing:r,sparqlSubmission:n,rowBinding:i,variable:s,insertMode:!0,insertModeReset:function(){return p(!1)},sparqlView:u})]}):Object(f.jsx)("td",{className:"align-middle",children:Object(f.jsx)(me,{refreshTableCallback:t,isRefreshing:r,sparqlSubmission:n,rowBinding:i,variable:s,insertMode:l,sparqlView:u})})}function me(e){var t=e.refreshTableCallback,r=e.isRefreshing,n=e.sparqlSubmission,i=e.rowBinding,s=e.variable,c=e.insertMode,l=e.insertModeReset,u=e.sparqlView,d=a.a.useState(!1),h=Object(o.a)(d,2),b=h[0],p=h[1],j=function(e){var t=function(e){var t,r=null;return(null===(t=e.language)||void 0===t?void 0:t.length)>0?e.language:r}(e),r=e.datatype.value.toLowerCase(),n=Object(be.fromRdf)(e),a="text",i=null,s=null;switch(typeof n){case"string":r.endsWith("#time")&&/(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?$|(24:00:00(\.0+)?))$/.test(n)&&(a="time"),/\r?\n|\r/gm.test(n)&&(a="textarea");break;case"number":isNaN(n)?(s=new Error("Cannot convert '".concat(e.value,"' to a number.")),n=e.value):a="number";break;case"boolean":a="checkbox",n=String(n);break;case"object":if(n instanceof Date)if(r.endsWith("#date"))try{n=n.toISOString().substring(0,10),a="date"}catch(l){s=new Error("Cannot convert '".concat(e.value,"' to xsd:date.")),n=e.value}else if(r.endsWith("#datetime"))try{var o=6e4*n.getTimezoneOffset(),c=new Date(n.getTime()-o);n=c.toISOString().replace("Z",""),a="datetime-local",i=1}catch(l){s=new Error("Cannot convert '".concat(e.value,"' to xsd:dateTime.")),n=e.value}else/#gYear(Month)?$|#gDay$|#gMonth$/gi.test(r)&&(n=e.value)}return{error:s,value:n,inputType:a,inputStep:i,language:t}}(i[s]),O=j.error,m=j.value,g=j.inputType,T=j.inputStep,x=j.language,v=function(e,t){return{origSparqlSubmission:e,origCellValue:t,currentCellValue:null,buildingError:null,updateQuery:null,updateResult:null,updateError:null,isExecutingQuery:!1}}(n,m),E=a.a.useReducer(he,v),w=Object(o.a)(E,2),N=w[0],S=w[1];function I(e){return A.apply(this,arguments)}function A(){return(A=Object(R.a)(Object(y.a)().mark((function e(r){var n;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),N.updateQuery&&!N.isExecutingQuery){e.next=3;break}return e.abrupt("return");case 3:return S({type:"INPUTCELL_UPDATE_START"}),e.prev=4,n=new pe(N.origSparqlSubmission.endpointQuery,N.origSparqlSubmission.endpointUpdate,N.updateQuery,N.origSparqlSubmission.credentials),e.next=8,Object(Oe.executeSelectOrUpdateQuery)(n);case 8:"SUCCESS"===e.sent?t():S({type:"INPUTCELL_UPDATE_FAIL",error:new Error("update result not successful")}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),S({type:"INPUTCELL_UPDATE_FAIL",error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}var L=function(e){var t=String(e.target.value);C(t)},C=function(e){S({type:"INPUTCELL_CHANGE",currentCellValue:e,buildUpdateQuery:function(){var t,r=JSON.parse(JSON.stringify(i));return r[s].valueNew=String(e),(null===(t=u.updateLogGraph)||void 0===t?void 0:t.length)>1?Object(Oe.buildUpdateLogQueryForVariable)(n.queryString,r,u):Object(Oe.buildUpdateQueryForVariable)(n.queryString,r)}})},H=a.a.useRef(null);a.a.useEffect((function(){var e;null!==(e=H.current.dataset)&&void 0!==e&&e.reset&&(H.current.dataset.reset=null,H.current.focus())}),[N]),a.a.useEffect((function(){if(c){S({type:"INPUTCELL_INSERT_INIT",buildUpdateQuery:function(){return i[s].valueNew=String(N.origCellValue),Object(Oe.buildUpdateQueryForVariable)(n.queryString,i,c)}}),H.current.dataset.reset=!0}}),[]);var U=N.isExecutingQuery||r,F=!(!N.updateQuery&&!N.buildingError),q=!(!N.buildingError&&!N.updateError),D=N.currentCellValue||""===N.currentCellValue?N.currentCellValue:N.origCellValue;return Object(f.jsxs)("div",{children:[Object(f.jsxs)(P.a,{onSubmit:function(e){return I(e)},children:[{checkbox:Object(f.jsx)(P.a.Check,{type:"checkbox",onChange:function(e){return function(e){var t=String(e.target.checked);C(t)}(e)},label:D,ref:H,checked:"true"===D,isInvalid:q,readOnly:U}),textarea:Object(f.jsx)(P.a.Control,{as:"textarea",onChange:function(e){return L(e)},ref:H,value:D,lang:x,isInvalid:q,isValid:!!N.updateResult||null,readOnly:U})}[g]||Object(f.jsx)(P.a.Control,{type:g,onChange:function(e){return L(e)},isInvalid:q,ref:H,value:D,lang:x,step:T,isValid:!!N.updateResult||null,readOnly:U}),Object(f.jsx)(k.a,{in:F,mountOnEnter:!0,unmountOnExit:!0,children:Object(f.jsx)("div",{children:Object(f.jsx)(J,{handleLiteralUpdate:I,handleInputReset:function(e){"function"===typeof l&&l(),H.current.dataset.reset=!0,S({type:"INPUTCELL_RESET"})},openModal:function(){return p(!0)},inputCellState:N})})})]}),O&&Object(f.jsxs)("div",{className:"text-warning",title:O.message,children:[Object(f.jsx)("i",{className:"bi bi-exclamation-triangle"}),Object(f.jsx)("small",{children:" RDF datatype incorrect"})]}),Object(f.jsx)(ue,{show:b,onHide:function(){return p(!1)},inputCellState:N})]})}var ge=r(136),Te=r(260),xe=r(74);function ve(e){var t="",r=e.datatype.value.toLowerCase(),n=Object(be.fromRdf)(e);switch(typeof n){case"string":t="";break;case"number":t="0.0";break;case"boolean":t="false";break;case"object":n instanceof Date&&(r.endsWith("#date")?t="1970-01-01":r.endsWith("#datetime")&&(t="1970-01-01T00:00:00"))}return t}function Ee(e){var t=new Set(e.flatMap((function(e){return Object.keys(e).filter((function(t){return!0===e[t].include}))})));return Object(I.a)(t)}var we=10;function Ne(e){var t=e.refreshTableCallback,r=e.isRefreshing,n=e.sparqlResult,i=e.sparqlView,s=a.a.useState(0),c=Object(o.a)(s,2),l=c[0],u=c[1],d=a.a.useState(""),h=Object(o.a)(d,2),b=h[0],p=h[1],O=a.a.useState(""),m=Object(o.a)(O,2),g=m[0],T=m[1],x=n.queryResult,v=n.querySubmission;v.queryString.toLowerCase().includes("optional")&&function(e){for(var t=new Map,r=function(r){Object.keys(e[r]).forEach((function(n){var a=e[r][n];"Literal"===a.termType&&!0===a.include&&a.datatype&&t.set(n,a)}))},n=0;n<e.length;n++)r(n);for(var a=function(r){t.forEach((function(t,n){e[r].hasOwnProperty(n)||(e[r][n]={termType:t.termType,datatype:t.datatype,language:t.language,value:ve(t),include:!0,insertMode:!0})}))},i=0;i<e.length;i++)a(i)}(x);var E=x.filter((function(e){return Object.values(e).some((function(e){return e.value.toLowerCase().indexOf(b.toLowerCase())>-1}))}));g&&g.length>0&&E.sort((function(e,t){return e[g]&&t[g]?e[g].value.toLowerCase()===t[g].value.toLowerCase()?0:e[g].value.toLowerCase()<t[g].value.toLowerCase()?-1:1:e[g]?-1:t[g]?1:0}));var w=Math.ceil(E.length/we),N=E.slice(l*we,(l+1)*we);l>w&&u(0);var S={displayed:N.length,filtered:E.length,total:x.length};ge.a.ex="http://example.org/",Object.entries(n.queryObject.prefixes).forEach((function(e){var t=Object(o.a)(e,2),r=t[0],n=t[1];return ge.a[r]=n}));var y=Ee(E),R=Object(f.jsx)("tr",{children:y.map((function(e){return Object(f.jsx)("th",{children:Object(f.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(f.jsx)("h5",{className:"text-break my-auto mx-1",children:e}),Object(f.jsx)(j.a,{variant:"link",className:e===g?"text-primary":"text-secondary",onClick:function(){return function(e){T(g===e?"":e)}(e)},children:Object(f.jsx)("i",{className:"bi bi-sort-alpha-down"})})]})},e)}))});function A(e,n,a){return e.map((function(e){return n.hasOwnProperty(e)?function(e,n,a){var s="".concat(a,"_").concat(e,"_").concat(n.value);if(!0===n.include){if("Literal"===n.termType){var o="".concat(s,"_").concat(Math.random()),c=N[a];return Object(f.jsx)(fe,{refreshTableCallback:t,isRefreshing:r,sparqlSubmission:v,rowBinding:c,variable:e,insertMode:!!n.insertMode,sparqlView:i},o)}return Object(f.jsx)(_,{rawUri:n.value,prefixUri:Object(Te.a)(n.value)},s)}return null}(e,n[e],a):Object(f.jsx)("td",{},"".concat(a,"_").concat(e))}))}var L=function(e,t){return e.map((function(e,r){return Object(f.jsx)("tr",{children:A(t,e,r)},r)}))}(N,y);function U(){var e=function(e){var t=Ee(e),r=[Object(I.a)(t)];e.forEach((function(n,a){r.push(t.map((function(t){var r,n,i=null===(r=e[a][t])||void 0===r?void 0:r.value,s=null===(n=e[a][t])||void 0===n?void 0:n.insertMode;return i&&!s?i:""})))}));var n=new RegExp("[".concat(",","\n]")),a="";return r.forEach((function(e){a+=e.map((function(e){return n.test(e)?'"'.concat(e,'"'):e})).join(",")+"\n"})),a}(E);Object(xe.b)(e,"sparqledit.csv")}return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Se,{isDisabled:r,resultNumbers:S,searchString:b,searchChangeCallback:function(e){return p(e.target.value)}}),Object(f.jsxs)(B.a,{hover:!0,size:"sm",responsive:!0,children:[Object(f.jsx)("thead",{children:R}),Object(f.jsx)("tbody",{children:L})]}),Object(f.jsxs)(H.a,{children:[Object(f.jsx)(C.a,{children:Object(f.jsx)(j.a,{variant:"link",className:"link-secondary",onClick:function(){return U()},disabled:r,children:"Save table as CSV"})}),Object(f.jsx)(C.a,{xs:"auto",children:Object(f.jsx)(ye,{isDisabled:r,numberOfPages:w,page:l,setPage:u})})]})]})}function Se(e){var t=e.isDisabled,r=e.resultNumbers,n=e.searchString,a=e.searchChangeCallback;return Object(f.jsxs)(H.a,{children:[Object(f.jsx)(C.a,{children:n?Object(f.jsxs)("p",{className:"align-middle",children:["Displaying ",Object(f.jsx)("strong",{children:r.displayed}),Object(f.jsxs)("strong",{children:[" / ",r.filtered]})," filtered results ( ",Object(f.jsx)("strong",{children:r.total})," total results )"]}):Object(f.jsxs)("p",{className:"align-middle",children:["Displaying ",Object(f.jsx)("strong",{children:r.displayed}),Object(f.jsxs)("strong",{children:[" / ",r.total]})," total results"]})}),Object(f.jsx)(C.a,{xs:"auto",children:Object(f.jsxs)(p.a,{className:"mb-3",children:[Object(f.jsx)(b.a,{placeholder:"search ...","aria-label":"full-text search","aria-describedby":"search-field",value:n,onChange:a,readOnly:t}),Object(f.jsx)(p.a.Text,{id:"search-field",children:Object(f.jsx)("i",{className:"bi bi-search"})})]})})]})}function ye(e){var t=e.isDisabled,r=e.numberOfPages,n=e.page,a=e.setPage;if(r<=1)return null;return Object(f.jsx)(V.a,{className:"justify-content-end",children:function(e){return Object(I.a)(Array(e).keys()).filter((function(t){return function(t){return 0===t||Math.abs(t-n)<=3||t+1===e||e<10}(t)})).map((function(e){return Object(f.jsx)(V.a.Item,{onClick:function(){return a(e)},active:e===n,disabled:t,children:e+1},e)}))}(r)})}function Re(e){var t=e.sparqlResult&&e.sparqlResult.queryResult&&e.sparqlResult.queryResult.length>=1;return Object(f.jsx)("section",{children:t?Object(f.jsx)(Ne,Object(U.a)({},e)):Object(f.jsx)("p",{children:"No results to display"})})}function Ie(e){var t=e.error,r=e.isDismissible,n=void 0===r||r,i=a.a.useState(!0),s=Object(o.a)(i,2),c=s[0],l=s[1],u=oe(t),d=Object(f.jsxs)(K.a,{variant:"danger",onClose:n?function(){return l(!1)}:null,dismissible:n,children:[Object(f.jsx)(K.a.Heading,{children:t.name}),Object(f.jsx)("p",{children:t.message}),u.length>0?Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"font-weight-bold mb-1",children:"Possible causes:"}),Object(f.jsx)("ul",{children:u.map((function(e){return Object(f.jsx)("li",{children:e},e)}))})]}):null]});return c?d:null}var Ae={loading:!1,error:null,result:null};function Le(e,t){switch(t.type){case"FETCH_START":return{loading:!0,result:e.result};case"FETCH_FAIL":return{loading:!1,result:null,error:t.error};case"FETCH_SUCCESS":return{result:t.result};default:throw new Error("Invalid reducer action: ".concat(t.type))}}var Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae,n=a.a.useReducer(Le,t),i=Object(o.a)(n,2),s=i[0],c=i[1];return a.a.useEffect((function(){function t(){return(t=Object(R.a)(Object(y.a)().mark((function t(){var n,a,i,s;return Object(y.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"FETCH_START"}),t.prev=1,t.next=4,Promise.resolve().then(r.bind(null,140));case 4:return n=t.sent,t.next=7,n.executeSelectOrUpdateQuery(e);case 7:a=t.sent,console.log("QueryResult",a),i=n.buildQueryObject(e.queryString),c({type:"FETCH_SUCCESS",result:new je(e,a,i)}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),s=new re("The query execution failed.\n".concat(t.t0.name," - ").concat(t.t0.message),e.endpointQuery),c({type:"FETCH_FAIL",error:s});case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[e]),s};function He(e){var t=e.sparqlView,r=e.sparqlViewUpdateCallback,n=e.isEditMode,i=void 0===n||n,s=a.a.useState(),c=Object(o.a)(s,2),l=c[0],u=c[1],d=a.a.useState({username:"",password:""}),h=Object(o.a)(d,2),b=h[0],p=h[1],O=Ce(l),m=O.loading,g=O.result,T=O.error,x=function(){var e=t.updateURL&&t.updateURL.length>1?t.updateURL:t.queryURL;u(new pe(t.queryURL,e,t.query,b))};var v=Object(f.jsx)(Ue,{credentials:b,handleCredentialsInput:function(e,t){var r=Object(U.a)({},b);r[e]=t,p(r)}});return Object(f.jsxs)("section",{children:[i?Object(f.jsx)(W,{sparqlView:t,sparqlViewUpdateCallback:r,isLoading:m,onlyShowSubmitButton:!i,submitQueryCallback:x,credentialsForm:v}):Object(f.jsxs)(P.a,{onSubmit:function(e){e.preventDefault(),x()},children:[t.requiresBasicAuth?Object(f.jsxs)("dl",{className:"row",children:[Object(f.jsx)("dt",{className:"col-sm-2",children:"Authentication"}),Object(f.jsx)("dd",{className:"col-sm-5",children:v}),Object(f.jsx)("dd",{className:"col-sm-2",children:Object(f.jsx)("p",{className:"text-secondary",children:"* required fields"})})]}):null,Object(f.jsx)("div",{className:"mb-4",children:Object(f.jsx)(j.a,{variant:"primary",type:"submit",disabled:m,className:"col-sm-4 px-2",children:m?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"mx-2"})," loading \u2026 "]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("i",{className:"bi bi-send"})," load data table "]})})})]}),T?Object(f.jsx)(Ie,{error:T}):null,Object(f.jsx)(k.a,{in:!!g,mountOnEnter:!0,timeout:500,children:Object(f.jsx)("div",{children:Object(f.jsx)(Re,{refreshTableCallback:x,isRefreshing:m,sparqlResult:g,sparqlView:t})})})]})}function Ue(e){var t=e.credentials,r=e.handleCredentialsInput;return Object(f.jsxs)(H.a,{children:[Object(f.jsx)(C.a,{children:Object(f.jsx)(q.a,{controlId:"formCredentialsUsername",label:"Username *",children:Object(f.jsx)(P.a.Control,{type:"text",placeholder:"username",autoComplete:"username",value:t.username,onChange:function(e){return r("username",e.target.value)},required:!0})})}),Object(f.jsx)(C.a,{children:Object(f.jsx)(q.a,{controlId:"formCredentialsPassword",label:"Password *",children:Object(f.jsx)(P.a.Control,{type:"password",placeholder:"password",autoComplete:"current-password",value:t.password,onChange:function(e){return r("password",e.target.value)},required:!0})})})]})}function Fe(e,t){var r=a.a.useState((function(){return function(e,t){var r=JSON.parse(localStorage.getItem(e));return r||t}(e,t)})),n=Object(o.a)(r,2),i=n[0],s=n[1];return a.a.useEffect((function(){var t=JSON.stringify(i);localStorage.setItem(e,t)}),[e,i]),[i,s]}var Pe=r(128),qe=r(55),ke=r(14),De=r(179),Me=r(95),We=ke.i.quad,Qe=ke.i.namedNode,Be=ke.i.literal,Ve=function(){function e(t,r,n,a,i,s,o,c,l,u){Object($.a)(this,e),this.id=t,this.name=r,this.description=n,this.creator=a,this.dateCreated=i,this.queryURL=s,this.updateURL=o&&o.length>1?o:s,this.query=c,this.requiresBasicAuth=l,this.updateLogGraph=u}return Object(X.a)(e,[{key:"createRdfQuads",value:function(){var e=new De.a,t=e.createBlankNode();return e.addQuads([We(t,Qe(O.b.rdf+"type"),Qe(O.b.spedit+"SparqlView")),We(t,Qe(O.b.schema+"name"),Be(this.name)),We(t,Qe(O.b.schema+"description"),Be(this.description)),We(t,Qe(O.b.schema+"creator"),Be(this.creator)),We(t,Qe(O.b.schema+"dateCreated"),Be(this.dateCreated.toISOString(),Qe(O.b.xsd+"dateTime"))),We(t,Qe(O.b.spedit+"queryURL"),Be(this.queryURL,Qe(O.b.xsd+"anyURI"))),We(t,Qe(O.b.spedit+"updateURL"),Be(this.updateURL,Qe(O.b.xsd+"anyURI"))),We(t,Qe(O.b.spedit+"query"),Be(this.query)),We(t,Qe(O.b.spedit+"requiresBasicAuth"),Be(this.requiresBasicAuth,Qe(O.b.xsd+"boolean")))]),this.updateLogGraph&&e.addQuad(We(t,Qe(O.b.spedit+"updateLogGraph"),Be(this.updateLogGraph,Qe(O.b.xsd+"anyURI")))),e.getQuads()}},{key:"serializeToTurtle",value:function(){var e=this,t=new Me.a({prefixes:O.b});return new Promise((function(r,n){t.addQuads(e.createRdfQuads()),t.end((function(e,t){e?n(e):r(t)}))}))}},{key:"serializeToJsonld",value:function(){var e=Object(U.a)({},this);delete e.id,e["@context"]=Object(U.a)(Object(U.a)({},O.b),{},{name:{"@id":"schema:name"},description:{"@id":"schema:description"},creator:{"@id":"schema:creator"},dateCreated:{"@id":"schema:dateCreated","@type":"xsd:dateTime"},queryURL:{"@id":"spedit:queryURL","@type":"xsd:anyURI"},updateURL:{"@id":"spedit:updateURL","@type":"xsd:anyURI"},query:{"@id":"spedit:query"},requiresBasicAuth:{"@id":"spedit:requiresBasicAuth","@type":"xsd:boolean"},updateLogGraph:{"@id":"spedit:updateLogGraph","@type":"xsd:anyURI"}}),e["@type"]="spedit:SparqlView";var t=JSON.stringify(e);return Promise.resolve(t)}}]),e}(),Ge=r(262),Ye=r(110),_e="\nPREFIX schema: <http://schema.org/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\nSELECT *\nFROM <http://localhost:7200/repositories/test/graph_1>\nWHERE {\n  ?s ?p ?o .\n  OPTIONAL {  \n    ?s rdfs:label ?label .\n  }\n  OPTIONAL {  \n    ?s schema:name ?name .\n  }\n  OPTIONAL {\n    ?s ?p [\n      rdf:value ?value\n    ] .\n  }\n}".trim(),ze=function(){function e(){Object($.a)(this,e)}return Object(X.a)(e,null,[{key:"generateUnsafeUuid",value:function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}},{key:"newBlankSparqlView",value:function(){return new Ve(this.generateUnsafeUuid(),"New SPARQL view","This is a new SPARQL view.","unknown user",Date.now(),"","","SELECT *\nWHERE {\n  ?s ?p ?o\n}",!1)}},{key:"newSparqlViewExample",value:function(e){switch(e.toLowerCase().trim()){case"simple":return new Ve(this.generateUnsafeUuid(),"Simple S-P-O view","Edit this view or create a new one.\nConnect to a SPARQL endpoint and edit any literal value.","system",Date.now(),"http://localhost:3030/example/query","http://localhost:3030/example/update","SELECT *\nWHERE {\n  ?s ?p ?o\n  FILTER( isLiteral(?o) )\n} LIMIT 25",!1);case"advanced":return new Ve(this.generateUnsafeUuid(),"Advanced features example view","This example view shows SPARQL language features which are supported by SPARQL_edit.","system",Date.now(),"http://localhost:7200/repositories/test","http://localhost:7200/repositories/test/statements",_e,!0);default:return this.newBlankSparqlView()}}},{key:"newSparqlViewFromObject",value:function(e){if(e instanceof Ve||Object.keys(this.newBlankSparqlView()).filter((function(e){return"updateLogGraph"!==e})).every((function(t){return e.hasOwnProperty(t)})))return new Ve(this.generateUnsafeUuid(),e.name,e.description,e.creator,new Date(e.dateCreated),e.queryURL,e.updateURL,e.query,e.requiresBasicAuth,e.updateLogGraph);throw new TypeError("Cannot create a SparqlView instance from this object.")}},{key:"createFrom",value:function(e){if(!e)return this.newBlankSparqlView();if(e instanceof Object)return this.newSparqlViewFromObject(e);if("string"===typeof e)return this.newSparqlViewExample(e);throw new TypeError("Unable to create a SparqlView instance from "+e)}},{key:"createFromRDF",value:function(){var e=Object(R.a)(Object(y.a)().mark((function e(t,r){var n;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.toLowerCase().includes("application/ld+json")){e.next=7;break}return e.next=4,this.parseJsonldToQuads(t);case 4:n=e.sent,e.next=8;break;case 7:n=this.parseN3Family(t);case 8:if(!(n.length<1)){e.next=10;break}throw new se("No RDF quads found.");case 10:return e.abrupt("return",this.createSparqlViewFromRDFQuads(n));case 13:throw e.prev=13,e.t0=e.catch(0),new se("RDF parsing error.\n".concat(e.t0.name," - ").concat(e.t0.message));case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createSparqlViewFromRDFQuads",value:function(e){var t,r,n,a,i,s,o,c,l=ke.i.namedNode,u=new De.a;if(u.addQuads(e),u.countQuads(null,l(O.a.rdf+"type"),l(O.a.spedit+"SparqlView"))<1)throw new TypeError("Could not find a SparqlView defintion inside the parsed triples.");var d=u.getSubjects(null,l(O.a.rdf+"type"),l(O.a.spedit+"SparqlView"))[0],h=(null===(t=u.getObjects(d,l(O.a.schema+"name"),null)[0])||void 0===t?void 0:t.value)||"unknown name",b=(null===(r=u.getObjects(d,l(O.a.schema+"description"),null)[0])||void 0===r?void 0:r.value)||"unknown description",p=(null===(n=u.getObjects(d,l(O.a.schema+"creator"),null)[0])||void 0===n?void 0:n.value)||"unknown creator",j=new Date(u.getObjects(d,l(O.a.schema+"dateCreated"),null)[0].value),f=(null===(a=u.getObjects(d,l(O.a.spedit+"queryURL"),null)[0])||void 0===a?void 0:a.value)||"unknown queryURL",m=(null===(i=u.getObjects(d,l(O.a.spedit+"updateURL"),null)[0])||void 0===i?void 0:i.value)||"unknown updateURL",g=(null===(s=u.getObjects(d,l(O.a.spedit+"query"),null)[0])||void 0===s?void 0:s.value)||"unknown query",T="true"==(null===(o=u.getObjects(d,l(O.a.spedit+"requiresBasicAuth"),null)[0])||void 0===o?void 0:o.value.toLowerCase()),x=null===(c=u.getObjects(d,l(O.a.spedit+"updateLogGraph"),null)[0])||void 0===c?void 0:c.value;return new Ve(this.generateUnsafeUuid(),h,b,p,j,f,m,g,T,x)}},{key:"parseJsonldToQuads",value:function(e){var t=new Ge.JsonLdParser;return new Promise((function(r,n){var a=[];t.on("data",(function(e){a.push(e)})),t.on("end",(function(){r(a)})),t.on("error",(function(e){console.error(e),n(e)})),t.write(e),t.end()}))}},{key:"parseN3Family",value:function(e){return(new Ye.a).parse(e)}},{key:"clone",value:function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)}}]),e}();function Je(e){var t=e.show,r=e.onHide,n=e.sparqlView,i=Fe("solidContainerUrl",""),s=Object(o.a)(i,2),c=s[0],l=s[1],u=a.a.useReducer($e,Xe),d=Object(o.a)(u,2),h=d[0],p=h.loading,O=h.successObj,m=h.error,g=d[1];function T(e,t){return x.apply(this,arguments)}function x(){return(x=Object(R.a)(Object(y.a)().mark((function e(t,r){var n,a,i,s,o,c,l;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"UPLOAD_START"}),n="application/ld+json",a=ze.createFrom(t),e.next=5,a.serializeToJsonld();case 5:return i=e.sent,s="sparqledit_".concat(Object(xe.a)(t.name),".jsonld"),e.prev=7,e.next=10,Object(qe.saveFileInContainer)(r,new Blob([i],{type:n}),{slug:s,contentType:n,fetch:Pe.fetch});case 10:o=e.sent,console.log("File saved at ".concat(Object(qe.getSourceUrl)(o)),o),c={savedFile:o,fileUrl:Object(qe.getSourceUrl)(o)},g({type:"UPLOAD_SUCCESS",successObj:c}),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(7),console.error(e.t0),l=new ie("The file could not be uploaded to the Solid Pod.\n".concat(e.t0.name," - ").concat(e.t0.message),r),g({type:"UPLOAD_FAIL",error:l});case 21:case"end":return e.stop()}}),e,null,[[7,16]])})))).apply(this,arguments)}function v(){return(v=Object(R.a)(Object(y.a)().mark((function e(t){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("upload"),T(n,c);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.jsxs)(E.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(f.jsx)(E.a.Header,{closeButton:!0,children:Object(f.jsx)(E.a.Title,{id:"contained-modal-title-vcenter",children:"Upload view to a Solid Pod"})}),Object(f.jsxs)(E.a.Body,{children:[Object(f.jsxs)("p",{children:["Please insert the ",Object(f.jsx)("strong",{children:"URL to a Solid container"})," for which you have 'write' permissions:"]}),Object(f.jsxs)(P.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(f.jsx)(b.a,{type:"url",className:"my-2",onChange:function(e){return l(e.target.value)},value:c,placeholder:"https://pod.example.org/private/sparqlviews/",required:!0}),Object(f.jsx)(j.a,{variant:"primary",type:"submit",disabled:p,className:"col-sm-6 mb-4",children:p?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"mx-2"})," loading \u2026 "]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("i",{className:"bi bi-cloud-arrow-up"})," upload to Pod "]})})]}),m&&Object(f.jsx)(Ie,{error:m}),O&&Object(f.jsx)(Ke,{successObj:O})]})]})}function Ke(e){var t=e.successObj,r=a.a.useState(!0),n=Object(o.a)(r,2),i=n[0],s=n[1],c=Object(f.jsxs)(K.a,{variant:"success",onClose:function(){return s(!1)},dismissible:!0,children:[Object(f.jsx)(K.a.Heading,{children:"Successfully uploaded!"}),Object(f.jsx)("p",{children:"The SPARQL view has been successfully uploaded to the Solid Pod."}),Object(f.jsx)("p",{children:Object(f.jsx)("a",{href:t.fileUrl,target:"_blank",rel:"noreferrer",className:"text-break",children:t.fileUrl})})]});return i?c:null}var Xe={loading:!1,error:null,successObj:null};function $e(e,t){switch(t.type){case"UPLOAD_START":return{loading:!0,successObj:null,error:null};case"UPLOAD_FAIL":return{loading:!1,successObj:null,error:t.error};case"UPLOAD_SUCCESS":return{loading:!1,successObj:t.successObj,error:null};default:throw new Error("Invalid reducer action: ".concat(t.type))}}function Ze(e){var t=e.view,r=e.viewUpdateCallback,n=e.cardHandler,i=a.a.useState("view"),s=Object(o.a)(i,2),l=s[0],u=s[1],b=a.a.useState(!1),p=Object(o.a)(b,2),j=p[0],O=p[1],m=Object(c.useSession)().session.info.isLoggedIn;return Object(f.jsxs)(A.a,{className:"shadow",children:[Object(f.jsx)(A.a.Header,{children:Object(f.jsxs)("div",{className:"d-flex pr-2 justify-content-between flex-wrap",children:[Object(f.jsx)("h5",{children:t.name}),Object(f.jsxs)(d.a,{variant:"tabs",activeKey:l,onSelect:function(e){return u(e)},children:[Object(f.jsx)(d.a.Item,{className:"viewCardTab",children:Object(f.jsxs)(d.a.Link,{eventKey:"view",children:[Object(f.jsx)("i",{className:"bi bi-cardTab bi-table"})," View"]})}),Object(f.jsx)(d.a.Item,{className:"viewCardTab",children:Object(f.jsxs)(d.a.Link,{eventKey:"edit",children:[Object(f.jsx)("i",{className:"bi bi-cardTab bi-pencil-square"})," Edit"]})}),Object(f.jsxs)(h.a,{title:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("i",{className:"bi bi-cardTab bi-wrench"})," Manage"]}),id:"nav-dropdown",align:"end",className:"viewCardTab",children:[Object(f.jsxs)(h.a.Item,{onClick:function(){return n.clone(t)},children:[Object(f.jsx)("i",{className:"bi bi-front"})," Duplicate view"]}),Object(f.jsxs)(h.a.Item,{onClick:function(){return n.save(t)},children:[Object(f.jsx)("i",{className:"bi bi-file-earmark-arrow-down"})," Save config file"]}),Object(f.jsxs)(h.a.Item,{onClick:function(){return O(!0)},disabled:!m,title:m?"":"login with Solid to use this feature",style:{pointerEvents:"auto"},children:[Object(f.jsx)("img",{alt:"Solid",src:"solid_bw.svg",height:"20",style:m?{}:{opacity:.33}}),"  Upload to Pod"]}),Object(f.jsx)(h.a.Divider,{}),Object(f.jsxs)(h.a.Item,{className:"text-danger",onClick:function(){return n.delete(t)},children:[Object(f.jsx)("i",{className:"bi bi-trash"})," Delete"]})]})]}),Object(f.jsx)(Je,{show:j,onHide:function(){return O(!1)},sparqlView:t},Math.random())]})}),Object(f.jsx)(A.a.Body,{children:"edit"===l?Object(f.jsx)(He,{sparqlView:t,sparqlViewUpdateCallback:r}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(A.a.Text,{children:t.description}),Object(f.jsxs)("dl",{className:"row",children:[Object(f.jsx)("dt",{className:"col-sm-2",children:"Creator"}),Object(f.jsx)("dd",{className:"col-sm-10",children:t.creator}),Object(f.jsx)("dt",{className:"col-sm-2",children:"Modification date"}),Object(f.jsx)("dd",{className:"col-sm-10",children:new Date(t.dateCreated).toLocaleString()})]}),Object(f.jsx)(He,{sparqlView:t,isEditMode:!1})]})})]})}var et={loading:!1,error:null,file:null};function tt(e,t){switch(t.type){case"FETCH_START":return{loading:!0,file:e.result};case"FETCH_FAIL":return{loading:!1,file:null,error:t.error};case"FETCH_SUCCESS":return{file:t.file};default:throw new Error("Invalid reducer action: ".concat(t.type))}}var rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et,r=a.a.useReducer(tt,t),n=Object(o.a)(r,2),i=n[0],s=n[1];return a.a.useEffect((function(){function t(){return(t=Object(R.a)(Object(y.a)().mark((function t(){var r,n;return Object(y.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:"FETCH_START"}),t.prev=1,t.next=4,Object(qe.getFile)(e,{fetch:Pe.fetch});case 4:r=t.sent,console.log("Fetched a ".concat(Object(qe.getContentType)(r)," file from ").concat(Object(qe.getSourceUrl)(r),".")),console.log("The file is ".concat(Object(qe.isRawData)(r)?"not ":"","a dataset.")),s({type:"FETCH_SUCCESS",file:r}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),n=new ie("The file could not be loaded from the Solid Pod.\n".concat(t.t0.name," - ").concat(t.t0.message),e),s({type:"FETCH_FAIL",error:n});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}e&&e.length>0&&function(){t.apply(this,arguments)}()}),[e]),i};function nt(e){return at.apply(this,arguments)}function at(){return(at=Object(R.a)(Object(y.a)().mark((function e(t){var r,n,a;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return r=e.sent,n=Object(qe.getContentType)(t),e.next=6,ze.createFromRDF(r,n);case 6:return a=e.sent,console.log(a),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e){var t=e.show,r=e.onHide,n=e.addNewSparqlViews,i=Fe("solidFileUrl",""),s=Object(o.a)(i,2),c=s[0],l=s[1],u=a.a.useState(""),d=Object(o.a)(u,2),h=d[0],p=d[1],O=function(e){var t=rt(e),r={loading:t.loading,error:t.error,view:null},n=a.a.useState(r),i=Object(o.a)(n,2),s=i[0],c=i[1];return a.a.useEffect((function(){function e(){return(e=Object(R.a)(Object(y.a)().mark((function e(t){var r;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nt(t);case 3:r=e.sent,c({loading:!1,error:null,view:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({loading:!1,error:e.t0,view:null});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t.file&&function(t){e.apply(this,arguments)}(t.file),c({loading:t.loading,error:t.error,view:null})}),[t]),s}(h),m=O.loading,g=O.error,T=O.view;function x(){return(x=Object(R.a)(Object(y.a)().mark((function e(t){return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),h===c&&p(""),setTimeout((function(){return p(c)}),30);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.useEffect((function(){T&&(n([T]),r())}),[T]),Object(f.jsxs)(E.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(f.jsx)(E.a.Header,{closeButton:!0,children:Object(f.jsx)(E.a.Title,{id:"contained-modal-title-vcenter",children:"Load config from Solid Pod"})}),Object(f.jsxs)(E.a.Body,{children:[Object(f.jsxs)("p",{children:["Please insert the ",Object(f.jsx)("strong",{children:'URL to a "SPARQL view" config file'})," on a Solid Pod you have access to:"]}),Object(f.jsxs)(P.a,{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(f.jsx)(b.a,{type:"url",className:"my-2",onChange:function(e){return l(e.target.value)},value:c,placeholder:"https://pod.example.org/private/sparqlviews/view1.ttl",required:!0}),Object(f.jsx)(j.a,{variant:"primary",type:"submit",disabled:m,className:"col-sm-6 mb-4",children:m?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"mx-2"})," loading \u2026 "]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("i",{className:"bi bi-cloud-arrow-down"})," load from Pod "]})})]}),g&&Object(f.jsx)(Ie,{error:g})]})]})}function st(e){var t=e.show,r=e.onHide,n=e.error;return Object(f.jsxs)(E.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(f.jsx)(E.a.Header,{className:"alert-danger",closeButton:!0,children:Object(f.jsx)(E.a.Title,{id:"contained-modal-title-vcenter",children:"Error loading config file"})}),Object(f.jsx)(E.a.Body,{children:n&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:n.name}),Object(f.jsx)("p",{children:n.message})]})})]})}function ot(e){var t=e.addNewSparqlViews,r=Object(c.useSession)().session,n=a.a.useState(!1),i=Object(o.a)(n,2),s=i[0],l=i[1],u=a.a.useState(null),d=Object(o.a)(u,2),h=d[0],b=d[1];var p=a.a.useRef();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(z.a,{"aria-label":"Load view configurations",className:"mx-4",children:[Object(f.jsxs)(j.a,{variant:"outline-primary border-1",onClick:function(){var e=ze.createFrom();r.info.webId&&(e.creator=r.info.webId),t([e])},children:[Object(f.jsx)("i",{className:"bi bi-plus-lg fs-2"}),Object(f.jsx)("p",{className:"text-wrap mb-1 fw-bolder",children:"create blank view"})]}),Object(f.jsxs)(j.a,{variant:"outline-primary border-1",onClick:function(){p.current.value=null,p.current.click()},children:[Object(f.jsx)("i",{className:"bi bi-folder2-open fs-2"}),Object(f.jsx)("p",{className:"text-wrap mb-1 fw-bolder",children:"load config file"}),Object(f.jsx)("input",{type:"file",ref:p,onInput:function(e){return function(e){Array.from(e.target.files).forEach((function(e){console.log(e.name);var r=new FileReader;r.onload=function(){var n=Object(R.a)(Object(y.a)().mark((function n(a){var i,s,o;return Object(y.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.result,n.prev=1,n.next=4,ze.createFromRDF(i,"application/ld+json");case 4:s=n.sent,console.log(s),t([s]),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),o=new se("Error parsing the JSON-LD config file '".concat(e.name,"': \n").concat(n.t0.name," - ").concat(n.t0.message)),b(o),console.error(o);case 14:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),r.onerror=r.onabort=function(t){return b(new Error("Error reading the file '".concat(e.name,"'\n").concat(t.name," - ").concat(t.message)))},r.readAsText(e)}))}(e)},style:{opacity:0,display:"none"},accept:".json,.jsonld,.txt"})]}),Object(f.jsxs)(j.a,{variant:"outline-primary border-1",onClick:function(){return l(!0)},disabled:!r.info.isLoggedIn,title:r.info.isLoggedIn?"":"login with Solid to use this feature",style:{pointerEvents:"auto"},children:[Object(f.jsx)("i",{className:"bi bi-cloud-arrow-down fs-2"}),Object(f.jsx)("p",{className:"text-wrap mb-1 fw-bolder",children:"load config from Solid Pod"})]})]}),Object(f.jsx)(it,{show:s,onHide:function(){return l(!1)},addNewSparqlViews:t},Math.random()),Object(f.jsx)(st,{show:h,onHide:function(){return b(null)},error:h})]})}function ct(){var e,t=Fe("sparqlViews",[ze.createFrom("simple"),ze.createFrom("advanced")]),r=Object(o.a)(t,2),n=r[0],i=r[1],s=n.filter((function(e){return!0!==e.deleted})).length,c=(null===(e=n[0])||void 0===e?void 0:e.id)||"",l=a.a.useState(c),u=Object(o.a)(l,2),d=u[0],h=u[1];function b(e){e&&i(Object(I.a)(n))}function p(){return(p=Object(R.a)(Object(y.a)().mark((function e(t){var r,n,a;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ze.createFrom(t),e.next=3,r.serializeToJsonld();case 3:return n=e.sent,e.t0=console,e.next=7,r.serializeToTurtle();case 7:e.t1=e.sent,e.t0.log.call(e.t0,e.t1),a="sparqledit_".concat(Object(xe.a)(r.name),".jsonld"),Object(xe.c)(n,a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a.a.useEffect((function(){n.some((function(e){return e.deleted}))&&i(n.filter((function(e){return!e.deleted})))}),[d]);var j={activate:function(e){h(e)},delete:function(e){i(n.map((function(t){return t.id===e.id&&(t.deleted=!0),t})))},restore:function(e){delete e.deleted,i(Object(I.a)(n)),h(e.id)},clone:function(e){var t=ze.createFrom(e);t.name+=" (copy)";var r=n.findIndex((function(t){return t.id===e.id}))+1;r>0?n.splice(r,0,t):n.push(t),i(Object(I.a)(n))},save:function(e){return p.apply(this,arguments)}};return Object(f.jsxs)("section",{children:[Object(f.jsx)(H.a,{className:"justify-content-center mb-2",children:Object(f.jsxs)(C.a,{lg:"6",children:[Object(f.jsx)("h3",{className:"text-center",children:1===s?"1 SPARQL view":"".concat(s," SPARQL views")}),Object(f.jsx)("p",{className:"infoText px-2",children:'A "SPARQL view" is a simple configuration object. It defines how to load a table of values from a Knowledge Graph. SPARQL_edit allows you to edit literal values in the table.'})]})}),Object(f.jsxs)(L.a,{gap:4,children:[n.map((function(e){return e.deleted?Object(f.jsx)(ut,{view:e,cardHandler:j},e.id):e.id===d?Object(f.jsx)(Ze,{view:e,viewUpdateCallback:b,cardHandler:j},e.id):Object(f.jsx)(lt,{view:e,cardHandler:j},e.id)})),Object(f.jsx)(ot,{addNewSparqlViews:function(e){e&&e.length>0&&(i([].concat(Object(I.a)(n),Object(I.a)(e))),h(e[0].id))}},"addControlsKey")]})]})}function lt(e){var t=e.view,r=e.cardHandler;return Object(f.jsxs)(A.a,{onClick:function(){return r.activate(t.id)},className:"shadow-sm mx-4",children:[Object(f.jsx)(A.a.Header,{children:Object(f.jsx)("h5",{children:t.name})}),Object(f.jsx)(A.a.Body,{children:Object(f.jsx)(A.a.Text,{children:t.description})})]},t.id)}function ut(e){var t=e.view,r=e.cardHandler;return Object(f.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(f.jsxs)("span",{children:['View "',t.name,'" deleted.']}),Object(f.jsx)(j.a,{variant:"link",onClick:function(e){return r.restore(t)},children:"Restore this view?"})]})}function dt(){return Object(f.jsx)(N,{children:Object(f.jsx)(ct,{})})}r(400);console.log=function(){},s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(dt,{})}),document.getElementById("root"))},74:function(e,t,r){"use strict";function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return e.replace(/\s+/g,t)}((t=e,t.replace(/[^a-zA-Z0-9\s]/g,""))).substring(0,r)}function a(e,t){s(e,"application/ld+json",t||"sparqledit.jsonld")}function i(e,t){s(e,"text/csv",t||"sparqledit.csv")}function s(e,t,r){var n=new Blob([e],{type:t}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download=r||"sparqledit",document.body.appendChild(a),a.click(),a.remove()}function o(e){var t=-e.getTimezoneOffset(),r=Math.floor(Math.abs(t)/60),n=Math.abs(t)%60,a=t>=0?"+":"-",i=function(e){return("0"+e).slice(-2)};return e.getFullYear()+"-"+i(e.getMonth()+1)+"-"+i(e.getDate())+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())+a+i(r)+":"+i(n)}r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return o}))}},[[402,1,2]]]);