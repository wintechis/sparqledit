(this.webpackJsonpsparqledit=this.webpackJsonpsparqledit||[]).push([[0],{18:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var n={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",schema:"http://schema.org/",foaf:"http://xmlns.com/foaf/0.1/",vcard:"http://www.w3.org/2006/vcard/ns#",prov:"http://www.w3.org/ns/prov#",spedit:"http://iis.fraunhofer.de/sparqledit/ontology#"},a={rdf:n.rdf,schema:n.schema,xsd:n.xsd,spedit:n.spedit}},184:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildUpdateCheckQuery=t.buildUpdateQuery=void 0;var n=r(337);Object.defineProperty(t,"buildUpdateQuery",{enumerable:!0,get:function(){return n.buildUpdateQuery}}),Object.defineProperty(t,"buildUpdateCheckQuery",{enumerable:!0,get:function(){return n.buildUpdateCheckQuery}})},261:function(e,t,r){"use strict";(function(e){var n=r(3),a=r(4),i=r(10),s=r(9),o=r(262),c=function(){function t(r,n){Object(i.a)(this,t),this.sparqlFetcher=new o.SparqlEndpointFetcher({fetch:function(t,a){if(a.signal=null===n||void 0===n?void 0:n.signal,r){var i="Basic "+e.from(r.username+":"+r.password,"utf8").toString("base64");a.headers instanceof Headers?a.headers.set("Authorization",i):a.headers.Authorization=i}return fetch(t,a)}})}return Object(s.a)(t,[{key:"getQueryType",value:function(e){return this.sparqlFetcher.getQueryType(e)}},{key:"submitQuery",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t,r){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sparqlFetcher.fetchBindings(t,r);case 2:return a=e.sent,e.abrupt("return",new Promise((function(e,t){var r=[];a.on("data",(function(e){r.push(e)})),a.on("end",(function(){e(r)})),a.on("error",(function(e){console.error(e),t(e)}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"submitUpdateQuery",value:function(){var e=Object(a.a)(Object(n.a)().mark((function e(t,r){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sparqlFetcher.fetchUpdate(t,r);case 2:return e.abrupt("return","SUCCESS");case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),t}();t.a=c}).call(this,r(36).Buffer)},276:function(e,t,r){},314:function(e,t,r){},315:function(e,t,r){},321:function(e,t,r){},322:function(e,t,r){},324:function(e,t,r){},325:function(e,t,r){},326:function(e,t,r){},327:function(e,t,r){},337:function(e,t,r){"use strict";var n=r(33).default;Object.defineProperty(t,"__esModule",{value:!0}),t.buildUpdateCheckQuery=t.buildUpdateQuery=void 0;var a=r(338),i=r(342);function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(0,i.isSelectWhereQuery)(e))throw new Error("missing 'WHERE' block");var r=JSON.parse(JSON.stringify(e));return t&&(r.variables=[new a.Wildcard]),r}function o(e){for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t],a=e[n];if("Literal"===a.termType&&void 0!==a.valueNew)return{name:n,datatype:a.datatype,language:a.language,valueNew:a.valueNew,insertMode:!!a.insertMode}}throw new Error("no edited variable found")}function c(e,t){var r=e.where.filter(i.isBgpPattern).flatMap((function(e){return e.triples})),n=e.where.filter(i.isOptionalPattern).flatMap((function(e){return e.patterns})).filter(i.isBgpPattern).flatMap((function(e){return e.triples})),a=r.concat(n).filter((function(e){return"Variable"===e.object.termType})).find((function(e){return e.object.value===t.name}));if(a)return a;throw new Error("no BGP triple with edited variable found")}function l(e,t){var r,a=null,s=e.where.filter(i.isOptionalPattern),o=n(s);try{for(o.s();!(r=o.n()).done;){var c=r.value.patterns.filter(i.isBgpPattern).flatMap((function(e){return e.triples}));c.map((function(e){return e.object})).filter(i.isVariableTerm).some((function(e){return e.value===t.name}))&&(a=c)}}catch(l){o.e(l)}finally{o.f()}return a}function u(e,t){for(var r=e.where.length-1;r>=0;r--){var n=e.where[r];(0,i.isBgpPattern)(n)?d(n.triples,t):e.where.splice(r,1)}}function d(e,t){e.forEach((function(e){e.subject=function(e,t){if((0,i.isVariableTerm)(e))for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(r===s){var o=t[s];if("NamedNode"==o.termType)return o}}if((0,i.isBlankNodeTerm)(e))return(0,i.createRDFVariable)(e.value);return e}(e.subject,t),e.predicate=h(e.predicate,t),e.object=function(e,t){if((0,i.isVariableTerm)(e))for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(r===s){var o=t[s];if("NamedNode"==o.termType||"Literal"===o.termType&&!o.insertMode)return o}}if((0,i.isBlankNodeTerm)(e))return(0,i.createRDFVariable)(e.value);return e}(e.object,t)}))}function h(e,t){if(!(0,i.isPropertyPath)(e)&&(0,i.isVariableTerm)(e))for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(r===s){var o=t[s];if("NamedNode"==o.termType)return o}}return e}t.buildUpdateQuery=function(e,t){var r=s(e),n=o(t),a=c(r,n),d=l(r,n);if(!0!==n.insertMode&&d){var p={type:"bgp",triples:d};r.where.push(p)}return u(r,t),function(e,t,r,n,a){var s,o={updateType:"insertdelete",delete:[],insert:[],where:[]},c={type:"update",updates:[o],prefixes:e.prefixes};if(o.where=e.where.filter(i.isBgpPattern),!0===t.insertMode){if(!n)throw new Error("did not find edited optional triples required for insert mode");var l=function(e,t,r){var n=JSON.parse(JSON.stringify(t));return n.forEach((function(t){var n=t.object;if((0,i.isVariableTerm)(n)&&n.value===r.name){var a=i.factory.literal(r.valueNew,r.language?r.language:r.datatype);t.object=a}t.subject=function(e,t){if((0,i.isVariableTerm)(e)){for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(r===s){var o=t[s];if("NamedNode"==o.termType)return o}}if((0,i.isVariableTerm)(e))return i.factory.blankNode(e.value)}return e}(t.subject,e),t.predicate=h(t.predicate,e),t.object=function(e,t){if((0,i.isVariableTerm)(e)){for(var r=e.value,n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(r===s){var o=t[s];if("NamedNode"==o.termType||"Literal"===o.termType&&!o.insertMode)return o}}if((0,i.isVariableTerm)(e))return i.factory.blankNode(e.value)}return e}(t.object,e)})),{type:"bgp",triples:n}}(r,n,t);o.insert?o.insert.push(l):o.insert=[l]}else{var u=function(e,t){var r={type:"bgp",triples:[e]};return r}(a),d=function(e,t){var r=JSON.parse(JSON.stringify(e)),n=i.factory.literal(t.valueNew,t.language?t.language:t.datatype);return r.object=n,{type:"bgp",triples:[r]}}(a,t);o.delete?o.delete.push(u):o.delete=[u],o.insert?o.insert.push(d):o.insert=[d]}(null===(s=null===e||void 0===e?void 0:e.from)||void 0===s?void 0:s.default[0])&&(o.graph=e.from.default[0]);return c}(r,n,t,d,a)},t.buildUpdateCheckQuery=function(e,t){var r=s(e,!0),n=o(t),a=(c(r,n),l(r,n));if(!0!==n.insertMode&&a){var d={type:"bgp",triples:a};r.where.push(d)}return u(r,t),!1===r.where.filter((function(e){return(0,i.isBgpPattern)(e)})).flatMap((function(e){return e.triples})).some((function(e){return(0,i.isVariableTerm)(e.subject)||(0,i.isVariableTerm)(e.object)}))&&function(e){var t={type:"bind",variable:(0,i.createRDFVariable)("meaninglessVariable"),expression:{type:"operation",operator:"now",args:[]}};e.where.push(t)}(r),r}},342:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBlankNodeTerm=t.isPropertyPath=t.isVariableTerm=t.isOptionalPattern=t.isBgpPattern=t.isSelectWhereQuery=t.createRDFVariable=t.factory=void 0;var n=r(225);t.factory=new n.DataFactory,t.createRDFVariable=function(e){return t.factory.variable?t.factory.variable(e):{termType:"Variable",value:e}},t.isSelectWhereQuery=function(e){return void 0!==e.where},t.isBgpPattern=function(e){return"bgp"===e.type},t.isOptionalPattern=function(e){return"optional"===e.type},t.isVariableTerm=function(e){return"Variable"===e.termType},t.isPropertyPath=function(e){return e.hasOwnProperty("pathType")},t.isBlankNodeTerm=function(e){return"BlankNode"===e.termType}},347:function(e,t){},349:function(e,t){},372:function(e,t){},374:function(e,t){},407:function(e,t,r){},409:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),i=r(48),s=r.n(i),o=(r(276),r(277),r(5)),c=r(37),l=r(172),u=r(204),d=r(64),h=(r(314),r(44)),p=r(67),b=r(136),f=r(25),O=(r(315),r(18)),j=r(0);function m(e){var t=e.webId,r=O.a.vcard+"hasPhoto",n=[O.a.vcard+"fn",O.a.foaf+"name"],a=O.a.vcard+"organization-name";return Object(j.jsx)(c.CombinedDataProvider,{datasetUrl:t,thingUrl:t,loadingComponent:g,children:Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)("div",{className:"image-placeholder",children:Object(j.jsx)(c.Image,{property:r,width:50,className:"image-profile",loadingComponent:null,errorComponent:function(){return Object(j.jsx)(j.Fragment,{})}})}),Object(j.jsxs)("div",{className:"mx-3",children:[Object(j.jsx)("h5",{className:"my-0",children:Object(j.jsx)(c.Text,{properties:n,errorComponent:function(){return Object(j.jsx)("span",{children:"Unknown user"})}})}),Object(j.jsx)("small",{children:Object(j.jsx)(c.Text,{property:a,errorComponent:function(){return Object(j.jsx)("span",{children:"-"})}})})]})]})})}function g(){return Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)("div",{className:"image-placeholder"}),Object(j.jsxs)("div",{className:"mx-3",children:[Object(j.jsx)("h5",{className:"my-0",children:"Username"}),Object(j.jsx)("small",{children:"Organization"})]})]})}function T(e){var t=e.webId;return Object(j.jsxs)(h.a,{id:"nav-dropdown-solid",drop:"down",align:"end",className:"no-padding-in-children",title:Object(j.jsx)("div",{style:{display:"inline-block",verticalAlign:"middle"},children:Object(j.jsx)(m,{webId:t})}),children:[Object(j.jsxs)(h.a.Item,{onClick:function(){return window.open(t,"_blank")},children:[Object(j.jsx)("i",{className:"bi bi-person-fill"}),"Open profile"]}),Object(j.jsx)(c.LogoutButton,{onError:function(e){console.error(e),alert(e.message)},children:Object(j.jsxs)(h.a.Item,{children:[Object(j.jsx)("i",{className:"bi bi-door-open-fill"})," Solid logout"]})})]})}function E(){var e={clientName:"SPARQL_edit"},t=a.a.useState("https://localhost:3000"),r=Object(o.a)(t,2),n=r[0],i=r[1],s=a.a.useState(""),l=Object(o.a)(s,2),u=l[0],d=l[1];a.a.useEffect((function(){i(window.location.href)}),[i]);var O=function(e){console.error(e),alert(e.message)};return Object(j.jsxs)(h.a,{id:"nav-dropdown-solidlogin",drop:"down",align:"end",className:"no-padding-in-children",title:Object(j.jsxs)("div",{style:{display:"inline-block",verticalAlign:"middle"},children:[Object(j.jsx)("span",{className:"mx-2",children:"Login with"}),Object(j.jsx)("img",{alt:"Solid",src:"solid.svg",height:"45",className:"d-inline-block"})]}),children:[Object(j.jsx)(h.a.Header,{children:"choose your identity provider ..."}),Object(j.jsx)(h.a.Item,{children:Object(j.jsx)(c.LoginButton,{authOptions:e,oidcIssuer:"https://solidcommunity.net",redirectUrl:n,onError:O,children:"solidcommunity.net"})}),Object(j.jsx)(h.a.Item,{children:Object(j.jsx)(c.LoginButton,{authOptions:e,oidcIssuer:"https://inrupt.net",redirectUrl:n,onError:O,children:"inrupt.net"})}),Object(j.jsxs)(b.a,{className:"mt-2 customIDPInputGroup",children:[Object(j.jsx)(p.a,{className:"customIDPFormControl","aria-label":"custom IDP","aria-describedby":"customIDPButton",size:"sm",type:"url",onChange:function(e){return d(e.target.value)},value:u,placeholder:"https://idp.example.org"}),Object(j.jsx)(c.LoginButton,{authOptions:e,oidcIssuer:u,redirectUrl:n,onError:O,children:Object(j.jsx)(f.a,{type:"submit",variant:"outline-secondary",id:"customIDPButton",children:Object(j.jsx)("i",{className:"bi bi-play-fill"})})})]})]})}function x(){var e=Object(c.useSession)().session;return Object(j.jsx)(u.a,{bg:"light",variant:"light",className:"mb-4",children:Object(j.jsxs)(l.a,{children:[Object(j.jsxs)(u.a.Brand,{children:[Object(j.jsx)("img",{alt:"SPARQL_edit",src:"logo_cs.png",height:"40",className:"d-inline-block"}),Object(j.jsx)("h2",{className:"d-inline-block align-middle mx-2 my-1",children:"SPARQL_edit"})]}),Object(j.jsx)(d.a,{className:"justify-content-end",children:e.info.isLoggedIn?Object(j.jsx)(T,{webId:e.info.webId}):Object(j.jsx)(E,{})})]})})}var w=r(27);function y(e){var t=e.show,r=e.onHide;return Object(j.jsxs)(w.a,{show:t,fullscreen:"lg-down",onHide:r,size:"lg",children:[Object(j.jsx)(w.a.Header,{closeButton:!0,children:Object(j.jsx)(w.a.Title,{children:"Legal notice / impressum"})}),Object(j.jsxs)(w.a.Body,{children:[Object(j.jsxs)("p",{children:["SPARQL_edit v","0.7.7"]}),Object(j.jsxs)("p",{children:["\xa9 ",Object(j.jsx)("a",{href:"mailto:sascha.meckler@iis.fraunhofer.de",className:"text-secondary",children:"S. Meckler"})," 2023"]}),Object(j.jsx)("p",{children:"This Web application is still in development. No liability is taken for any damage caused by the use of this website."}),Object(j.jsx)("p",{children:"This Web application uses browser cookies and the HTML Web Storage (Local Storage) for storing data that is essential for the correct functioning of this Web application. By using this website, you consent to the use of data storage for technical reasons of function."}),Object(j.jsx)("p",{children:"This Web application uses the following open-source software:"}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/facebook/react",target:"_blank",rel:"noreferrer",children:"facebook/react"}),Object(j.jsx)("p",{className:"small",children:'MIT License Copyright (c) Facebook, Inc. and its affiliates. Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/bvaughn/react-error-boundary",target:"_blank",rel:"noreferrer",children:"bvaughn/react-error-boundary"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright (c) 2020 Brian Vaughn Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/react-bootstrap/react-bootstrap",target:"_blank",rel:"noreferrer",children:"react-bootstrap/react-bootstrap"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright (c) 2014-present Stephen J. Collings, Matthew Honnibal, Pieter Vanderwerff Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/twbs/bootstrap",target:"_blank",rel:"noreferrer",children:"twbs/bootstrap"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright (c) 2011-2022 Twitter, Inc. Copyright (c) 2011-2022 The Bootstrap Authors Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/twbs/icons",target:"_blank",rel:"noreferrer",children:"twbs/icons"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright (c) 2019-2021 The Bootstrap Authors Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/RubenVerborgh/SPARQL.js",target:"_blank",rel:"noreferrer",children:"RubenVerborgh/SPARQL.js"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright \xa92014 Ruben Verborgh Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/rubensworks/fetch-sparql-endpoint.js",target:"_blank",rel:"noreferrer",children:"rubensworks/fetch-sparql-endpoint.js"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright \xa9 2017 Ruben Taelman Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/rubensworks/jsonld-streaming-parser.js",target:"_blank",rel:"noreferrer",children:"rubensworks/jsonld-streaming-parser.js"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright \xa9 2018 Ruben Taelman Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/rubensworks/rdf-literal.js",target:"_blank",rel:"noreferrer",children:"rubensworks/rdf-literal.js"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright \xa9 2019 Ruben Taelman Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/TriplyDB/yasgui",target:"_blank",rel:"noreferrer",children:"TriplyDB/yasgui"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/zazuko/rdf-vocabularies",target:"_blank",rel:"noreferrer",children:"zazuko/rdf-vocabularies"}),Object(j.jsx)("p",{className:"small",children:'The MIT License (MIT) Copyright (c) 2019 Zazuko GmbH Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{href:"https://github.com/inrupt/solid-ui-react",target:"_blank",rel:"noreferrer",children:"inrupt/solid-ui-react"}),Object(j.jsx)("p",{className:"small",children:'MIT License Copyright (c) 2020 Inrupt Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'})]})]}),Object(j.jsxs)("p",{children:["This Web application uses the Solid logo which is under the ",Object(j.jsx)("a",{href:"https://creativecommons.org/licenses/by/4.0/",children:"CC-BY 4.0 license"})," and was designed by Guillaume Baudusseau. The Solid logo is used in its original form, but also in a greyscale version with changed colors."]})]})]})}function v(e){var t=e.children;return Object(j.jsx)(c.SessionProvider,{children:Object(j.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[Object(j.jsx)(x,{}),Object(j.jsx)(l.a,{className:"App flex-fill",children:t}),Object(j.jsx)(N,{})]})})}function N(){var e=a.a.useState(!1),t=Object(o.a)(e,2),r=t[0],n=t[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("footer",{className:"footer",children:[Object(j.jsx)("hr",{className:"customSeparatorLine"}),Object(j.jsx)("div",{className:"d-flex justify-content-center mb-1",children:Object(j.jsxs)("span",{className:"text-secondary fw-light mx-2",children:["SPARQL_edit (v","0.7.7",") - ",Object(j.jsx)("a",{className:"text-secondary fw-light",href:"/",onClick:function(e){return e.preventDefault(),e.stopPropagation(),n(!0),!1},children:"legal notice / impressum"})]})})]}),Object(j.jsx)(y,{show:r,onHide:function(){return n(!1)}})]})}var R=r(3),S=r(4),I=r(13),A=(r(321),r(51)),L=r(267),C=r(26),P=r(39),F=r(1),U=r(258),H=r(68),k=r(21),q=r(96),D=r(118),M=(r(322),r(259)),Q=r.n(M);r(323);function V(e){var t=e.sparqlView,r=e.sparqlViewUpdateCallback,n=e.isLoading,i=e.submitQueryCallback,s=e.credentialsForm,c=a.a.useState(null),l=Object(o.a)(c,2),u=l[0],d=l[1],h=a.a.useState(!1),p=Object(o.a)(h,2),b=p[0],O=p[1];function m(){i()}function g(e,n){t[e]=n,t.dateCreated=Date.now(),r(t)}function T(){u&&(!1===u.queryValid?(O(!0),u.showNotification("invalidQueryNotification","invalid syntax or grammar (SPARQL_edit allows only a subset of SPARQL)")):(O(!1),u.hideNotification("invalidQueryNotification")))}return a.a.useEffect((function(){var e=function(){return m()},r=function(e){g("query",e.getValue()),T()};if(u)u.query=Object(S.a)(Object(R.a)().mark((function t(){return Object(R.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)}))),u.config.createShareableLink=function(){return window.location.href},u.options.extraKeys["Ctrl-Enter"]=e,u.options.requestConfig.endpoint=t.queryURL,u.on("query",e),u.on("change",r);else{var n={lineNumbers:!0,persistent:null,showQueryButton:!0,tabSize:2,extraKeys:{"Ctrl-Enter":e,"Ctrl-S":null}},a=new Q.a(document.getElementById("yasqe"),n);a.query=Object(S.a)(Object(R.a)().mark((function t(){return Object(R.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)}))),a.setValue(t.query),a.options.requestConfig.endpoint=t.queryURL,d(a)}return T(),function(){u&&(u.off("query",e),u.off("change",r))}}),[u,t,i]),Object(j.jsxs)("section",{className:"mb-4",children:[Object(j.jsxs)(k.a,{className:"mb-1",id:"queryForm",onSubmit:n?null:function(e){return function(e){e.preventDefault(),m()}(e)},children:[Object(j.jsxs)(P.a,{className:"mb-2 mt-3",children:[Object(j.jsx)(C.a,{lg:3,children:Object(j.jsx)("h5",{className:"mb-4",children:"General information"})}),Object(j.jsxs)(C.a,{children:[Object(j.jsxs)(k.a.Group,{as:P.a,className:"mb-3",controlId:"formName",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Name *"}),Object(j.jsx)(C.a,{sm:9,children:Object(j.jsx)(k.a.Control,{type:"text",value:t.name,onChange:function(e){return g("name",e.target.value)},required:!0})})]}),Object(j.jsxs)(k.a.Group,{as:P.a,className:"mb-3",controlId:"formCreator",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Creator"}),Object(j.jsx)(C.a,{sm:9,children:Object(j.jsx)(k.a.Control,{type:"text",value:t.creator,onChange:function(e){return g("creator",e.target.value)}})})]}),Object(j.jsxs)(k.a.Group,{as:P.a,className:"mb-3",controlId:"formDescription",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Description"}),Object(j.jsx)(C.a,{sm:9,children:Object(j.jsx)(k.a.Control,{as:"textarea",rows:3,value:t.description,onChange:function(e){return g("description",e.target.value)}})})]})]}),Object(j.jsx)(C.a,{lg:"2",children:Object(j.jsx)("p",{className:"text-secondary",children:"* required fields"})})]}),Object(j.jsxs)(P.a,{className:"mb-2",children:[Object(j.jsx)(C.a,{lg:3,children:Object(j.jsx)("h5",{className:"mb-4",children:"SPARQL endpoint"})}),Object(j.jsxs)(C.a,{children:[Object(j.jsxs)(k.a.Group,{as:P.a,className:"mb-3",controlId:"formQueryUrl",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Query URL *"}),Object(j.jsx)(C.a,{sm:9,children:Object(j.jsx)(k.a.Control,{type:"text",value:t.queryURL,onChange:function(e){return g("queryURL",e.target.value)},required:!0})})]}),Object(j.jsxs)(k.a.Group,{as:P.a,className:"mb-3",controlId:"formUpdateUrl",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Update URL"}),Object(j.jsxs)(C.a,{sm:9,children:[Object(j.jsx)(k.a.Control,{type:"text",value:t.updateURL,onChange:function(e){return g("updateURL",e.target.value)}}),Object(j.jsx)(k.a.Text,{className:"text-muted px-1",children:"necessary if different URLs for query and update are used"})]})]}),Object(j.jsxs)(k.a.Group,{as:P.a,className:"mb-3",controlId:"formBasicAuth",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Basic Auth"}),Object(j.jsxs)(C.a,{sm:9,children:[Object(j.jsx)(k.a.Check,{type:"switch",className:"form-switch-md",size:"lg",id:"formBasicAuthSwitch",checked:t.requiresBasicAuth,onChange:function(e){return g("requiresBasicAuth",e.target.checked)}}),t.requiresBasicAuth?s:null]})]}),Object(j.jsxs)(k.a.Group,{as:P.a,className:"mb-3",controlId:"formUpdateLogGraph",children:[Object(j.jsx)(k.a.Label,{column:!0,sm:3,children:"Update logging"}),Object(j.jsx)(C.a,{sm:9,children:Object(j.jsx)(B,{sparqlView:t,handleGraphNameChange:function(e){return g("updateLogGraph",e)}})})]})]}),Object(j.jsx)(C.a,{lg:"2"})]})]}),Object(j.jsxs)(P.a,{className:"mb-2",children:[Object(j.jsx)(C.a,{lg:3,children:Object(j.jsx)("h5",{className:"mb-4",children:"SPARQL query"})}),Object(j.jsxs)(C.a,{children:[Object(j.jsx)("div",{id:"yasqe"}),Object(j.jsx)("div",{className:"d-grid gap-2",children:Object(j.jsx)(f.a,{variant:b?"secondary":"primary",type:"submit",form:"queryForm",disabled:n,className:"my-2",children:n?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(H.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," loading \u2026 "]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"bi bi-send"})," ",b?"submit invalid query":"submit query"]})})})]})]})]})}function B(e){var t=e.sparqlView,r=e.handleGraphNameChange,n=a.a.useState("string"===typeof t.updateLogGraph||!1),i=Object(o.a)(n,2),s=i[0],c=i[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k.a.Check,{type:"switch",className:"form-switch-md",size:"lg",id:"formUpdateLogGraphSwitch",checked:s,onChange:function(e){!0===e.target.checked?(c(!0),r("")):(c(!1),r(void 0))}}),s&&Object(j.jsx)(q.a,{controlId:"formUpdateLogGraphName",label:"Named Graph for update logs *",children:Object(j.jsx)(k.a.Control,{type:"text",placeholder:"http://example.org/graph/updatelogs",autoComplete:"graph-name",value:t.updateLogGraph,onChange:function(e){return r(e.target.value)},required:!0})})]})}r(324);var W=r(264),G=r(205),_=(r(325),r(266)),Y=r(260);function z(e){var t=e.rawUri,r=e.prefixUri,n=Object(j.jsx)("span",{children:t});if(r&&r.indexOf(":")>0){var a=r.indexOf(":"),i=r.substring(0,a),s=r.substring(a+1,r.length);n=Object(j.jsxs)("span",{children:[i,":",Object(j.jsx)("strong",{children:s})]})}return Object(j.jsx)("td",{className:"text-break px-2 align-middle",children:Object(j.jsx)(_.a,{placement:"bottom",delay:{show:400,hide:800},overlay:Object(j.jsx)(Y.a,{className:"tooltip-light text-nowrap",children:Object(j.jsx)("div",{className:"m-1",children:Object(j.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:t})})}),children:n})})}r(326);var X=r(177),J=r(9),K=r(10),Z=r(16),$=r(17),ee=r(63),te=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(e,n){var a;return Object(K.a)(this,r),(a=t.call(this,e)).name="QueryError",a.endpointQuery=n,a}return Object(J.a)(r)}(Object(ee.a)(Error)),re=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(e,n){var a;return Object(K.a)(this,r),(a=t.call(this,e)).name="UpdateError",a.endpointUpdate=n,a}return Object(J.a)(r)}(Object(ee.a)(Error)),ne=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(e,n){var a;return Object(K.a)(this,r),(a=t.call(this,e,n)).name="UpdateCheckError",a}return Object(J.a)(r)}(re),ae=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(e,n){var a;return Object(K.a)(this,r),(a=t.call(this,e,n)).name="DataChangeUpdateCheckError",a}return Object(J.a)(r)}(re),ie=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(e){var n;return Object(K.a)(this,r),(n=t.call(this,e)).name="BuildingError",n}return Object(J.a)(r)}(Object(ee.a)(Error)),se=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(e,n){var a;return Object(K.a)(this,r),(a=t.call(this,e)).name="SolidError",a.fileURL=n,a}return Object(J.a)(r)}(Object(ee.a)(Error)),oe=function(e){Object(Z.a)(r,e);var t=Object($.a)(r);function r(e){var n;return Object(K.a)(this,r),(n=t.call(this,e)).name="RDFProcessingError",n}return Object(J.a)(r)}(Object(ee.a)(Error));function ce(e){var t=e.handleLiteralUpdate,r=e.handleInputReset,n=e.openModal,a=e.inputCellState,i=a.buildingError||a.updateCheckError||a.updateError,s=a.updateCheckError instanceof ae;return Object(j.jsxs)(X.a,{"aria-label":"update controls",className:"mt-1",children:[Object(j.jsx)(f.a,{variant:"success",type:"submit",alt:"update",onClick:function(e){return t(e)},disabled:a.isExecutingQuery||a.buildingError,children:a.isExecutingQuery?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(H.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," saving \u2026"]}):Object(j.jsxs)("span",{children:[Object(j.jsx)("i",{className:"bi bi-pencil-square"})," save "]})}),Object(j.jsxs)(f.a,{variant:"secondary",type:"reset",onClick:function(e){return r(e)},disabled:a.isExecutingQuery,children:[Object(j.jsx)("i",{className:"bi bi-arrow-counterclockwise"})," reset"]}),i?s?Object(j.jsxs)(f.a,{variant:"warning",onClick:function(){return n()},disabled:a.isExecutingQuery,children:[Object(j.jsx)("i",{className:"bi bi-exclamation-square"})," warn"]}):Object(j.jsxs)(f.a,{variant:"danger",onClick:function(){return n()},disabled:a.isExecutingQuery,children:[Object(j.jsx)("i",{className:"bi bi-x-square"})," error"]}):Object(j.jsxs)(f.a,{variant:"primary",onClick:function(){return n()},disabled:a.isExecutingQuery,children:[Object(j.jsx)("i",{className:"bi bi-info-square"})," info"]})]})}r(327);var le=r(87);function ue(e){var t=[];if(e instanceof te){if(e.message.includes("404")&&t.push("Wrong SPARQL endpoint URL"),e.message.includes("401")&&t.push("The SPARQL endpoint requires authentication (e.g. username/password)"),e.message.toLowerCase().includes("failed to fetch")||e.message.toLowerCase().includes("networkerror")){if(e.endpointQuery&&e.endpointQuery.length>1){var r=/^http:\/\/localhost[:/]/gi.test(e.endpointQuery),n=e.endpointQuery.toLowerCase().startsWith("http://"),a=window.location.href.startsWith("https://");!r&&n&&a&&t.push("Unencrypted HTTP requests from HTTPS websites are blocked by the browser")}t.push("The SPARQL server does not support CORS requests"),t.push("The SPARQL endpoint requires authentication (e.g. username/password)"),t.push("Wrong SPARQL endpoint URL")}e.message.toLowerCase().includes("unknown sparql results content type")&&t.push("The given URL is not a valid SPARQL endpoint"),e.message.toLowerCase().includes("parse error")&&(t.push("The submitted SPARQL query contains a syntax/grammar error. Please check if there is a red hint in the query box."),t.push("A grammar mistake in the SPARQL query"))}return e instanceof re&&(e.message.includes("404")&&t.push("Wrong SPARQL update endpoint URL"),(e.message.includes("415")||e.message.includes("405"))&&t.push("The given update URL is not a valid SPARQL update endpoint"),(e.message.includes("401")||e.message.toLowerCase().includes("failed to fetch"))&&(t.push("Wrong SPARQL update endpoint URL"),t.push("The SPARQL endpoint requires authentication (e.g. username/password)"))),(e instanceof ne||e instanceof ae)&&(e.message.toLowerCase().includes("ineffective")&&(t.push("RDF literal value has been changed in the meantime"),t.push("Connected RDF triples have been modified in the meantime")),e.message.toLowerCase().includes("ambiguous")&&t.push("The generated update would affect more than one RDF triple")),e instanceof ie&&t.push("An unsupported SPARQL language feature was used in the original query"),e instanceof se&&(e.message.includes("403")&&t.push("You have insufficient rights for this operation on the Solid Pod"),e.message.includes("404")&&t.push("The is no file/container with the given URL on the Solid Pod")),t}var de=4,he=10;function pe(e){var t=e.show,r=e.onHide,n=e.inputCellState,a=n.buildingError||n.updateCheckError||n.updateError,i=n.updateCheckError instanceof ae,s=de;if(n.updateQuery){var o=n.updateQuery.split(/\r\n|\r|\n/).length;s=Math.max(de,Math.min(o+1,he))}return Object(j.jsxs)(w.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(w.a.Header,{className:a?i?"alert-warning":"alert-danger":"",closeButton:!0,children:Object(j.jsxs)(w.a.Title,{id:"contained-modal-title-vcenter",children:["SPARQL update ",a?i?"warning":"error":"information"]})}),Object(j.jsxs)(w.a.Body,{className:a?i?"alert-warning":"alert-danger":"",children:[n.buildingError?Object(j.jsx)(be,{errorTitle:"Update query generation error",errorObject:n.buildingError}):n.updateError?Object(j.jsx)(be,{errorTitle:"Update execution error",errorObject:n.updateError}):n.updateCheckError?Object(j.jsx)(be,{errorTitle:"Update preflight check",errorObject:n.updateCheckError}):void 0,n.updateQuery&&Object(j.jsx)(k.a,{children:Object(j.jsxs)(k.a.Group,{className:"mb-3",controlId:"formSparqlUpdateQuery",children:[Object(j.jsx)(k.a.Label,{children:"Auto-generated update query"}),Object(j.jsx)(k.a.Control,{as:"textarea",rows:s,defaultValue:n.updateQuery,className:"white-readonly",readOnly:!0})]})})]})]})}function be(e){var t=e.errorTitle,r=e.errorObject,n=ue(r);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:t}),Object(j.jsxs)(le.a,{variant:"light",children:[Object(j.jsx)("p",{children:r.message}),n.length>0&&Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"font-weight-bold mb-1",children:"Possible causes:"}),Object(j.jsx)("ul",{children:n.map((function(e){return Object(j.jsx)("li",{children:e},e)}))})]})]})]})}function fe(e,t){switch(t.type){case"INPUTCELL_CHANGE":var r={origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue};if(t.currentCellValue!=e.origCellValue){r.currentCellValue=t.currentCellValue;try{r.checkQuery=t.buildCheckQuery(),r.updateQuery=t.buildUpdateQuery()}catch(l){var n=new ie("The update query building algorithm failed.\n".concat(l.name," - ").concat(l.message));r.updateQuery=r.checkQuery=null,r.buildingError=n}}return r;case"INPUTCELL_INSERT_INIT":var a={origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.origCellValue};try{a.updateQuery=t.buildUpdateQuery()}catch(l){var i=new ie("The update query building algorithm failed.\n".concat(l.name," - ").concat(l.message));a.updateQuery=a.checkQuery=null,a.buildingError=i}return a;case"INPUTCELL_RESET":return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue};case"INPUTCELL_UPDATE_START":return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.currentCellValue,updateQuery:e.updateQuery,checkQuery:e.checkQuery,isExecutingQuery:!0};case"INPUTCELL_UPDATE_SUCCESS":return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.currentCellValue,updateResult:t.result,isExecutingQuery:!1};case"INPUTCELL_UPDATE_FAIL":var s=new re("The update query failed.\n".concat(t.error.name," - ").concat(t.error.message),e.origSparqlSubmission.endpointUpdate);return{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.currentCellValue,updateQuery:e.updateQuery,checkQuery:e.checkQuery,updateError:s,isExecutingQuery:!1};case"INPUTCELL_UPDATECHECK_FAIL":var o="The preflight check was not successful:\n ".concat(t.error.message),c=new ne(o,e.origSparqlSubmission.endpointUpdate);return t.error instanceof ae&&(c=new ae(o,e.origSparqlSubmission.endpointUpdate)),{origSparqlSubmission:e.origSparqlSubmission,origCellValue:e.origCellValue,currentCellValue:e.currentCellValue,updateQuery:e.updateQuery,checkQuery:e.checkQuery,updateCheckError:c,isExecutingQuery:!1};default:throw new Error("Invalid reducer action: ".concat(t.type))}}var Oe=r(178);var je=Object(J.a)((function e(t,r,n,a){Object(K.a)(this,e),this.endpointQuery=t,this.endpointUpdate=r,this.queryString=n,this.credentials=a})),me=Object(J.a)((function e(t,r,n){Object(K.a)(this,e),this.querySubmission=t,this.queryResult=r,this.queryObject=n})),ge=r(98);function Te(e){var t=e.refreshTableCallback,r=e.isRefreshing,n=e.sparqlSubmission,i=e.rowBinding,s=e.variable,c=e.insertMode,l=void 0!==c&&c,u=e.sparqlView,d=a.a.useState(!1),h=Object(o.a)(d,2),p=h[0],b=h[1];return l?Object(j.jsxs)("td",{className:"align-middle",children:[!p&&Object(j.jsx)(f.a,{variant:"link",className:"text-secondary",onClick:function(){return b(!0)},disabled:r,children:Object(j.jsx)("small",{children:"insert missing value"})}),p&&Object(j.jsx)(Ee,{refreshTableCallback:t,isRefreshing:r,sparqlSubmission:n,rowBinding:i,variable:s,insertMode:!0,insertModeReset:function(){return b(!1)},sparqlView:u})]}):Object(j.jsx)("td",{className:"align-middle",children:Object(j.jsx)(Ee,{refreshTableCallback:t,isRefreshing:r,sparqlSubmission:n,rowBinding:i,variable:s,insertMode:l,sparqlView:u})})}function Ee(e){var t=e.refreshTableCallback,r=e.isRefreshing,n=e.sparqlSubmission,i=e.rowBinding,s=e.variable,c=e.insertMode,l=e.insertModeReset,u=e.sparqlView,d=a.a.useState(!1),h=Object(o.a)(d,2),p=h[0],b=h[1],f=function(e){var t=function(e){var t,r=null;return(null===(t=e.language)||void 0===t?void 0:t.length)>0?e.language:r}(e),r=e.datatype.value.toLowerCase(),n=Object(Oe.fromRdf)(e),a="text",i=null,s=null;switch(typeof n){case"string":r.endsWith("#time")&&/(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?$|(24:00:00(\.0+)?))$/.test(n)&&(a="time"),/\r?\n|\r/gm.test(n)&&(a="textarea");break;case"number":isNaN(n)?(s=new Error("Cannot convert '".concat(e.value,"' to a number.")),n=e.value):a="number";break;case"boolean":a="checkbox",n=String(n);break;case"object":if(n instanceof Date)if(r.endsWith("#date"))try{n=n.toISOString().substring(0,10),a="date"}catch(l){s=new Error("Cannot convert '".concat(e.value,"' to xsd:date.")),n=e.value}else if(r.endsWith("#datetime"))try{var o=6e4*n.getTimezoneOffset(),c=new Date(n.getTime()-o);n=c.toISOString().replace("Z",""),a="datetime-local",i=1}catch(l){s=new Error("Cannot convert '".concat(e.value,"' to xsd:dateTime.")),n=e.value}else/#gYear(Month)?$|#gDay$|#gMonth$/gi.test(r)&&(n=e.value)}return{error:s,value:n,inputType:a,inputStep:i,language:t}}(i[s]),O=f.error,m=f.value,g=f.inputType,T=f.inputStep,E=f.language,x=function(e,t){return{origSparqlSubmission:e,origCellValue:t,currentCellValue:null,buildingError:null,updateQuery:null,checkQuery:null,updateResult:null,updateError:null,updateCheckError:null,isExecutingQuery:!1}}(n,m),w=a.a.useReducer(fe,x),y=Object(o.a)(w,2),v=y[0],N=y[1];function I(){return A.apply(this,arguments)}function A(){return(A=Object(S.a)(Object(R.a)().mark((function e(){var t,r;return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new je(v.origSparqlSubmission.endpointQuery,v.origSparqlSubmission.endpointUpdate,v.checkQuery,v.origSparqlSubmission.credentials),console.log("inputCellState.checkQuery",v.checkQuery),e.prev=2,e.next=5,Object(ge.executeSelectOrUpdateQuery)(t);case 5:if(0!==(r=e.sent).length){e.next=10;break}throw new ae("ineffective update query");case 10:if(!(r.length>1)){e.next=14;break}throw new ne("ambiguous update query");case 14:if(1!==r.length){e.next=18;break}console.log("successful update query check"),e.next=19;break;case 18:throw new ne("invalid check result");case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(2),N({type:"INPUTCELL_UPDATECHECK_FAIL",error:e.t0}),e.abrupt("return",!1);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[2,21]])})))).apply(this,arguments)}function L(){return C.apply(this,arguments)}function C(){return(C=Object(S.a)(Object(R.a)().mark((function e(){var r;return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new je(v.origSparqlSubmission.endpointQuery,v.origSparqlSubmission.endpointUpdate,v.updateQuery,v.origSparqlSubmission.credentials),e.prev=1,e.next=4,Object(ge.executeSelectOrUpdateQuery)(r);case 4:"SUCCESS"===e.sent?t():N({type:"INPUTCELL_UPDATE_FAIL",error:new Error("update result not successful")}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),N({type:"INPUTCELL_UPDATE_FAIL",error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function P(e){return F.apply(this,arguments)}function F(){return(F=Object(S.a)(Object(R.a)().mark((function e(t){return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v.updateQuery&&!v.isExecutingQuery){e.next=3;break}return e.abrupt("return");case 3:return N({type:"INPUTCELL_UPDATE_START"}),e.next=6,I();case 6:e.sent&&L();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(e){var t=String(e.target.value);H(t)},H=function(e){N({type:"INPUTCELL_CHANGE",currentCellValue:e,buildUpdateQuery:function(){var t,r=JSON.parse(JSON.stringify(i));return r[s].valueNew=String(e),(null===(t=u.updateLogGraph)||void 0===t?void 0:t.length)>1?Object(ge.buildUpdateLogQueryForVariable)(n.queryString,r,u):Object(ge.buildUpdateQueryForVariable)(n.queryString,r)},buildCheckQuery:function(){var t=JSON.parse(JSON.stringify(i));return t[s].valueNew=String(e),Object(ge.buildCheckQueryForVariable)(n.queryString,t)}})},q=a.a.useRef(null);a.a.useEffect((function(){var e;null!==(e=q.current.dataset)&&void 0!==e&&e.reset&&(q.current.dataset.reset=null,q.current.focus())}),[v]),a.a.useEffect((function(){if(c){N({type:"INPUTCELL_INSERT_INIT",buildUpdateQuery:function(){return i[s].valueNew=String(v.origCellValue),Object(ge.buildUpdateQueryForVariable)(n.queryString,i)}}),q.current.dataset.reset=!0}}),[]);var M=v.isExecutingQuery||r,Q=!(!v.updateQuery&&!v.buildingError),V=!!(v.buildingError||v.updateError||v.updateCheckError),B=v.updateCheckError instanceof ae,W=v.currentCellValue||""===v.currentCellValue?v.currentCellValue:v.origCellValue;return Object(j.jsxs)("div",{children:[Object(j.jsxs)(k.a,{onSubmit:function(e){return P(e)},children:[{checkbox:Object(j.jsx)(k.a.Check,{type:"checkbox",onChange:function(e){return function(e){var t=String(e.target.checked);H(t)}(e)},label:W,ref:q,checked:"true"===W,isInvalid:V,readOnly:M,className:B?"warninput":""}),textarea:Object(j.jsx)(k.a.Control,{as:"textarea",onChange:function(e){return U(e)},ref:q,value:W,lang:E,isInvalid:V,isValid:!!v.updateResult||null,readOnly:M,className:B?"warninput":""})}[g]||Object(j.jsx)(k.a.Control,{type:g,onChange:function(e){return U(e)},isInvalid:V,ref:q,value:W,lang:E,step:T,isValid:!!v.updateResult||null,readOnly:M,className:B?"warninput":""}),Object(j.jsx)(D.a,{in:Q,mountOnEnter:!0,unmountOnExit:!0,children:Object(j.jsx)("div",{children:Object(j.jsx)(ce,{handleLiteralUpdate:P,handleInputReset:function(e){return"function"===typeof l?l():v.updateCheckError instanceof ae?t():(q.current.dataset.reset=!0,void N({type:"INPUTCELL_RESET"}))},openModal:function(){return b(!0)},inputCellState:v})})})]}),O&&Object(j.jsxs)("div",{className:"text-warning",title:O.message,children:[Object(j.jsx)("i",{className:"bi bi-exclamation-triangle"}),Object(j.jsx)("small",{children:" RDF datatype incorrect"})]}),Object(j.jsx)(pe,{show:p,onHide:function(){return b(!1)},inputCellState:v})]})}var xe=r(138),we=r(263),ye=r(76);function ve(e){var t="",r=e.datatype.value.toLowerCase(),n=Object(Oe.fromRdf)(e);switch(typeof n){case"string":t="";break;case"number":t="0.0";break;case"boolean":t="false";break;case"object":n instanceof Date&&(r.endsWith("#date")?t="1970-01-01":r.endsWith("#datetime")&&(t="1970-01-01T00:00:00"))}return t}function Ne(e){var t=new Set(e.flatMap((function(e){return Object.keys(e).filter((function(t){return!0===e[t].include}))})));return Object(I.a)(t)}var Re=10;function Se(e){var t=e.refreshTableCallback,r=e.isRefreshing,n=e.sparqlResult,i=e.sparqlView,s=a.a.useState(0),c=Object(o.a)(s,2),l=c[0],u=c[1],d=a.a.useState(""),h=Object(o.a)(d,2),p=h[0],b=h[1],O=a.a.useState(""),m=Object(o.a)(O,2),g=m[0],T=m[1],E=n.queryResult,x=n.querySubmission;x.queryString.toLowerCase().includes("optional")&&function(e){for(var t=new Map,r=function(r){Object.keys(e[r]).forEach((function(n){var a=e[r][n];"Literal"===a.termType&&!0===a.include&&a.datatype&&t.set(n,a)}))},n=0;n<e.length;n++)r(n);for(var a=function(r){t.forEach((function(t,n){e[r].hasOwnProperty(n)||(e[r][n]={termType:t.termType,datatype:t.datatype,language:t.language,value:ve(t),include:!0,insertMode:!0})}))},i=0;i<e.length;i++)a(i)}(E);var w=E.filter((function(e){return Object.values(e).some((function(e){return e.value.toLowerCase().indexOf(p.toLowerCase())>-1}))}));g&&g.length>0&&w.sort((function(e,t){return e[g]&&t[g]?e[g].value.toLowerCase()===t[g].value.toLowerCase()?0:e[g].value.toLowerCase()<t[g].value.toLowerCase()?-1:1:e[g]?-1:t[g]?1:0}));var y=Math.ceil(w.length/Re),v=w.slice(l*Re,(l+1)*Re);l>y&&u(0);var N={displayed:v.length,filtered:w.length,total:E.length};xe.a.ex="http://example.org/",Object.entries(n.queryObject.prefixes).forEach((function(e){var t=Object(o.a)(e,2),r=t[0],n=t[1];return xe.a[r]=n}));var R=Ne(w),S=Object(j.jsx)("tr",{children:R.map((function(e){return Object(j.jsx)("th",{children:Object(j.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(j.jsx)("h5",{className:"text-break my-auto mx-1",children:e}),Object(j.jsx)(f.a,{variant:"link",className:e===g?"text-primary":"text-secondary",onClick:function(){return function(e){T(g===e?"":e)}(e)},children:Object(j.jsx)("i",{className:"bi bi-sort-alpha-down"})})]})},e)}))});function A(e,n,a){return e.map((function(e){return n.hasOwnProperty(e)?function(e,n,a){var s="".concat(a,"_").concat(e,"_").concat(n.value);if(!0===n.include){if("Literal"===n.termType){var o="".concat(s,"_").concat(Math.random()),c=v[a];return Object(j.jsx)(Te,{refreshTableCallback:t,isRefreshing:r,sparqlSubmission:x,rowBinding:c,variable:e,insertMode:!!n.insertMode,sparqlView:i},o)}return Object(j.jsx)(z,{rawUri:n.value,prefixUri:Object(we.a)(n.value)},s)}return null}(e,n[e],a):Object(j.jsx)("td",{},"".concat(a,"_").concat(e))}))}var L=function(e,t){return e.map((function(e,r){return Object(j.jsx)("tr",{children:A(t,e,r)},r)}))}(v,R);function F(){var e=function(e){var t=Ne(e),r=[Object(I.a)(t)];e.forEach((function(n,a){r.push(t.map((function(t){var r,n,i=null===(r=e[a][t])||void 0===r?void 0:r.value,s=null===(n=e[a][t])||void 0===n?void 0:n.insertMode;return i&&!s?i:""})))}));var n=new RegExp("[".concat(",","\n]")),a="";return r.forEach((function(e){a+=e.map((function(e){return n.test(e)?'"'.concat(e,'"'):e})).join(",")+"\n"})),a}(w);Object(ye.b)(e,"sparqledit.csv")}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Ie,{isDisabled:r,resultNumbers:N,searchString:p,searchChangeCallback:function(e){return b(e.target.value)}}),Object(j.jsxs)(W.a,{hover:!0,size:"sm",responsive:!0,children:[Object(j.jsx)("thead",{children:S}),Object(j.jsx)("tbody",{children:L})]}),Object(j.jsxs)(P.a,{children:[Object(j.jsx)(C.a,{children:Object(j.jsx)(f.a,{variant:"link",className:"link-secondary",onClick:function(){return F()},disabled:r,children:"Save table as CSV"})}),Object(j.jsx)(C.a,{xs:"auto",children:Object(j.jsx)(Ae,{isDisabled:r,numberOfPages:y,page:l,setPage:u})})]})]})}function Ie(e){var t=e.isDisabled,r=e.resultNumbers,n=e.searchString,a=e.searchChangeCallback;return Object(j.jsxs)(P.a,{children:[Object(j.jsx)(C.a,{children:n?Object(j.jsxs)("p",{className:"align-middle",children:["Displaying ",Object(j.jsx)("strong",{children:r.displayed}),Object(j.jsxs)("strong",{children:[" / ",r.filtered]})," filtered results ( ",Object(j.jsx)("strong",{children:r.total})," total results )"]}):Object(j.jsxs)("p",{className:"align-middle",children:["Displaying ",Object(j.jsx)("strong",{children:r.displayed}),Object(j.jsxs)("strong",{children:[" / ",r.total]})," total results"]})}),Object(j.jsx)(C.a,{xs:"auto",children:Object(j.jsxs)(b.a,{className:"mb-3",children:[Object(j.jsx)(p.a,{placeholder:"search ...","aria-label":"full-text search","aria-describedby":"search-field",value:n,onChange:a,readOnly:t}),Object(j.jsx)(b.a.Text,{id:"search-field",children:Object(j.jsx)("i",{className:"bi bi-search"})})]})})]})}function Ae(e){var t=e.isDisabled,r=e.numberOfPages,n=e.page,a=e.setPage;if(r<=1)return null;return Object(j.jsx)(G.a,{className:"justify-content-end",children:function(e){return Object(I.a)(Array(e).keys()).filter((function(t){return function(t){return 0===t||Math.abs(t-n)<=3||t+1===e||e<10}(t)})).map((function(e){return Object(j.jsx)(G.a.Item,{onClick:function(){return a(e)},active:e===n,disabled:t,children:e+1},e)}))}(r)})}function Le(e){var t=e.sparqlResult&&e.sparqlResult.queryResult&&e.sparqlResult.queryResult.length>=1;return Object(j.jsx)("section",{children:t?Object(j.jsx)(Se,Object(F.a)({},e)):Object(j.jsx)("p",{children:"No results to display"})})}function Ce(e){var t=e.error,r=e.isDismissible,n=void 0===r||r,i=a.a.useState(!0),s=Object(o.a)(i,2),c=s[0],l=s[1],u=ue(t),d=Object(j.jsxs)(le.a,{variant:"danger",onClose:n?function(){return l(!1)}:null,dismissible:n,children:[Object(j.jsx)(le.a.Heading,{children:t.name}),Object(j.jsx)("p",{children:t.message}),u.length>0?Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"font-weight-bold mb-1",children:"Possible causes:"}),Object(j.jsx)("ul",{children:u.map((function(e){return Object(j.jsx)("li",{children:e},e)}))})]}):null]});return c?d:null}var Pe={loading:!1,error:null,result:null};function Fe(e,t){switch(t.type){case"FETCH_START":return{loading:!0,result:e.result};case"FETCH_FAIL":return{loading:!1,result:null,error:t.error};case"FETCH_SUCCESS":return{result:t.result};default:throw new Error("Invalid reducer action: ".concat(t.type))}}var Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe,n=a.a.useReducer(Fe,t),i=Object(o.a)(n,2),s=i[0],c=i[1];return a.a.useEffect((function(){function t(){return t=Object(S.a)(Object(R.a)().mark((function t(n){var a,i,s,o;return Object(R.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"FETCH_START"}),t.prev=1,t.next=4,Promise.resolve().then(r.bind(null,98));case 4:return a=t.sent,t.next=7,a.executeSelectOrUpdateQuery(e,n);case 7:i=t.sent,console.log("QueryResult",i),s=a.buildQueryObject(e.queryString),c({type:"FETCH_SUCCESS",result:new me(e,i,s)}),t.next=19;break;case 13:if(t.prev=13,t.t0=t.catch(1),"AbortError"!==t.t0.name&&!n.signal.aborted){t.next=17;break}return t.abrupt("return");case 17:o=new te("The query execution failed.\n".concat(t.t0.name," - ").concat(t.t0.message),e.endpointQuery),c({type:"FETCH_FAIL",error:o});case 19:case"end":return t.stop()}}),t,null,[[1,13]])}))),t.apply(this,arguments)}var n=new AbortController;return e&&function(e){t.apply(this,arguments)}(n),function(){n.abort()}}),[e]),s};function He(e,t){var r=a.a.useState((function(){return function(e,t){var r=sessionStorage.getItem(e);if(r)return JSON.parse(function(e){var t=atob(e),r=Uint8Array.from(t,(function(e){return e.codePointAt(0)}));return(new TextDecoder).decode(r)}(sessionStorage.getItem(e)));return t}(e,t)})),n=Object(o.a)(r,2),i=n[0],s=n[1];return a.a.useEffect((function(){sessionStorage.setItem(e,function(e){var t=(new TextEncoder).encode(e),r=Array.from(t,(function(e){return String.fromCodePoint(e)})).join("");return btoa(r)}(JSON.stringify(i)))}),[e,i]),[i,s]}function ke(e){var t=e.sparqlView,r=e.sparqlViewUpdateCallback,n=e.isEditMode,i=void 0===n||n,s=a.a.useState(),c=Object(o.a)(s,2),l=c[0],u=c[1],d=He("sparqledit-".concat(t.id),{username:"",password:""}),h=Object(o.a)(d,2),p=h[0],b=h[1],O=Ue(l),m=O.loading,g=O.result,T=O.error,E=function(){var e=t.updateURL&&t.updateURL.length>1?t.updateURL:t.queryURL,r=p.username.length>0?p:null;u(new je(t.queryURL,e,t.query,r))};var x=Object(j.jsx)(qe,{credentials:p,handleCredentialsInput:function(e,t){var r=Object(F.a)({},p);r[e]=t,b(r)}});return Object(j.jsxs)("section",{children:[i?Object(j.jsx)(V,{sparqlView:t,sparqlViewUpdateCallback:r,isLoading:m,onlyShowSubmitButton:!i,submitQueryCallback:E,credentialsForm:x}):Object(j.jsxs)(k.a,{onSubmit:function(e){e.preventDefault(),E()},children:[t.requiresBasicAuth?Object(j.jsxs)("dl",{className:"row",children:[Object(j.jsx)("dt",{className:"col-sm-3",children:"Authentication"}),Object(j.jsx)("dd",{className:"col-sm-5",children:x}),Object(j.jsx)("dd",{className:"col-sm-2",children:Object(j.jsx)("p",{className:"text-secondary",children:"* required fields"})})]}):null,Object(j.jsx)("div",{className:"mb-4",children:Object(j.jsx)(f.a,{variant:"primary",type:"submit",disabled:m,className:"col-sm-4 px-2",children:m?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(H.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"mx-2"})," loading \u2026 "]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"bi bi-send"})," load data table "]})})})]}),T?Object(j.jsx)(Ce,{error:T}):null,Object(j.jsx)(D.a,{in:!!g,mountOnEnter:!0,timeout:500,children:Object(j.jsx)("div",{children:Object(j.jsx)(Le,{refreshTableCallback:E,isRefreshing:m,sparqlResult:g,sparqlView:t})})})]})}function qe(e){var t=e.credentials,r=e.handleCredentialsInput;return Object(j.jsxs)(P.a,{children:[Object(j.jsx)(C.a,{children:Object(j.jsx)(q.a,{controlId:"formCredentialsUsername",label:"Username *",children:Object(j.jsx)(k.a.Control,{type:"text",placeholder:"username",autoComplete:"username",value:t.username,onChange:function(e){return r("username",e.target.value)},required:!0})})}),Object(j.jsx)(C.a,{children:Object(j.jsx)(q.a,{controlId:"formCredentialsPassword",label:"Password *",children:Object(j.jsx)(k.a.Control,{type:"password",placeholder:"password",autoComplete:"current-password",value:t.password,onChange:function(e){return r("password",e.target.value)},required:!0})})})]})}function De(e,t){var r=a.a.useState((function(){return function(e,t){var r=JSON.parse(localStorage.getItem(e));return r||t}(e,t)})),n=Object(o.a)(r,2),i=n[0],s=n[1];return a.a.useEffect((function(){var t=JSON.stringify(i);localStorage.setItem(e,t)}),[e,i]),[i,s]}var Me=r(130),Qe=r(56),Ve=r(14),Be=r(179),We=r(94),Ge=Ve.i.quad,_e=Ve.i.namedNode,Ye=Ve.i.literal,ze=function(){function e(t,r,n,a,i,s,o,c,l,u){Object(K.a)(this,e),this.id=t,this.name=r,this.description=n,this.creator=a,this.dateCreated=i,this.queryURL=s,this.updateURL=o&&o.length>1?o:s,this.query=c,this.requiresBasicAuth=l,this.updateLogGraph=u}return Object(J.a)(e,[{key:"createRdfQuads",value:function(){var e=new Be.a,t=e.createBlankNode();return e.addQuads([Ge(t,_e(O.b.rdf+"type"),_e(O.b.spedit+"SparqlView")),Ge(t,_e(O.b.schema+"name"),Ye(this.name)),Ge(t,_e(O.b.schema+"description"),Ye(this.description)),Ge(t,_e(O.b.schema+"creator"),Ye(this.creator)),Ge(t,_e(O.b.schema+"dateCreated"),Ye(this.dateCreated.toISOString(),_e(O.b.xsd+"dateTime"))),Ge(t,_e(O.b.spedit+"queryURL"),Ye(this.queryURL,_e(O.b.xsd+"anyURI"))),Ge(t,_e(O.b.spedit+"updateURL"),Ye(this.updateURL,_e(O.b.xsd+"anyURI"))),Ge(t,_e(O.b.spedit+"query"),Ye(this.query)),Ge(t,_e(O.b.spedit+"requiresBasicAuth"),Ye(this.requiresBasicAuth,_e(O.b.xsd+"boolean")))]),this.updateLogGraph&&e.addQuad(Ge(t,_e(O.b.spedit+"updateLogGraph"),Ye(this.updateLogGraph,_e(O.b.xsd+"anyURI")))),e.getQuads()}},{key:"serializeToTurtle",value:function(){var e=this,t=new We.a({prefixes:O.b});return new Promise((function(r,n){t.addQuads(e.createRdfQuads()),t.end((function(e,t){e?n(e):r(t)}))}))}},{key:"serializeToJsonld",value:function(){var e=Object(F.a)({},this);delete e.id,e["@context"]=Object(F.a)(Object(F.a)({},O.b),{},{name:{"@id":"schema:name"},description:{"@id":"schema:description"},creator:{"@id":"schema:creator"},dateCreated:{"@id":"schema:dateCreated","@type":"xsd:dateTime"},queryURL:{"@id":"spedit:queryURL","@type":"xsd:anyURI"},updateURL:{"@id":"spedit:updateURL","@type":"xsd:anyURI"},query:{"@id":"spedit:query"},requiresBasicAuth:{"@id":"spedit:requiresBasicAuth","@type":"xsd:boolean"},updateLogGraph:{"@id":"spedit:updateLogGraph","@type":"xsd:anyURI"}}),e["@type"]="spedit:SparqlView";var t=JSON.stringify(e);return Promise.resolve(t)}}]),e}(),Xe=r(265),Je=r(110);var Ke=function(e){return new ze(e,"Simple S-P-O view","Edit this view or create a new one.\nConnect to a SPARQL endpoint and edit any literal value.","system",Date.now(),"http://localhost:3030/example/query","http://localhost:3030/example/update","SELECT *\nWHERE {\n  ?s ?p ?o\n  FILTER( isLiteral(?o) )\n} LIMIT 100",!1)},Ze="\nPREFIX schema: <http://schema.org/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\nSELECT *\nFROM <http://localhost:7200/repositories/test/graph_1>\nWHERE {\n  ?s ?p ?o .\n  OPTIONAL {  \n    ?s rdfs:label ?label .\n  }\n  OPTIONAL {  \n    ?s schema:name ?name .\n  }\n  OPTIONAL {\n    ?s ?p [\n      rdf:value ?value\n    ] .\n  }\n}".trim(),$e=function(e){return new ze(e,"Advanced features example view","This example view shows SPARQL language features which are supported by SPARQL_edit.","system",Date.now(),"http://localhost:7200/repositories/test","http://localhost:7200/repositories/test/statements",Ze,!0)},et="\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX schema: <http://schema.org/>\n\nSELECT ?product ?name ?gtin ?weight\nFROM <http://example.org/graph/productcatalog-0>\nWHERE {\n  ?product rdf:type schema:Product ;\n    schema:name ?name ;\n    schema:gtin ?gtin ;\n    schema:weight [\n      schema:value ?weight\n    ]\n  FILTER (lang(?name) = 'en')\n}\n".trim(),tt=function(e){return new ze(e,"Product Catalog","Product catalog view for all products from department C3. Version 202206-B","Alice A.",Date.parse("2023-02-01T11:19:49.483Z"),"https://fuseki.iis.fraunhofer.de/sparqledit-example/query","https://fuseki.iis.fraunhofer.de/sparqledit-example/update",et,!0)},rt="\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX schema: <http://schema.org/>\n\nSELECT *\nFROM <http://example.org/graph/patients-0>\nWHERE {\n  ?patient a schema:Patient ;\n    foaf:name ?name ;\n    schema:birthDate ?birthdate .\n  OPTIONAL {\n    ?patient schema:weight [\n      a schema:QuantitativeValue ;\n      schema:unitCode <http://www.ontology-of-units-of-measure.org/resource/om-2/kilogram> ;\n      schema:value ?weight\n    ]\n  }\n}\n".trim(),nt=function(e){return new ze(e,"Patients Example","Table of patients' names, birthdates and weights.\nView for the example dataset made with schema.org concepts.","Alice A.",Date.parse("2022-12-01T16:21:17.660Z"),"https://fuseki.iis.fraunhofer.de/sparqledit-example/query","https://fuseki.iis.fraunhofer.de/sparqledit-example/update",rt,!0)},at="\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX schema: <http://schema.org/>\n\nSELECT ?physician ?telephone ?address ?postalCode\nFROM <http://example.org/graph/patients-0>\nWHERE {\n  ?physician a schema:Physician ;\n    schema:telephone ?telephone ;\n    schema:isAcceptingNewPatients ?acceptNewPatients .\n  OPTIONAL {\n    ?physician schema:address [\n      a schema:PostalAddress ;\n      schema:streetAddress ?address ;\n      schema:postalCode ?postalCode\n    ]\n  }\n}\n".trim(),it=function(e){return new ze(e,"Physicians Example","Table of physicians.\nView for the example dataset made with schema.org concepts.","Alice A.",Date.parse("2022-12-01T16:28:08.000Z"),"https://fuseki.iis.fraunhofer.de/sparqledit-example/query","https://fuseki.iis.fraunhofer.de/sparqledit-example/update",at,!0)},st="\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX schema: <http://schema.org/>\n\nSELECT ?name ?family ?birthdate ?weight ?medoffice ?medoffice_street ?medoffice_zip\nFROM <http://example.org/graph/patients-0>\nWHERE {\n  ?patient a schema:Patient ;\n    foaf:name ?name .\n  OPTIONAL {  \n    ?patient foaf:familyName ?family . \n  }\n  ?patient schema:birthDate ?birthdate .\n  OPTIONAL {\n    ?patient schema:weight [\n      schema:value ?weight\n    ] .\n  }\n  OPTIONAL {\n    ?patient schema:memberOf ?medoffice .\n    ?medoffice schema:address [\n      schema:streetAddress ?medoffice_street ;\n      schema:postalCode ?medoffice_zip  \n    ] .\n  }\n}\n".trim(),ot=function(e){return new ze(e,"Patients-Physicians Example","Table of patients and their physicians.\nView for the example dataset made with schema.org concepts.\n(enabled update logging)","Alice A.",Date.parse("2023-01-15T17:20:00.000Z"),"https://fuseki.iis.fraunhofer.de/sparqledit-example/query","https://fuseki.iis.fraunhofer.de/sparqledit-example/update",st,!0,"http://example.org/graph/updatelog-0")},ct="\nPREFIX nobel: <http://data.nobelprize.org/terms/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX dbo: <http://dbpedia.org/ontology/>\n\nSELECT ?name ?university ?prizeName ?prizeYear ?prizeMotivation\nWHERE {\n  ?person rdf:type nobel:Laureate ;\n    rdfs:label ?name ;\n    nobel:nobelPrize ?prize .\n  OPTIONAL {\n    ?person dbo:affiliation [\n    \trdfs:label ?university\n \t  ] ;\n    FILTER (lang(?university) = 'en')\n  }\n  ?prize rdfs:label ?prizeName ;\n    nobel:year ?prizeYear .\n  OPTIONAL {\n  \t?prize nobel:motivation ?prizeMotivation .\n    FILTER (lang(?prizeMotivation) = 'en')\n  }\n  FILTER (lang(?prizeName) = 'en')\n}\nORDER BY ?prizeYear ?name\n".trim(),lt=function(e){return new ze(e,"Nobel Prizes","Test view for the 'Nobel Prizes as Linked Data' dataset.","Susan S.",Date.parse("2023-05-05T11:30:03.450Z"),"https://fuseki.iis.fraunhofer.de/nobelprizes/","https://fuseki.iis.fraunhofer.de/nobelprizes/",ct,!0)},ut="\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX dbo: <http://dbpedia.org/ontology/>\nPREFIX dbp: <http://dbpedia.org/property/>\nPREFIX nobel: <http://data.nobelprize.org/terms/>\n\nSELECT ?familyName ?givenName ?gender ?dateOfBirth ?dateOfDeath ?birthPlace ?affiliation\nWHERE {\n  ?laureate rdf:type nobel:Laureate .\n  ?laureate rdfs:label ?label .\n  ?laureate foaf:name ?name .\n  ?laureate foaf:familyName ?familyName .\n  ?laureate foaf:givenName ?givenName .\n  ?laureate foaf:gender ?gender .\n  ?laureate dbp:dateOfBirth ?dateOfBirth .\n  ?laureate dbp:dateOfDeath ?dateOfDeath .\n  ?laureate dbo:birthPlace ?birthPlaceURI .\n  ?birthPlaceURI a dbo:Country .\n  ?birthPlaceURI rdfs:label ?birthPlace .\n  FILTER (lang(?birthPlace) = 'en')\n  ?laureate dbo:affiliation ?affiliationURI .\n  ?affiliationURI rdfs:label ?affiliation .\n  FILTER (lang(?affiliation) = 'en')\n}\n".trim(),dt=function(e){return new ze(e,"Nobel Prizes - Laureates","A test view for the 'Nobel Prizes as Linked Data' dataset. It lists information about laureates.","Susan S.",Date.parse("2023-05-05T11:42:11.000Z"),"https://fuseki.iis.fraunhofer.de/nobelprizes/","https://fuseki.iis.fraunhofer.de/nobelprizes/",ut,!0)},ht=function(){function e(){Object(K.a)(this,e)}return Object(J.a)(e,null,[{key:"generateUnsafeUuid",value:function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}},{key:"newBlankSparqlView",value:function(){return new ze(this.generateUnsafeUuid(),"New SPARQL view","This is a new SPARQL view.","unknown user",Date.now(),"","","SELECT *\nWHERE {\n  ?s ?p ?o\n}\nLIMIT 100",!1)}},{key:"newSparqlViewExample",value:function(e){return function(e,t){switch(t.toLowerCase().trim()){case"simple":default:return Ke(e);case"advanced":return $e(e);case"product":return tt(e);case"patient":case"patients":return nt(e);case"physician":case"physicians":return it(e);case"patient-physician":return ot(e);case"nobelprizes":case"nobel-prizes":return lt(e);case"nobel-laureates":return dt(e)}}(this.generateUnsafeUuid(),e)}},{key:"newSparqlViewFromObject",value:function(e){if(e instanceof ze||Object.keys(this.newBlankSparqlView()).filter((function(e){return"updateLogGraph"!==e})).every((function(t){return e.hasOwnProperty(t)})))return new ze(this.generateUnsafeUuid(),e.name,e.description,e.creator,new Date(e.dateCreated),e.queryURL,e.updateURL,e.query,e.requiresBasicAuth,e.updateLogGraph);throw new TypeError("Cannot create a SparqlView instance from this object.")}},{key:"createFrom",value:function(e){if(!e)return this.newBlankSparqlView();if(e instanceof Object)return this.newSparqlViewFromObject(e);if("string"===typeof e)return this.newSparqlViewExample(e);throw new TypeError("Unable to create a SparqlView instance from "+e)}},{key:"createFromRDF",value:function(){var e=Object(S.a)(Object(R.a)().mark((function e(t,r){var n;return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.toLowerCase().includes("application/ld+json")){e.next=7;break}return e.next=4,this.parseJsonldToQuads(t);case 4:n=e.sent,e.next=8;break;case 7:n=this.parseN3Family(t);case 8:if(!(n.length<1)){e.next=10;break}throw new oe("No RDF quads found.");case 10:return e.abrupt("return",this.createSparqlViewFromRDFQuads(n));case 13:throw e.prev=13,e.t0=e.catch(0),new oe("RDF parsing error.\n".concat(e.t0.name," - ").concat(e.t0.message));case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createSparqlViewFromRDFQuads",value:function(e){var t,r,n,a,i,s,o,c,l=Ve.i.namedNode,u=new Be.a;if(u.addQuads(e),u.countQuads(null,l(O.a.rdf+"type"),l(O.a.spedit+"SparqlView"))<1)throw new TypeError("Could not find a SparqlView defintion inside the parsed triples.");var d=u.getSubjects(null,l(O.a.rdf+"type"),l(O.a.spedit+"SparqlView"))[0],h=(null===(t=u.getObjects(d,l(O.a.schema+"name"),null)[0])||void 0===t?void 0:t.value)||"unknown name",p=(null===(r=u.getObjects(d,l(O.a.schema+"description"),null)[0])||void 0===r?void 0:r.value)||"unknown description",b=(null===(n=u.getObjects(d,l(O.a.schema+"creator"),null)[0])||void 0===n?void 0:n.value)||"unknown creator",f=new Date(u.getObjects(d,l(O.a.schema+"dateCreated"),null)[0].value),j=(null===(a=u.getObjects(d,l(O.a.spedit+"queryURL"),null)[0])||void 0===a?void 0:a.value)||"unknown queryURL",m=(null===(i=u.getObjects(d,l(O.a.spedit+"updateURL"),null)[0])||void 0===i?void 0:i.value)||"unknown updateURL",g=(null===(s=u.getObjects(d,l(O.a.spedit+"query"),null)[0])||void 0===s?void 0:s.value)||"unknown query",T="true"==(null===(o=u.getObjects(d,l(O.a.spedit+"requiresBasicAuth"),null)[0])||void 0===o?void 0:o.value.toLowerCase()),E=null===(c=u.getObjects(d,l(O.a.spedit+"updateLogGraph"),null)[0])||void 0===c?void 0:c.value;return new ze(this.generateUnsafeUuid(),h,p,b,f,j,m,g,T,E)}},{key:"parseJsonldToQuads",value:function(e){var t=new Xe.JsonLdParser;return new Promise((function(r,n){var a=[];t.on("data",(function(e){a.push(e)})),t.on("end",(function(){r(a)})),t.on("error",(function(e){console.error(e),n(e)})),t.write(e),t.end()}))}},{key:"parseN3Family",value:function(e){return(new Je.a).parse(e)}},{key:"clone",value:function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)}}]),e}();function pt(e){var t=e.show,r=e.onHide,n=e.sparqlView,i=De("solidContainerUrl",""),s=Object(o.a)(i,2),c=s[0],l=s[1],u=a.a.useReducer(Ot,ft),d=Object(o.a)(u,2),h=d[0],b=h.loading,O=h.successObj,m=h.error,g=d[1];function T(e,t){return E.apply(this,arguments)}function E(){return(E=Object(S.a)(Object(R.a)().mark((function e(t,r){var n,a,i,s,o,c,l;return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"UPLOAD_START"}),n="application/ld+json",a=ht.createFrom(t),e.next=5,a.serializeToJsonld();case 5:return i=e.sent,s="sparqledit_".concat(Object(ye.a)(t.name),".jsonld"),e.prev=7,e.next=10,Object(Qe.saveFileInContainer)(r,new Blob([i],{type:n}),{slug:s,contentType:n,fetch:Me.fetch});case 10:o=e.sent,console.log("File saved at ".concat(Object(Qe.getSourceUrl)(o)),o),c={savedFile:o,fileUrl:Object(Qe.getSourceUrl)(o)},g({type:"UPLOAD_SUCCESS",successObj:c}),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(7),console.error(e.t0),l=new se("The file could not be uploaded to the Solid Pod.\n".concat(e.t0.name," - ").concat(e.t0.message),r),g({type:"UPLOAD_FAIL",error:l});case 21:case"end":return e.stop()}}),e,null,[[7,16]])})))).apply(this,arguments)}function x(){return(x=Object(S.a)(Object(R.a)().mark((function e(t){return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("upload"),T(n,c);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)(w.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(w.a.Header,{closeButton:!0,children:Object(j.jsx)(w.a.Title,{id:"contained-modal-title-vcenter",children:"Upload view to a Solid Pod"})}),Object(j.jsxs)(w.a.Body,{children:[Object(j.jsxs)("p",{children:["Please insert the ",Object(j.jsx)("strong",{children:"URL to a Solid container"})," for which you have 'write' permissions:"]}),Object(j.jsxs)(k.a,{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(j.jsx)(p.a,{type:"url",className:"my-2",onChange:function(e){return l(e.target.value)},value:c,placeholder:"https://pod.example.org/private/sparqlviews/",required:!0}),Object(j.jsx)(f.a,{variant:"primary",type:"submit",disabled:b,className:"col-sm-6 mb-4",children:b?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(H.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"mx-2"})," loading \u2026 "]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"bi bi-cloud-arrow-up"})," upload to Pod "]})})]}),m&&Object(j.jsx)(Ce,{error:m}),O&&Object(j.jsx)(bt,{successObj:O})]})]})}function bt(e){var t=e.successObj,r=a.a.useState(!0),n=Object(o.a)(r,2),i=n[0],s=n[1],c=Object(j.jsxs)(le.a,{variant:"success",onClose:function(){return s(!1)},dismissible:!0,children:[Object(j.jsx)(le.a.Heading,{children:"Successfully uploaded!"}),Object(j.jsx)("p",{children:"The SPARQL view has been successfully uploaded to the Solid Pod."}),Object(j.jsx)("p",{children:Object(j.jsx)("a",{href:t.fileUrl,target:"_blank",rel:"noreferrer",className:"text-break",children:t.fileUrl})})]});return i?c:null}var ft={loading:!1,error:null,successObj:null};function Ot(e,t){switch(t.type){case"UPLOAD_START":return{loading:!0,successObj:null,error:null};case"UPLOAD_FAIL":return{loading:!1,successObj:null,error:t.error};case"UPLOAD_SUCCESS":return{loading:!1,successObj:t.successObj,error:null};default:throw new Error("Invalid reducer action: ".concat(t.type))}}function jt(e){return Object(j.jsx)(U.a,{fallbackRender:function(t){var r=t.error,n=t.resetErrorBoundary;return Object(j.jsx)(gt,{view:e.view,error:r,resetErrorBoundary:n})},onReset:function(e){},onError:function(e){console.error("ViewError",e)},children:Object(j.jsx)(mt,Object(F.a)({},e))})}function mt(e){var t=e.view,r=e.viewUpdateCallback,n=e.cardHandler,i=a.a.useState("view"),s=Object(o.a)(i,2),l=s[0],u=s[1],p=a.a.useState(!1),b=Object(o.a)(p,2),f=b[0],O=b[1],m=Object(c.useSession)().session.info.isLoggedIn;return Object(j.jsxs)(A.a,{className:"shadow",children:[Object(j.jsx)(A.a.Header,{children:Object(j.jsxs)("div",{className:"d-flex pr-2 justify-content-between flex-wrap",children:[Object(j.jsx)("h5",{children:t.name}),Object(j.jsxs)(d.a,{variant:"tabs",activeKey:l,onSelect:function(e){return u(e)},children:[Object(j.jsx)(d.a.Item,{className:"viewCardTab",children:Object(j.jsxs)(d.a.Link,{eventKey:"view",children:[Object(j.jsx)("i",{className:"bi bi-cardTab bi-table"})," View"]})}),Object(j.jsx)(d.a.Item,{className:"viewCardTab",children:Object(j.jsxs)(d.a.Link,{eventKey:"edit",children:[Object(j.jsx)("i",{className:"bi bi-cardTab bi-pencil-square"})," Edit"]})}),Object(j.jsxs)(h.a,{title:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"bi bi-cardTab bi-wrench"})," Manage"]}),id:"nav-dropdown",align:"end",className:"viewCardTab",children:[Object(j.jsxs)(h.a.Item,{onClick:function(){return n.clone(t)},children:[Object(j.jsx)("i",{className:"bi bi-front"})," Duplicate view"]}),Object(j.jsxs)(h.a.Item,{onClick:function(){return n.save(t)},children:[Object(j.jsx)("i",{className:"bi bi-file-earmark-arrow-down"})," Save config file"]}),Object(j.jsxs)(h.a.Item,{onClick:function(){return O(!0)},disabled:!m,title:m?"":"login with Solid to use this feature",style:{pointerEvents:"auto"},children:[Object(j.jsx)("img",{alt:"Solid",src:"solid_bw.svg",height:"20",style:m?{}:{opacity:.33}}),"  Upload to Pod"]}),Object(j.jsx)(h.a.Divider,{}),Object(j.jsxs)(h.a.Item,{className:"text-danger",onClick:function(){return n.delete(t)},children:[Object(j.jsx)("i",{className:"bi bi-trash"})," Delete"]})]})]}),Object(j.jsx)(pt,{show:f,onHide:function(){return O(!1)},sparqlView:t},Math.random())]})}),Object(j.jsx)(A.a.Body,{children:"edit"===l?Object(j.jsx)(ke,{sparqlView:t,sparqlViewUpdateCallback:r}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(A.a.Text,{children:t.description}),Object(j.jsxs)("dl",{className:"row",children:[Object(j.jsx)("dt",{className:"col-sm-3",children:"Creator"}),Object(j.jsx)("dd",{className:"col-sm-9",children:t.creator}),Object(j.jsx)("dt",{className:"col-sm-3",children:"Modification date"}),Object(j.jsx)("dd",{className:"col-sm-9",children:new Date(t.dateCreated).toLocaleString()})]}),Object(j.jsx)(ke,{sparqlView:t,isEditMode:!1})]})})]})}function gt(e){var t=e.view,r=e.error,n=e.resetErrorBoundary,a="".concat(r.name," - ").concat(r.message);return Object(j.jsxs)(A.a,{className:"shadow text-danger",border:"danger",children:[Object(j.jsx)(A.a.Header,{children:Object(j.jsxs)("div",{className:"d-flex pr-2 justify-content-between flex-wrap",children:[Object(j.jsx)("h5",{children:t.name}),Object(j.jsx)(d.a,{children:Object(j.jsx)(d.a.Item,{children:Object(j.jsxs)(d.a.Link,{onClick:n,className:"text-danger",children:[Object(j.jsx)("i",{className:"bi bi-bootstrap-reboot"})," Reload"]})})})]})}),Object(j.jsx)(A.a.Body,{children:Object(j.jsxs)("p",{className:"text-danger",children:[Object(j.jsx)("strong",{children:"ViewError: "}),a]})})]})}var Tt={loading:!1,error:null,file:null};function Et(e,t){switch(t.type){case"FETCH_START":return{loading:!0,file:e.result};case"FETCH_FAIL":return{loading:!1,file:null,error:t.error};case"FETCH_SUCCESS":return{file:t.file};default:throw new Error("Invalid reducer action: ".concat(t.type))}}var xt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tt,r=a.a.useReducer(Et,t),n=Object(o.a)(r,2),i=n[0],s=n[1];return a.a.useEffect((function(){function t(){return t=Object(S.a)(Object(R.a)().mark((function t(r){var n,a,i;return Object(R.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:"FETCH_START"}),n=function(e){return Object(Me.fetch)(e,{signal:r.signal})},t.prev=2,t.next=5,Object(Qe.getFile)(e,{fetch:n});case 5:a=t.sent,console.log("Fetched a ".concat(Object(Qe.getContentType)(a)," file from ").concat(Object(Qe.getSourceUrl)(a),".")),console.log("The file is ".concat(Object(Qe.isRawData)(a)?"not ":"","a dataset.")),s({type:"FETCH_SUCCESS",file:a}),t.next=17;break;case 11:if(t.prev=11,t.t0=t.catch(2),"AbortError"!==t.t0.name&&!r.signal.aborted){t.next=15;break}return t.abrupt("return");case 15:i=new se("The file could not be loaded from the Solid Pod.\n".concat(t.t0.name," - ").concat(t.t0.message),e),s({type:"FETCH_FAIL",error:i});case 17:case"end":return t.stop()}}),t,null,[[2,11]])}))),t.apply(this,arguments)}var r=new AbortController;return e&&e.length>0&&function(e){t.apply(this,arguments)}(r),function(){r.abort()}}),[e]),i};function wt(e){return yt.apply(this,arguments)}function yt(){return(yt=Object(S.a)(Object(R.a)().mark((function e(t){var r,n,a;return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return r=e.sent,n=Object(Qe.getContentType)(t),e.next=6,ht.createFromRDF(r,n);case 6:return a=e.sent,console.log(a),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e){var t=e.show,r=e.onHide,n=e.addNewSparqlViews,i=De("solidFileUrl",""),s=Object(o.a)(i,2),c=s[0],l=s[1],u=a.a.useState(""),d=Object(o.a)(u,2),h=d[0],b=d[1],O=function(e){var t=xt(e),r={loading:t.loading,error:t.error,view:null},n=a.a.useState(r),i=Object(o.a)(n,2),s=i[0],c=i[1];return a.a.useEffect((function(){function e(){return(e=Object(S.a)(Object(R.a)().mark((function e(t){var r;return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wt(t);case 3:r=e.sent,c({loading:!1,error:null,view:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({loading:!1,error:e.t0,view:null});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t.file&&function(t){e.apply(this,arguments)}(t.file),c({loading:t.loading,error:t.error,view:null})}),[t]),s}(h),m=O.loading,g=O.error,T=O.view;function E(){return(E=Object(S.a)(Object(R.a)().mark((function e(t){return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),h===c&&b(""),setTimeout((function(){return b(c)}),30);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.useEffect((function(){T&&(n([T]),r())}),[T]),Object(j.jsxs)(w.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(w.a.Header,{closeButton:!0,children:Object(j.jsx)(w.a.Title,{id:"contained-modal-title-vcenter",children:"Load config from Solid Pod"})}),Object(j.jsxs)(w.a.Body,{children:[Object(j.jsxs)("p",{children:["Please insert the ",Object(j.jsx)("strong",{children:'URL to a "SPARQL view" config file'})," on a Solid Pod you have access to:"]}),Object(j.jsxs)(k.a,{onSubmit:function(e){return E.apply(this,arguments)},children:[Object(j.jsx)(p.a,{type:"url",className:"my-2",onChange:function(e){return l(e.target.value)},value:c,placeholder:"https://pod.example.org/private/sparqlviews/view1.ttl",required:!0}),Object(j.jsx)(f.a,{variant:"primary",type:"submit",disabled:m,className:"col-sm-6 mb-4",children:m?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(H.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"mx-2"})," loading \u2026 "]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"bi bi-cloud-arrow-down"})," load from Pod "]})})]}),g&&Object(j.jsx)(Ce,{error:g})]})]})}function Nt(e){var t=e.show,r=e.onHide,n=e.error;return Object(j.jsxs)(w.a,{show:t,onHide:r,size:"lg",dialogClassName:"modal-90w","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(w.a.Header,{className:"alert-danger",closeButton:!0,children:Object(j.jsx)(w.a.Title,{id:"contained-modal-title-vcenter",children:"Error loading config file"})}),Object(j.jsx)(w.a.Body,{children:n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:n.name}),Object(j.jsx)("p",{children:n.message})]})})]})}function Rt(e){var t=e.addNewSparqlViews,r=Object(c.useSession)().session,n=a.a.useState(!1),i=Object(o.a)(n,2),s=i[0],l=i[1],u=a.a.useState(null),d=Object(o.a)(u,2),h=d[0],p=d[1];var b=a.a.useRef();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(X.a,{"aria-label":"Load view configurations",className:"mx-4",children:[Object(j.jsxs)(f.a,{variant:"outline-primary border-1",onClick:function(){var e=ht.createFrom();r.info.webId&&(e.creator=r.info.webId),t([e])},children:[Object(j.jsx)("i",{className:"bi bi-plus-lg fs-2"}),Object(j.jsx)("p",{className:"text-wrap mb-1 fw-bolder",children:"create blank view"})]}),Object(j.jsxs)(f.a,{variant:"outline-primary border-1",onClick:function(){b.current.value=null,b.current.click()},children:[Object(j.jsx)("i",{className:"bi bi-folder2-open fs-2"}),Object(j.jsx)("p",{className:"text-wrap mb-1 fw-bolder",children:"load config file"}),Object(j.jsx)("input",{type:"file",ref:b,onInput:function(e){return function(e){Array.from(e.target.files).forEach((function(e){console.log(e.name);var r=new FileReader;r.onload=function(){var n=Object(S.a)(Object(R.a)().mark((function n(a){var i,s,o;return Object(R.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.result,n.prev=1,n.next=4,ht.createFromRDF(i,"application/ld+json");case 4:s=n.sent,console.log(s),t([s]),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),o=new oe("Error parsing the JSON-LD config file '".concat(e.name,"': \n").concat(n.t0.name," - ").concat(n.t0.message)),p(o),console.error(o);case 14:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),r.onerror=r.onabort=function(t){return p(new Error("Error reading the file '".concat(e.name,"'\n").concat(t.name," - ").concat(t.message)))},r.readAsText(e)}))}(e)},style:{opacity:0,display:"none"},accept:".json,.jsonld,.txt"})]}),Object(j.jsxs)(f.a,{variant:"outline-primary border-1",onClick:function(){return l(!0)},disabled:!r.info.isLoggedIn,title:r.info.isLoggedIn?"":"login with Solid to use this feature",style:{pointerEvents:"auto"},children:[Object(j.jsx)("i",{className:"bi bi-cloud-arrow-down fs-2"}),Object(j.jsx)("p",{className:"text-wrap mb-1 fw-bolder",children:"load config from Solid Pod"})]})]}),Object(j.jsx)(vt,{show:s,onHide:function(){return l(!1)},addNewSparqlViews:t},Math.random()),Object(j.jsx)(Nt,{show:h,onHide:function(){return p(null)},error:h})]})}function St(){var e,t=De("sparqlViews",function(){var e=[ht.createFrom("product"),ht.createFrom("nobel-laureates"),ht.createFrom("nobel-prizes"),ht.createFrom("patient"),ht.createFrom("physician"),ht.createFrom("patient-physician")];"#init-product-view"===window.location.hash&&e.splice(1);"#init-empty"===window.location.hash&&(e=[]);return e}()),r=Object(o.a)(t,2),n=r[0],i=r[1],s=n.filter((function(e){return!0!==e.deleted})).length,c=(null===(e=n[0])||void 0===e?void 0:e.id)||"",l=a.a.useState(c),u=Object(o.a)(l,2),d=u[0],h=u[1];function p(e){e&&i(Object(I.a)(n))}function b(){return(b=Object(S.a)(Object(R.a)().mark((function e(t){var r,n,a;return Object(R.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ht.createFrom(t),e.next=3,r.serializeToJsonld();case 3:return n=e.sent,e.t0=console,e.next=7,r.serializeToTurtle();case 7:e.t1=e.sent,e.t0.log.call(e.t0,e.t1),a="sparqledit_".concat(Object(ye.a)(r.name),".jsonld"),Object(ye.c)(n,a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a.a.useEffect((function(){n.some((function(e){return e.deleted}))&&i(n.filter((function(e){return!e.deleted})))}),[d]);var f={activate:function(e){h(e)},delete:function(e){i(n.map((function(t){return t.id===e.id&&(t.deleted=!0),t})))},restore:function(e){delete e.deleted,i(Object(I.a)(n)),h(e.id)},clone:function(e){var t=ht.createFrom(e);t.name+=" (copy)";var r=n.findIndex((function(t){return t.id===e.id}))+1;r>0?n.splice(r,0,t):n.push(t),i(Object(I.a)(n))},save:function(e){return b.apply(this,arguments)}};return Object(j.jsxs)("section",{children:[Object(j.jsx)(P.a,{className:"justify-content-center mb-2",children:Object(j.jsxs)(C.a,{lg:"8",children:[Object(j.jsx)("h3",{className:"text-center",children:1===s?"1 SPARQL view":"".concat(s," SPARQL views")}),Object(j.jsx)("p",{className:"infoText px-2",children:'A "SPARQL view" is a simple configuration object. It defines how to load a table of values from an RDF Knowledge Graph. SPARQL_edit allows you to edit RDF literal values in the query result table.'})]})}),Object(j.jsxs)(L.a,{gap:4,children:[n.map((function(e){return e.deleted?Object(j.jsx)(At,{view:e,cardHandler:f},e.id):e.id===d?Object(j.jsx)(jt,{view:e,viewUpdateCallback:p,cardHandler:f},e.id):Object(j.jsx)(It,{view:e,cardHandler:f},e.id)})),Object(j.jsx)(Rt,{addNewSparqlViews:function(e){e&&e.length>0&&(i([].concat(Object(I.a)(n),Object(I.a)(e))),h(e[0].id))}},"addControlsKey")]})]})}function It(e){var t=e.view,r=e.cardHandler;return Object(j.jsxs)(A.a,{onClick:function(){return r.activate(t.id)},className:"shadow-sm mx-4",children:[Object(j.jsx)(A.a.Header,{children:Object(j.jsx)("h5",{children:t.name})}),Object(j.jsx)(A.a.Body,{children:Object(j.jsx)(A.a.Text,{children:t.description})})]},t.id)}function At(e){var t=e.view,r=e.cardHandler;return Object(j.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(j.jsxs)("span",{children:['"',t.name,'" deleted.']}),Object(j.jsx)(f.a,{variant:"link",onClick:function(e){return r.restore(t)},children:"Restore this view?"})]})}function Lt(){return Object(j.jsx)(v,{children:Object(j.jsx)(St,{})})}r(407);console.log=function(){},s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(Lt,{})}),document.getElementById("root"))},76:function(e,t,r){"use strict";function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return e.replace(/\s+/g,t)}((t=e,t.replace(/[^a-zA-Z0-9\s]/g,""))).substring(0,r)}function a(e,t){s(e,"application/ld+json",t||"sparqledit.jsonld")}function i(e,t){s(e,"text/csv",t||"sparqledit.csv")}function s(e,t,r){var n=new Blob([e],{type:t}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download=r||"sparqledit",document.body.appendChild(a),a.click(),a.remove()}function o(e){var t=-e.getTimezoneOffset(),r=Math.floor(Math.abs(t)/60),n=Math.abs(t)%60,a=t>=0?"+":"-",i=function(e){return("0"+e).slice(-2)};return e.getFullYear()+"-"+i(e.getMonth()+1)+"-"+i(e.getDate())+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())+a+i(r)+":"+i(n)}r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return o}))},98:function(e,t,r){"use strict";r.r(t),r.d(t,"executeSelectOrUpdateQuery",(function(){return p})),r.d(t,"buildCheckQueryForVariable",(function(){return j})),r.d(t,"buildUpdateQueryForVariable",(function(){return m})),r.d(t,"buildUpdateLogQueryForVariable",(function(){return g})),r.d(t,"buildQueryObject",(function(){return T}));var n=r(5),a=r(3),i=r(4),s=r(121),o=r(14),c=r(179),l=r(184),u=r(261),d=r(76),h=r(18);function p(e,t){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(Object(a.a)().mark((function e(t,r){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new u.a(t.credentials,r),"SELECT"!==n.getQueryType(t.queryString)){e.next=6;break}return e.abrupt("return",f(n,t,r));case 6:return e.abrupt("return",n.submitUpdateQuery(t.endpointUpdate,t.queryString,r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(Object(a.a)().mark((function e(t,r){var i,o,c,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=T(r.queryString),o=i.variables[0]instanceof s.Wildcard,c=i.variables.map((function(e){return e.value})),o||(i.variables=[new s.Wildcard]),e.next=6,t.submitQuery(r.endpointQuery,E(i));case 6:return(l=e.sent).forEach((function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var a=Object(n.a)(r[t],2),i=a[0],s=a[1];c.includes(i)||!0===o?s.include=!0:s.include=!1}})),e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){var r=T(e);return E(l.buildUpdateCheckQuery(r,t))}function m(e,t){var r=T(e);return E(l.buildUpdateQuery(r,t))}function g(e,t,r){var n=T(e),a=l.buildUpdateQuery(n,t);return function(e,t){var r=E(e);e.prefixes.rdf=h.a.rdf,e.prefixes.rdfs=h.a.rdfs,e.prefixes.xsd=h.a.xsd,e.prefixes.prov=h.a.prov,e.prefixes.spedit=h.a.spedit;var n={type:"graph",triples:[],name:{termType:"NamedNode",value:t||"http://example.org/graph/updatelog"}},a=o.i.quad,i=o.i.namedNode,s=o.i.literal,l=o.i.variable,u=new c.a,p=u.createBlankNode("updateActivity"),b=u.createBlankNode("updateQuery"),f=Object(d.d)(new Date),O="SPARQLedit_UpdateExecutionTime";u.addQuads([a(p,i(h.a.rdf+"type"),i(h.a.prov+"Activity")),a(p,i(h.a.prov+"used"),b),a(p,i(h.a.prov+"wasAssociatedWith"),i("http://iis.fraunhofer.de/sparqledit/app")),a(p,i(h.a.prov+"startedAtTime"),s(f,i(h.a.xsd+"dateTime"))),a(p,i(h.a.prov+"endedAtTime"),l(O)),a(b,i(h.a.rdf+"type"),i(h.a.prov+"Entity")),a(b,i(h.a.prov+"generatedAtTime"),s(f,i(h.a.xsd+"dateTime"))),a(b,i(h.a.spedit+"updateQuery"),s(r))]),n.triples.push(u.getQuads()),e.updates[0].insert.push(n);var j={type:"bind",variable:{termType:"Variable",value:O},expression:{type:"operation",operator:"now",args:[]}};e.updates[0].where.push(j)}(a,r.updateLogGraph),console.log(a),E(a)}function T(e){return(new s.Parser).parse(e)}function E(e){return(new s.Generator).stringify(e)}}},[[409,1,2]]]);